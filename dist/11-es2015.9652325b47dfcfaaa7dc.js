(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{LFMZ:function(t,e,o){"use strict";o.r(e),o.d(e,"FpsModule",function(){return At});var r=o("SVse"),a=o("Wcfd"),n=o("rVqu"),i=o("LqlI"),d=o("s7LF"),s=o("jMqV"),l=o("ZRSf"),b=o("iInd"),c=o("tUjy"),p=o("hLZb"),u=o("EE25"),m=o("IheW"),f=o("AytR"),_=o("8Y7J");let h=(()=>{class t{constructor(t){this.httpClient=t,this.apiURL=f.b.apiBaseUrl,this.httpOptions={headers:new m.e({"Content-Type":"application/json"})}}getQuery(t,e=null){let o=t;return null!=e&&(o+="?page_items="+e),this.httpClient.get(this.apiURL+o,this.httpOptions)}postQuery(t,e){return this.httpClient.post(this.apiURL+t,JSON.stringify(e),this.httpOptions)}}return t.\u0275fac=function(e){return new(e||t)(_.dc(m.b))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac}),t})();var g=o("Hva9");let y=(()=>{class t{constructor(t){this.httpClient=t}getFinancialInstition(t){return this.httpClient.get(g.a.apiBaseUrl+"/institutions-list/"+t).pipe()}getSkuAutoGeneratedKey(){return this.httpClient.get(g.a.apiBaseUrl+"/get-last-fps-sku-id").pipe()}getFPSAutoGeneratedKey(){return this.httpClient.get(g.a.apiBaseUrl+"/get-last-fps-id").pipe()}}return t.\u0275fac=function(e){return new(e||t)(_.dc(m.b))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),v=(()=>{class t{constructor(t){this.httpClient=t}getCurrencyList(t){return this.httpClient.get(g.a.apiBaseUrl+"/currencies-list/?countryCode="+t).pipe()}getCountryCodeFromCurrency(t){return this.httpClient.get(g.a.apiBaseUrl+"/convert-currency-to-country/?currency_code="+t).pipe()}}return t.\u0275fac=function(e){return new(e||t)(_.dc(m.b))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var V=o("y1st");function W(t,e){if(1&t&&(_.Wb(0,"div"),_.Rb(1,"span",1),_.Wb(2,"span",2),_.Pc(3,"(error)"),_.Vb(),_.Wb(4,"div",3),_.Pc(5),_.Vb(),_.Vb()),2&t){const t=_.kc();_.Db(5),_.Rc(" ",t.errorMsg," ")}}let P=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Kb({type:t,selectors:[["app-form-error-presentation"]],inputs:{errorMsg:"errorMsg",displayError:"displayError"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"glyphicon","glyphicon-remove","form-control-feedback","fix-error-icon"],[1,"sr-only"],[1,"error-msg"]],template:function(t,e){1&t&&_.Nc(0,W,6,1,"div",0),2&t&&_.rc("ngIf",e.displayError)},directives:[r.p],styles:[".error-msg[_ngcontent-%COMP%]{color:#ff1814}.fix-error-icon[_ngcontent-%COMP%]{top:27px}"]}),t})();const C=["successModal"],M=["dangerModal"],k=["foundModal"],F=["fpsAddFormContainer"];function w(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",77),_.Wb(1,"td",78),_.Rb(2,"input",79),_.Vb(),_.Wb(3,"td",78),_.Rb(4,"input",80),_.Vb(),_.Wb(5,"td",81),_.Rb(6,"p-dropdown",82),_.Vb(),_.Wb(7,"td",78),_.Rb(8,"input",83),_.Vb(),_.Wb(9,"td",84),_.Wb(10,"a",85),_.Rb(11,"i",86),_.Vb(),_.Pc(12," \xa0 "),_.Wb(13,"a",87),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc(2).removeAddMinProcedure(o)}),_.Rb(14,"i",88),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc(2);_.rc("formGroupName",t),_.Db(6),_.rc("options",o.fps_user_list)}}function O(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",26),_.Wb(2,"div",67),_.Wb(3,"h2"),_.Pc(4,"Procedure Usage "),_.Vb(),_.Vb(),_.Wb(5,"div",68),_.Wb(6,"label",69),_.Pc(7," Minimum Procedure "),_.Vb(),_.Vb(),_.Wb(8,"div",11),_.Rb(9,"input",70),_.Vb(),_.Vb(),_.Wb(10,"div",53),_.Wb(11,"form",71),_.Wb(12,"div",2),_.Wb(13,"table",72),_.Wb(14,"thead"),_.Wb(15,"tr"),_.Wb(16,"th"),_.Pc(17,"Date"),_.Vb(),_.Wb(18,"th"),_.Pc(19,"No. Of Procedure"),_.Vb(),_.Wb(20,"th"),_.Pc(21,"Updated By"),_.Vb(),_.Wb(22,"th"),_.Pc(23,"Updated On"),_.Vb(),_.Rb(24,"th"),_.Vb(),_.Vb(),_.Wb(25,"tbody"),_.Nc(26,w,15,2,"tr",73),_.Vb(),_.Wb(27,"tfoot",74),_.Wb(28,"tr"),_.Wb(29,"td",75),_.Wb(30,"i",76),_.gc("click",function(){return _.Fc(t),_.kc().addAddMinProcedure()}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=_.kc();_.Db(9),_.rc("readonly",!0),_.Db(2),_.rc("formGroup",t.minProcedureAddForm),_.Db(15),_.rc("ngForOf",t.addMinProcedure().controls)}}function R(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",77),_.Wb(1,"td",78),_.Rb(2,"input",79),_.Vb(),_.Wb(3,"td",78),_.Rb(4,"input",91),_.Vb(),_.Wb(5,"td",81),_.Rb(6,"p-dropdown",82),_.Vb(),_.Wb(7,"td",78),_.Rb(8,"input",83),_.Vb(),_.Wb(9,"td",84),_.Wb(10,"a",85),_.Rb(11,"i",86),_.Vb(),_.Pc(12," \xa0 "),_.Wb(13,"a",87),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc(2).removeAddMinUsage(o)}),_.Rb(14,"i",88),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc(2);_.rc("formGroupName",t),_.Db(6),_.rc("options",o.fps_user_list)}}function S(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",26),_.Wb(2,"div",67),_.Wb(3,"h2"),_.Pc(4,"Consumable Usage "),_.Vb(),_.Vb(),_.Wb(5,"div",68),_.Wb(6,"label",69),_.Pc(7," Minimum Usage "),_.Vb(),_.Vb(),_.Wb(8,"div",11),_.Rb(9,"input",89),_.Vb(),_.Vb(),_.Wb(10,"div",53),_.Wb(11,"form",71),_.Wb(12,"div",2),_.Wb(13,"table",90),_.Wb(14,"thead"),_.Wb(15,"tr"),_.Wb(16,"th"),_.Pc(17,"Date"),_.Vb(),_.Wb(18,"th"),_.Pc(19,"Usage"),_.Vb(),_.Wb(20,"th"),_.Pc(21,"Updated By"),_.Vb(),_.Wb(22,"th"),_.Pc(23,"Updated On"),_.Vb(),_.Rb(24,"th"),_.Vb(),_.Vb(),_.Wb(25,"tbody"),_.Nc(26,R,15,2,"tr",73),_.Vb(),_.Wb(27,"tfoot",74),_.Wb(28,"tr"),_.Wb(29,"td",75),_.Wb(30,"i",76),_.gc("click",function(){return _.Fc(t),_.kc().addAddMinUsage()}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=_.kc();_.Db(9),_.rc("readonly",!0),_.Db(2),_.rc("formGroup",t.minUsageAddForm),_.Db(15),_.rc("ngForOf",t.addMinUsage().controls)}}let A=(()=>{class t{constructor(t,e,o,r,a,n,i,d,s){this.fb=t,this.fpsService=e,this.appService=o,this.institutionService=r,this.zone=a,this.dialogService=n,this.activatedRoute=i,this.currencyService=d,this.router=s,this.agreement_mandatory=!1,this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!0,this.has_min_procedure=!0,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList()}get form_controls(){return this.fpsAddForm.controls}ngOnInit(){this.fpsAddForm=this.fb.group({fps_no:new d.f("",[d.y.required]),fps_opportunity_id:new d.f,fps_quote_id:new d.f,fps_customer_name:new d.f,fps_soci_uuid:new d.f,fps_transaction_type_id:new d.f(1,[d.y.min(1)]),fps_financier_id:new d.f("",[d.y.required,d.y.min(1)]),fps_payment_frequency:new d.f("",[d.y.required]),fps_status_id:new d.f(1,[d.y.min(1)]),fps_tenure_id:new d.f("",[d.y.required]),fps_adv_payment:new d.f("0"),fps_adv_payment_percentage:new d.f("0"),fps_net_financing_amount:new d.f("0"),fps_monthly_payment_amount:new d.f,fps_interest_rate:new d.f,fps_validated_by:new d.f,fps_approved_by:new d.f,fps_leas_aggr_no:new d.f("0"),fps_internal_aggr_no:new d.f,fps_remarks:new d.f,fps_currency_code:new d.f,fps_total_financial_amount:new d.f,fps_min_payment_amount:new d.f,fps_required_docs:new d.f,fps_data_area_id:new d.f,fps_consumable_usage:new d.f,fps_min_procedure:new d.f}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.activatedRoute.queryParams.subscribe(t=>{this.current_apportunity_id=t.opport_id,this.current_quot_id=t.quot_id,this.fpsAddForm.controls.fps_quote_id.setValue(this.current_quot_id),this.fpsAddForm.controls.fps_opportunity_id.setValue(this.current_apportunity_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(t=>{this.oppt_details=t.data,this.fpsAddForm.controls.fps_currency_code.setValue(this.oppt_details.currency_code),this.fpsAddForm.controls.fps_total_financial_amount.setValue(this.oppt_details.amount),this.fpsAddForm.controls.fps_data_area_id.setValue(this.oppt_details.customer.data_area_id),this.currencyService.getCountryCodeFromCurrency(this.oppt_details.currency_code).subscribe({next:t=>{t.success&&this.zone.run(()=>{this.countryCode=t.data.iso3})}})}),this.fpsService.getUsersList().subscribe(t=>{this.fps_user_list=t.data}),this.institutionService.getFPSAutoGeneratedKey().subscribe({next:t=>{t.success?this.zone.run(()=>{this.fpsAddForm.controls.fps_no.setValue("FPS"+(t.data[0].id+1)+"-"+this.oppt_details.opportunity_code)}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}onSave(){if(!this.fpsAddForm.valid)return this.fpsService.validateAllFormFields(this.fpsAddForm),void this.fpsAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.saveFps({fps_no:this.fpsAddForm.get("fps_no").value+"",fps_opportunity_id:this.fpsAddForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsAddForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsAddForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsAddForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsAddForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsAddForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsAddForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsAddForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsAddForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsAddForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsAddForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsAddForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsAddForm.get("fps_status_id").value+"",fps_validated_by:this.fpsAddForm.get("fps_validated_by").value,fps_approved_by:this.fpsAddForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsAddForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsAddForm.get("fps_remarks").value+"",fps_required_docs:this.fpsAddForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsAddForm.get("fps_data_area_id").value+""}).subscribe(t=>{if(t.id){let e=this.minProcedureAddForm.value.addMinProcedure;for(let r=0;r<e.length;r++)this.fpsService.storeMinProcedure({id:null,fps_id:t.id,date:e[r].date,no_procedure:e[r].no_procedure,updated_by:e[r].updated_by,updated_on:e[r].updated_on});let o=this.minUsageAddForm.value.addMinUsage;for(let r=0;r<o.length;r++)this.fpsService.storeMinUsage({id:null,fps_id:t.id,date:o[r].date,usage:o[r].usage,updated_by:o[r].updated_by,updated_on:o[r].updated_on});this.alertBody="FPS saved successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})},2e3)}},t=>{console.log(t),this.alertBody="The FPS can't save",this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)})}onChangeAdvancePayment(){let t=this.fpsAddForm.controls.fps_total_financial_amount.value;this.fpsAddForm.controls.fps_net_financing_amount.setValue(t-t/100*this.fpsAddForm.controls.fps_adv_payment_percentage.value)}updateInterestRate(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsAddForm.controls.fps_adv_payment.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsAddForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsAddForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment()}updateMontlyPayment(){let t=parseFloat(this.fpsAddForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsAddForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}updateTenure(){this.loadFinancialInstitutions();let t=this.fpsAddForm.controls.fps_financier_id.value,e=this.fpsAddForm.controls.fps_payment_frequency.value,o=this.fpsAddForm.controls.fps_transaction_type_id.value;o&&t&&e&&this.fpsService.getTenureList(o,t,e).subscribe(t=>{t.unshift(t.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),this.tenure_list=t},t=>{console.log(t)})}loadFinancialInstitutions(){this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.institutions_list=t.data.institutions}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}getFilteredCodes(t,e,o){return t.filter(function(t){return t[e]==o})}isFieldValid(t){return!this.fpsAddForm.get(t).valid&&this.fpsAddForm.get(t).touched}addMinProcedure(){return this.minProcedureAddForm.get("addMinProcedure")}newMinProcedure(){return this.fb.group({date:"",no_procedure:12,updated_by:1,updated_on:""})}addAddMinProcedure(){this.addMinProcedure().push(this.newMinProcedure())}removeAddMinProcedure(t){this.addMinProcedure().removeAt(t)}addMinUsage(){return this.minUsageAddForm.get("addMinUsage")}newMinUsage(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}addAddMinUsage(){this.addMinUsage().push(this.newMinUsage())}removeAddMinUsage(t){this.addMinUsage().removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(d.e),_.Qb(u.a),_.Qb(h),_.Qb(y),_.Qb(_.A),_.Qb(p.a),_.Qb(b.a),_.Qb(v),_.Qb(b.c))},t.\u0275cmp=_.Kb({type:t,selectors:[["app-create"]],viewQuery:function(t,e){if(1&t&&(_.Uc(C,1),_.Uc(M,1),_.Uc(k,1),_.Uc(F,1)),2&t){let t;_.Cc(t=_.hc())&&(e.successModal=t.first),_.Cc(t=_.hc())&&(e.dangerModal=t.first),_.Cc(t=_.hc())&&(e.foundModal=t.first),_.Cc(t=_.hc())&&(e.fpsAddFormContainerRef=t.first)}},features:[_.Cb([h])],decls:200,vars:25,consts:[[1,"animated","fadeIn"],["id","fpsAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["type","hidden","formControlName","fps_quote_id",1,"form-control"],["fpsAddFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment",1,"form-control"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"custom-footer","d-flex","justify-content-center"],["type","submit","form","fpsAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"]],template:function(t,e){1&t&&(_.Wb(0,"div",0),_.Wb(1,"form",1),_.gc("ngSubmit",function(){return e.onSave()}),_.Wb(2,"div",2),_.Wb(3,"div",3),_.Wb(4,"div",4),_.Wb(5,"div",5),_.Wb(6,"div",6),_.Pc(7,"Create FPS Request Form"),_.Vb(),_.Vb(),_.Wb(8,"div",7),_.Wb(9,"div",8),_.Wb(10,"div",9),_.Wb(11,"div",10),_.Wb(12,"div",2),_.Wb(13,"div",11),_.Wb(14,"div",12),_.Wb(15,"h3",13),_.Pc(16),_.Vb(),_.Vb(),_.Vb(),_.Wb(17,"div",14),_.Wb(18,"div",12),_.Wb(19,"label",13),_.Pc(20,"FPS Request No."),_.Vb(),_.Wb(21,"div",15),_.Pc(22),_.Vb(),_.Wb(23,"span"),_.Rb(24,"input",16),_.Vb(),_.Vb(),_.Vb(),_.Wb(25,"div",11),_.Wb(26,"div",12),_.Wb(27,"label",13),_.Pc(28,"Transaction Type"),_.Vb(),_.Wb(29,"p-dropdown",17),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(30,"div",11),_.Wb(31,"div",12),_.Wb(32,"label",13),_.Pc(33,"Status"),_.Vb(),_.Rb(34,"p-dropdown",18),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(35,"div",19),_.Wb(36,"div",2),_.Wb(37,"div",11),_.Wb(38,"div",12),_.Wb(39,"label",13),_.Pc(40,"Created Date"),_.Vb(),_.Wb(41,"div"),_.Pc(42),_.lc(43,"date"),_.Vb(),_.Vb(),_.Vb(),_.Wb(44,"div",11),_.Wb(45,"div",12),_.Wb(46,"label",13),_.Pc(47,"Opportunity ID "),_.Vb(),_.Wb(48,"div"),_.Pc(49),_.Rb(50,"input",20),_.Rb(51,"input",21),_.Vb(),_.Vb(),_.Vb(),_.Wb(52,"div",11),_.Wb(53,"div",12),_.Wb(54,"label",13),_.Pc(55,"Quote ID (Version)"),_.Vb(),_.Wb(56,"div"),_.Pc(57),_.Rb(58,"input",22),_.Vb(),_.Vb(),_.Vb(),_.Wb(59,"div",11),_.Wb(60,"div",12),_.Wb(61,"label",13),_.Pc(62,"SOCI No."),_.Vb(),_.Wb(63,"div"),_.Pc(64," ... "),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(65,"div",2,23),_.Wb(67,"div",24),_.Wb(68,"div",4),_.Wb(69,"div",7),_.Wb(70,"div",25),_.Wb(71,"h2"),_.Pc(72,"General"),_.Vb(),_.Vb(),_.Wb(73,"div",26),_.Wb(74,"label",27),_.Pc(75," Payment Frequency"),_.Wb(76,"span",28),_.Pc(77," * "),_.Vb(),_.Vb(),_.Wb(78,"div",29),_.Wb(79,"p-dropdown",30),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Rb(80,"app-form-error-presentation",31),_.Vb(),_.Wb(81,"label",27),_.Pc(82," Tenure "),_.Vb(),_.Wb(83,"div",29),_.Wb(84,"p-dropdown",32),_.gc("onChange",function(){return e.updateInterestRate()}),_.Vb(),_.Rb(85,"app-form-error-presentation",33),_.Vb(),_.Vb(),_.Wb(86,"div",26),_.Wb(87,"label",27),_.Pc(88," Financial Instititue"),_.Wb(89,"span",28),_.Pc(90," * "),_.Vb(),_.Vb(),_.Wb(91,"div",29),_.Wb(92,"p-dropdown",34),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Rb(93,"app-form-error-presentation",35),_.Vb(),_.Wb(94,"label",27),_.Pc(95," Interest % "),_.Vb(),_.Wb(96,"div",29),_.Wb(97,"input",36),_.gc("change",function(){return e.updateMontlyPayment()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(98,"div",26),_.Wb(99,"label",27),_.Pc(100," Currency"),_.Wb(101,"span",28),_.Pc(102," * "),_.Vb(),_.Vb(),_.Wb(103,"div",29),_.Rb(104,"input",37),_.Vb(),_.Wb(105,"label",27),_.Pc(106," Monthly Payment Amount "),_.Vb(),_.Wb(107,"div",29),_.Rb(108,"input",38),_.Vb(),_.Vb(),_.Wb(109,"div",26),_.Wb(110,"label",27),_.Pc(111," Total Financial Amount"),_.Wb(112,"span",28),_.Pc(113," * "),_.Vb(),_.Vb(),_.Wb(114,"div",29),_.Rb(115,"input",39),_.Vb(),_.Wb(116,"label",27),_.Pc(117," Min Payment Amount "),_.Vb(),_.Wb(118,"div",29),_.Rb(119,"input",40),_.Vb(),_.Vb(),_.Wb(120,"div",26),_.Wb(121,"div",41),_.Wb(122,"div",26),_.Wb(123,"label",42),_.Pc(124," Advance Payment (%) "),_.Vb(),_.Wb(125,"div",43),_.Wb(126,"input",44),_.gc("change",function(){return e.onChangeAdvancePayment()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(127,"div",26),_.Wb(128,"label",42),_.Pc(129," Advance Payment "),_.Vb(),_.Wb(130,"div",43),_.Rb(131,"input",45),_.Vb(),_.Vb(),_.Wb(132,"div",26),_.Wb(133,"label",42),_.Pc(134," Net Financing Amount "),_.Vb(),_.Wb(135,"div",43),_.Rb(136,"input",46),_.Vb(),_.Vb(),_.Vb(),_.Wb(137,"div",41),_.Wb(138,"div",26),_.Wb(139,"label",42),_.Pc(140," Remark "),_.Vb(),_.Wb(141,"div",43),_.Rb(142,"textarea",47),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(143,"hr"),_.Wb(144,"div",26),_.Wb(145,"label",27),_.Pc(146," Validated By "),_.Vb(),_.Wb(147,"div",29),_.Rb(148,"p-dropdown",48),_.Vb(),_.Wb(149,"label",27),_.Pc(150," Argeement No. "),_.Vb(),_.Wb(151,"div",29),_.Rb(152,"input",49),_.Vb(),_.Vb(),_.Wb(153,"div",26),_.Wb(154,"div",41),_.Wb(155,"div",26),_.Wb(156,"label",42),_.Pc(157," Approved By "),_.Vb(),_.Wb(158,"div",43),_.Rb(159,"p-dropdown",50),_.Vb(),_.Vb(),_.Vb(),_.Wb(160,"div",41),_.Wb(161,"div",26),_.Wb(162,"label",42),_.Pc(163," Required Documents "),_.Vb(),_.Wb(164,"div",43),_.Rb(165,"textarea",51),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(166,"hr"),_.Nc(167,O,31,3,"div",52),_.Nc(168,S,31,3,"div",52),_.Wb(169,"div",53),_.Wb(170,"div",54),_.Wb(171,"button",55),_.Pc(172,"Save"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(173,"br"),_.Wb(174,"div",53),_.Wb(175,"h3"),_.Pc(176,"File Library"),_.Vb(),_.Wb(177,"p"),_.Pc(178,"Work on this section will be done later"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(179,"div",56,57),_.Wb(181,"div",58),_.Wb(182,"div",59),_.Wb(183,"div",60),_.Wb(184,"h4",61),_.Pc(185,"Success"),_.Vb(),_.Vb(),_.Wb(186,"div",62),_.Wb(187,"p"),_.Pc(188),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(189,"div",63,64),_.Wb(191,"div",65),_.Wb(192,"div",59),_.Wb(193,"div",60),_.Wb(194,"h4",61),_.Pc(195,"Error"),_.Vb(),_.Vb(),_.Wb(196,"div",62),_.Wb(197,"p"),_.Pc(198),_.Vb(),_.Vb(),_.Rb(199,"div",66),_.Vb(),_.Vb(),_.Vb()),2&t&&(_.Db(1),_.rc("formGroup",e.fpsAddForm),_.Db(15),_.Rc(" ",e.oppt_details.customer.company_name," "),_.Db(6),_.Qc(e.form_controls.fps_no.value),_.Db(7),_.rc("options",e.fpsTypeList),_.Db(5),_.rc("options",e.fpsStatusList),_.Db(8),_.Rc(" ",_.nc(43,22,e.oppt_details.created_at,"dd-MMM-yyyy")," "),_.Db(7),_.Rc(" ",e.current_apportunity_id," "),_.Db(8),_.Rc(" ",e.current_quot_id," "),_.Db(22),_.rc("options",e.payment_frequency_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_payment_frequency")),_.Db(4),_.rc("options",e.tenure_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_tenure_id")),_.Db(7),_.rc("options",e.institutions_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_financier_id")),_.Db(11),_.rc("readonly",!0),_.Db(44),_.rc("options",e.fps_user_list),_.Db(4),_.rc("readonly",9!=e.fpsAddForm.controls.fps_status_id.value),_.Db(7),_.rc("options",e.fps_user_list),_.Db(8),_.rc("ngIf",e.has_min_procedure),_.Db(1),_.rc("ngIf",e.has_consumable_usage),_.Db(20),_.Qc(e.alertBody),_.Db(10),_.Qc(e.alertBody))},directives:[d.z,d.q,d.j,d.c,d.p,d.h,V.a,P,d.u,r.p,i.a,d.d,r.o,d.k,b.f,b.e],pipes:[r.f],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),t})();var D=o("1Hbi");let x=(()=>{class t{constructor(t,e){this.apiClient=t,this.httpClient=e,this.apiURL=f.b.apiBaseUrl,this.httpOptions={headers:new m.e({"Content-Type":"application/json"})}}getList(t,e,o){let r="sku?page_items="+t+"&search_text="+e;return o&&null!=o.field&&(r+="&field="+o.field+"&order="+o.order),this.apiClient.get(r)}getPage(t,e,o){return this.httpClient.get(t+"&page_items="+e+"&search_text="+o,this.httpOptions)}saveSku(t){return this.apiClient.post("sku/createDraft",t)}updateSku(t,e){return this.apiClient.post("sku/update/"+e,t)}updateSkuPaymentMethod(t){return this.apiClient.post("sku/UpdatePaymentMethod",t)}saveRates(t){return this.apiClient.post("rate/store",t)}saveRateDetails(t){return this.apiClient.post("rateDetails/store",t)}checksumRates(t){return this.apiClient.post("rate/checksum",t)}find(t){return this.httpClient.get(this.apiURL+"/sku-details/"+t).pipe()}loadRateDetails(t){return this.httpClient.get(this.apiURL+"/rate-details/"+t).pipe()}}return t.\u0275fac=function(e){return new(e||t)(_.dc(D.a),_.dc(m.b))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=o("1G5W"),E=o("XNiG"),q=o("hhfa"),U=o("MY3+"),L=o("gtx6");const T=["successModal"],I=["dangerModal"],Q=["foundModal"];function z(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",13),_.Wb(1,"div",14),_.Wb(2,"div"),_.Pc(3,"FPS SKU Listing"),_.Vb(),_.Wb(4,"div",15),_.Wb(5,"a",16),_.Rb(6,"i",17),_.Vb(),_.Vb(),_.Vb(),_.Wb(7,"div"),_.Wb(8,"span",18),_.Rb(9,"i",19),_.Wb(10,"input",20),_.gc("input",function(){return _.Fc(t),_.kc().getAll()})("ngModelChange",function(e){return _.Fc(t),_.kc().search_text=e}),_.Vb(),_.Vb(),_.Rb(11,"img",21),_.Rb(12,"img",22),_.Rb(13,"img",23),_.Vb(),_.Vb()}if(2&t){const t=_.kc();_.Db(10),_.rc("ngModel",t.search_text)}}function G(t,e){if(1&t&&(_.Wb(0,"th",25),_.Wb(1,"div",26),_.Pc(2),_.Vb(),_.Vb()),2&t){const t=e.$implicit;_.sc("pSortableColumn",t.field),_.Db(2),_.Rc(" ",t.header," ")}}const B=function(){return{width:"5%"}};function j(t,e){if(1&t&&(_.Wb(0,"tr"),_.Nc(1,G,3,2,"th",24),_.Rb(2,"th"),_.Vb()),2&t){const t=e.$implicit;_.Db(1),_.rc("ngForOf",t),_.Db(1),_.Jc(_.uc(3,B))}}const K=function(t){return["/fps/",t,"sku-edit"]};function X(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",27),_.Wb(1,"td",28),_.Wb(2,"span",29),_.Pc(3,"FPS SKU No"),_.Vb(),_.Pc(4),_.Vb(),_.Wb(5,"td",28),_.Wb(6,"span",29),_.Pc(7,"FPS Type"),_.Vb(),_.Pc(8),_.Vb(),_.Wb(9,"td",28),_.Wb(10,"span",29),_.Pc(11,"Financial Instititue"),_.Vb(),_.Pc(12),_.Vb(),_.Wb(13,"td",28),_.Wb(14,"span",29),_.Pc(15,"Validity Start Date"),_.Vb(),_.Pc(16),_.lc(17,"date"),_.Vb(),_.Wb(18,"td",28),_.Wb(19,"span",29),_.Pc(20,"Validity End Date"),_.Vb(),_.Pc(21),_.lc(22,"date"),_.Vb(),_.Wb(23,"td",28),_.Wb(24,"span",29),_.Pc(25,"Tenure"),_.Vb(),_.Pc(26),_.Vb(),_.Wb(27,"td",28),_.Wb(28,"span",29),_.Pc(29,"Rate"),_.Vb(),_.Pc(30),_.Vb(),_.Wb(31,"td",28),_.Wb(32,"span",29),_.Pc(33,"Monthly"),_.Vb(),_.Wb(34,"mat-slide-toggle",30),_.gc("change",function(){_.Fc(t);const o=e.$implicit;return _.kc().updatePaymentMethod("monthly_payment",o.id)}),_.Vb(),_.Vb(),_.Wb(35,"td",28),_.Wb(36,"span",29),_.Pc(37,"Quarterly"),_.Vb(),_.Wb(38,"mat-slide-toggle",31),_.gc("change",function(){_.Fc(t);const o=e.$implicit;return _.kc().updatePaymentMethod("quarterly_payment",o.id)}),_.Vb(),_.Vb(),_.Wb(39,"td",28),_.Wb(40,"span",29),_.Pc(41,"Half-Yearly"),_.Vb(),_.Wb(42,"mat-slide-toggle",32),_.gc("change",function(){_.Fc(t);const o=e.$implicit;return _.kc().updatePaymentMethod("half_yearly_payment",o.id)}),_.Vb(),_.Vb(),_.Wb(43,"td",28),_.Wb(44,"span",29),_.Pc(45,"Min Usage"),_.Vb(),_.Pc(46),_.Vb(),_.Wb(47,"td",28),_.Wb(48,"span",29),_.Pc(49,"Min Procedure"),_.Vb(),_.Pc(50),_.Vb(),_.Wb(51,"td",28),_.Rb(52,"span",29),_.Rb(53,"a",33),_.Vb(),_.Vb()}if(2&t){const t=e.$implicit,o=_.kc();_.Db(4),_.Rc(" ",t.uuid," "),_.Db(4),_.Rc(" ",o.showFPSType(t.package_type_id)," "),_.Db(4),_.Rc(" ",t.financial_institution.title," "),_.Db(4),_.Rc(" ",_.nc(17,13,t.validity_start_at,"dd-MMM-yyyy")," "),_.Db(5),_.Rc(" ",_.nc(22,16,t.validity_end_at,"dd-MMM-yyyy")," "),_.Db(5),_.Rc(" ",t.required_tenure," "),_.Db(4),_.Rc(" ",t.interest_rate," "),_.Db(4),_.rc("checked",1==t.monthly_payment),_.Db(4),_.rc("checked",1==t.quarterly_payment),_.Db(4),_.rc("checked",1==t.half_yearly_payment),_.Db(4),_.Rc(" ",t.consumable_usage," "),_.Db(4),_.Rc(" ",t.min_procedure," "),_.Db(3),_.rc("routerLink",_.vc(19,K,t.id))}}const H=function(){return["quote_id","company","amount","status"]},$=function(){return{showAll:"All"}},Y=function(t){return[10,25,50,t]};let J=(()=>{class t{constructor(t,e,o,r){this.skuService=t,this.dialogService=e,this.zone=o,this.fpsService=r,this.ngUnsubscribe=new E.a,this.search_text="",this.pageItems=10,this.columns=[{header:"FPS SKU No",field:"uuid",type:"string"},{header:"FPS Type",field:"",type:"text"},{header:"Financial Instititue",field:"",type:"text"},{header:"Validity Start Date",field:"validity_start_at",type:"date"},{header:"Validity End Date",field:"validity_end_at",type:"date"},{header:"Tenure",field:"required_tenure",type:"number"},{header:"Rate",field:"interest_rate",type:"decimal"},{header:"Monthly",field:"monthly_payment",type:"boolean"},{header:"Quarterly",field:"quarterly_payment",type:"boolean"},{header:"Half-Yearly",field:"half_yearly_payment",type:"boolean"},{header:"Min Usage",field:"min_usage",type:"number"},{header:"Min Procedure",field:"procedure_per_month",type:"number"}],this.fpsTypeList=this.fpsService.getTransSactionTypeList()}ngOnInit(){this.skuService.getList(this.pageItems,this.search_text,this.sort).subscribe({next:t=>{t.data.length&&this.zone.run(()=>{this.skuList=t.data,this.pages=t.links,this.totalRecords=t.total})},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}getAll(){}showFPSType(t){return this.fpsTypeList.find(e=>e.id==t).title}paginate(t){this.pageItems=t.rows,this.onClick(parseInt(t.page)+1)}onClick(t){this.skuService.getPage(this.pages[t].url,this.pageItems,this.search_text).pipe(Object(N.a)(this.ngUnsubscribe)).subscribe(t=>{this.zone.run(()=>{this.skuList=t.data.data,this.pages=t.data.links,this.totalRecords=t.data.total})})}updatePaymentMethod(t,e){this.skuService.updateSkuPaymentMethod({id:e,field:t}).subscribe({next:t=>{200==t.code&&(this.alertBody="Payment Method Updated.",this.successModal.show(),setTimeout(()=>{this.successModal.hide()},2e3))},error:t=>{this.dialogService.showErrorDialog("Payment Method Can't be Updated!<br>"+t)}})}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(x),_.Qb(p.a),_.Qb(_.A),_.Qb(u.a))},t.\u0275cmp=_.Kb({type:t,selectors:[["app-sku-index"]],viewQuery:function(t,e){if(1&t&&(_.Uc(T,1),_.Uc(I,1),_.Uc(Q,1)),2&t){let t;_.Cc(t=_.hc())&&(e.successModal=t.first),_.Cc(t=_.hc())&&(e.dangerModal=t.first),_.Cc(t=_.hc())&&(e.foundModal=t.first)}},decls:16,vars:14,consts:[["styleClass","p-datatable-customers","responsiveLayout","scroll",1,"table","table-hover","table-striped",3,"value","rowHover","reorderableColumns","filterDelay","globalFilterFields","columns"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","totalRecords","rowsPerPageOptions","onPageChange"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"table-header"],[1,"d-flex"],[1,"ml-2","mt-1"],["routerLink","/fps/sku-create","routerLinkActive","router-link-active"],[1,"icon-plus","icons",2,"color","#ffffff"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Global Search",3,"ngModel","input","ngModelChange"],["src","../../../../assets/img/icons/Vector (2).svg",2,"width","22px","margin","0px 8px 0px 0px"],["src","../../../../assets/img/icons/Vector (1).svg",2,"width","22px"],["src","../../../../assets/img/icons/vertcalLines.svg",2,"width","22px","margin","7px"],["class","text-center","pReorderableColumn","",3,"pSortableColumn",4,"ngFor","ngForOf"],["pReorderableColumn","",1,"text-center",3,"pSortableColumn"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"p-selectable-row"],[1,"text-center"],[1,"p-column-title"],["name","monthly_payment",1,"example-margin",3,"checked","change"],["name","quarterly_payment",1,"example-margin",3,"checked","change"],["name","half_yearly_payment",1,"example-margin",3,"checked","change"],["href","#",1,"fa","fa-edit",3,"routerLink"]],template:function(t,e){1&t&&(_.Wb(0,"p-table",0,1),_.Nc(2,z,14,1,"ng-template",2),_.Nc(3,j,3,4,"ng-template",3),_.Nc(4,X,54,21,"ng-template",4),_.Vb(),_.Wb(5,"p-paginator",5),_.gc("onPageChange",function(t){return e.paginate(t)}),_.Vb(),_.Wb(6,"div",6,7),_.Wb(8,"div",8),_.Wb(9,"div",9),_.Wb(10,"div",10),_.Wb(11,"h4",11),_.Pc(12,"Success"),_.Vb(),_.Vb(),_.Wb(13,"div",12),_.Wb(14,"p"),_.Pc(15),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()),2&t&&(_.rc("value",e.skuList)("rowHover",!0)("reorderableColumns",!0)("filterDelay",0)("globalFilterFields",_.uc(10,H))("columns",e.columns),_.Db(5),_.rc("rows",e.pageItems)("totalRecords",e.totalRecords)("rowsPerPageOptions",_.vc(12,Y,_.uc(11,$))),_.Db(10),_.Qc(e.alertBody))},directives:[l.f,q.h,U.a,i.a,b.f,b.e,d.c,L.a,d.p,d.s,r.o,l.b,l.e,s.a],pipes:[r.f],styles:["","tr[_ngcontent-%COMP%]{border:hidden}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{vertical-align:middle}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th>div.p-d-flex{word-break:normal}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto;padding:.25em}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:unset}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;color:#000;font-size:17px;margin-right:5px}.icon-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),t})(),Z=(()=>{class t{constructor(t){this.httpClient=t}getCountry(){return this.httpClient.get(g.a.apiBaseUrl+"/countries-list").pipe()}}return t.\u0275fac=function(e){return new(e||t)(_.dc(m.b))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var tt=o("7vha"),et=o("+yXi"),ot=o("FjU+"),rt=o("KnEf");const at=["successModal"],nt=["dangerModal"],it=["foundModal"],dt=["submitSkuAdd"],st=["skuAddFormContainer"];function lt(t,e){1&t&&_.Rb(0,"input",76)}function bt(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",77),_.Wb(1,"td",78),_.Rb(2,"input",79),_.Vb(),_.Wb(3,"td",78),_.Rb(4,"input",80),_.Vb(),_.Wb(5,"td",81),_.Rb(6,"input",82),_.Vb(),_.Wb(7,"td",83),_.Rb(8,"p-dropdown",84),_.Vb(),_.Wb(9,"td",78),_.Rb(10,"p-dropdown",85),_.Vb(),_.Wb(11,"td",86),_.Wb(12,"a",87),_.Rb(13,"i",88),_.Vb(),_.Pc(14," \xa0 "),_.Wb(15,"a",60),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc().removeAddRates(o)}),_.Rb(16,"i",89),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc();_.rc("formGroupName",t),_.Db(8),_.rc("options",o.rateStatusList),_.Db(2),_.rc("options",o.rateTypeOptions)}}let ct=(()=>{class t{constructor(t,e,o,r,a,n,i,d,s,l){this.countryService=t,this.currencyService=e,this.institutionService=o,this.dialogService=r,this.zone=a,this.fb=n,this.SkuService=i,this.datePipe=d,this.router=s,this.fpsService=l,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}ngOnInit(){this.skuAddForm=this.fb.group({uuid:new d.f("",[d.y.required]),validity_start_at:new d.f(new Date),package_type_id:new d.f("1",[d.y.required]),validity_end_at:new d.f(new Date),country_code:new d.f("",[d.y.required]),interest_rate:new d.f,financier_id:new d.f("",[d.y.required]),has_interest:new d.f,monthly_payment:new d.f,quarterly_payment:new d.f,half_yearly_payment:new d.f,currency_code:new d.f,min_payment_amount:new d.f("0"),min_usage:new d.f("0"),consumable_usage:new d.f,procedure_per_month:new d.f,required_tenure:new d.f("0"),required_docs:new d.f,agreement_mandatory:new d.f("0")}),this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.institutionService.getSkuAutoGeneratedKey().subscribe({next:t=>{t.success?this.zone.run(()=>{this.skuAddForm.controls.uuid.setValue("FPS-"+(t.data[0].id+1))}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve Auto generated ID.")}}),this.countryService.getCountry().subscribe({next:t=>{t.success?this.zone.run(()=>{this.countryList=t.data.countries}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve country list")}}),this.setConditionalValidators()}setConditionalValidators(){const t=this.skuAddForm.get("interest_rate");this.skuAddForm.get("has_interest").valueChanges.subscribe(e=>{1==e?t.setValidators([d.y.required]):t.clearValidators()})}onSave(){if(!this.skuAddForm.valid)return this.fpsService.validateAllFormFields(this.skuAddForm),void this.skuAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.saveSku({uuid:this.skuAddForm.get("uuid").value+"",country_code:this.skuAddForm.get("country_code").value+"",financier_id:this.skuAddForm.get("financier_id").value+"",monthly_payment:this.skuAddForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuAddForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuAddForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuAddForm.get("package_type_id").value+"",interest_rate:(this.skuAddForm.get("interest_rate").value?this.skuAddForm.get("interest_rate").value:0)+"",currency_code:this.skuAddForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuAddForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuAddForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuAddForm.get("required_docs").value+"",required_tenure:this.skuAddForm.get("required_tenure").value+"",agreement_mandatory:this.skuAddForm.get("agreement_mandatory").value?1:0,data_area_id:"test_data_rea_id",consumable_usage:this.skuAddForm.get("min_usage").value+"",min_procedure:this.skuAddForm.get("procedure_per_month").value+"",min_payment_amount:this.skuAddForm.get("min_payment_amount").value+""}).subscribe(t=>{if(t.id){let e=this.rateAddForm.value.addRates;for(let o=0;o<e.length;o++)this.storeRates({id:e[o].rate_no,financial_package_id:t.id,validity_start_at:e[o].validity_start_at,validity_end_at:e[o].validity_end_at,status:e[o].status,type:e[o].rate_type});this.alertBody="FPS saved successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3)}},t=>{console.log(t),this.alertBody="The FPS can't save <br>"+t,this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)})}triggerFalseClick(){this.submitSkuAdd.nativeElement.click()}cancelSkuForm(){this.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})}addRates(){return this.rateAddForm.get("addRates")}newAddRates(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,rate_type:"normal"})}addAddRates(){this.addRates().push(this.newAddRates())}removeAddRates(t){this.addRates().removeAt(t)}storeRates(t){this.SkuService.saveRates(t).subscribe(t=>{t.id&&console.log("Rates Stored successfully.")},t=>{console.log(t)})}isFieldValid(t){return!this.skuAddForm.get(t).valid&&this.skuAddForm.get(t).touched}countryChange(){this.countryCode=this.skuAddForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.currencies_list=t.data}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve currencies list")}}),this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.institutions_list=t.data.institutions}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(Z),_.Qb(v),_.Qb(y),_.Qb(p.a),_.Qb(_.A),_.Qb(d.e),_.Qb(x),_.Qb(r.f),_.Qb(b.c),_.Qb(u.a))},t.\u0275cmp=_.Kb({type:t,selectors:[["app-sku-create"]],viewQuery:function(t,e){if(1&t&&(_.Uc(at,1),_.Uc(nt,1),_.Uc(it,1),_.Uc(dt,1),_.Uc(st,1)),2&t){let t;_.Cc(t=_.hc())&&(e.successModal=t.first),_.Cc(t=_.hc())&&(e.dangerModal=t.first),_.Cc(t=_.hc())&&(e.foundModal=t.first),_.Cc(t=_.hc())&&(e.submitSkuAdd=t.first),_.Cc(t=_.hc())&&(e.skuAddFormContainerRef=t.first)}},decls:206,vars:27,consts:[[1,"animated","fadeIn"],[1,"row"],["skuAddFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],[1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["min_usage",""],["type","number","formControlName","min_usage",1,"form-control",3,"readonly"],["min_procedure",""],["type","number","formControlName","procedure_per_month",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","rate_type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],[1,"fa","fa-trash"]],template:function(t,e){if(1&t&&(_.Wb(0,"div",0),_.Wb(1,"div",1,2),_.Wb(3,"div",3),_.Wb(4,"div",4),_.Wb(5,"div",5),_.Wb(6,"div",6),_.Wb(7,"h2"),_.Pc(8,"Create FPS SKU Management"),_.Vb(),_.Vb(),_.Rb(9,"hr"),_.Wb(10,"form",7),_.gc("ngSubmit",function(){return e.onSave()}),_.Wb(11,"div",8),_.Wb(12,"label",9),_.Pc(13," FPS SKU No "),_.Wb(14,"span",10),_.Pc(15," * "),_.Vb(),_.Vb(),_.Wb(16,"div",11),_.Rb(17,"input",12),_.Rb(18,"app-form-error-presentation",13),_.Vb(),_.Wb(19,"label",9),_.Pc(20," Validity Start Date"),_.Wb(21,"span",10),_.Pc(22," * "),_.Vb(),_.Vb(),_.Wb(23,"div",11),_.Rb(24,"p-calendar",14),_.Vb(),_.Vb(),_.Wb(25,"div",8),_.Wb(26,"label",9),_.Pc(27," FPS Type "),_.Wb(28,"span",10),_.Pc(29," * "),_.Vb(),_.Vb(),_.Wb(30,"div",11),_.Rb(31,"p-dropdown",15),_.Rb(32,"app-form-error-presentation",16),_.Vb(),_.Wb(33,"label",9),_.Pc(34," Validity End Date "),_.Vb(),_.Wb(35,"div",11),_.Rb(36,"p-calendar",17),_.Vb(),_.Vb(),_.Wb(37,"div",8),_.Wb(38,"label",9),_.Pc(39," Country"),_.Wb(40,"span",10),_.Pc(41," * "),_.Vb(),_.Vb(),_.Wb(42,"div",11),_.Wb(43,"p-dropdown",18),_.gc("onChange",function(){return e.countryChange()}),_.Vb(),_.Rb(44,"app-form-error-presentation",19),_.Vb(),_.Wb(45,"label",9),_.Pc(46," Interest "),_.Vb(),_.Wb(47,"div",11),_.Wb(48,"div",8),_.Wb(49,"div",20),_.Rb(50,"mat-slide-toggle",21,22),_.Vb(),_.Wb(52,"div",23),_.Nc(53,lt,1,0,"input",24),_.Rb(54,"app-form-error-presentation",25),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(55,"div",8),_.Wb(56,"label",9),_.Pc(57," Financial Instititue"),_.Wb(58,"span",10),_.Pc(59," * "),_.Vb(),_.Vb(),_.Wb(60,"div",11),_.Rb(61,"p-dropdown",26),_.Rb(62,"app-form-error-presentation",27),_.Vb(),_.Vb(),_.Wb(63,"div",8),_.Wb(64,"label",9),_.Pc(65," Payment Frequency "),_.Vb(),_.Wb(66,"div",11),_.Wb(67,"div",28),_.Wb(68,"div",29),_.Rb(69,"p-checkbox",30),_.Wb(70,"label",31),_.Pc(71,"Monthly"),_.Vb(),_.Vb(),_.Wb(72,"div",29),_.Rb(73,"p-checkbox",32),_.Wb(74,"label",33),_.Pc(75,"Quarterly"),_.Vb(),_.Vb(),_.Wb(76,"div",29),_.Rb(77,"p-checkbox",34),_.Wb(78,"label",35),_.Pc(79,"Half-Yearly"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(80,"label",9),_.Pc(81," Mininumum Payment Amount "),_.Vb(),_.Wb(82,"div",11),_.Rb(83,"input",36),_.Vb(),_.Vb(),_.Wb(84,"div",8),_.Wb(85,"div",37),_.Wb(86,"div",8),_.Wb(87,"label",38),_.Pc(88," Mininumum Payment Amount "),_.Vb(),_.Wb(89,"div",11),_.Rb(90,"mat-slide-toggle",39,40),_.Vb(),_.Vb(),_.Vb(),_.Wb(92,"div",37),_.Wb(93,"div",8),_.Wb(94,"label",41),_.Pc(95," Min Payment Amount Currency "),_.Vb(),_.Wb(96,"div",42),_.Rb(97,"p-dropdown",43),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(98,"div",8),_.Wb(99,"div",37),_.Wb(100,"div",8),_.Wb(101,"label",38),_.Pc(102," Consumable Usage"),_.Wb(103,"span",10),_.Pc(104," * "),_.Vb(),_.Vb(),_.Wb(105,"div",11),_.Rb(106,"mat-slide-toggle",39,44),_.Vb(),_.Vb(),_.Vb(),_.Wb(108,"label",9),_.Pc(109," Minimum Usage"),_.Wb(110,"span",10),_.Pc(111," * "),_.Vb(),_.Vb(),_.Wb(112,"div",11),_.Rb(113,"input",45),_.Vb(),_.Vb(),_.Wb(114,"div",8),_.Wb(115,"div",37),_.Wb(116,"div",8),_.Wb(117,"label",38),_.Pc(118," Procedure Per Month"),_.Wb(119,"span",10),_.Pc(120," * "),_.Vb(),_.Vb(),_.Wb(121,"div",11),_.Rb(122,"mat-slide-toggle",39,46),_.Vb(),_.Vb(),_.Vb(),_.Wb(124,"label",9),_.Pc(125," Minimum Procedure"),_.Wb(126,"span",10),_.Pc(127," * "),_.Vb(),_.Vb(),_.Wb(128,"div",11),_.Rb(129,"input",47),_.Vb(),_.Vb(),_.Wb(130,"div",8),_.Wb(131,"div",37),_.Wb(132,"div",8),_.Wb(133,"label",38),_.Pc(134," Agreement Number Mandatory"),_.Wb(135,"span",10),_.Pc(136," * "),_.Vb(),_.Vb(),_.Wb(137,"div",11),_.Rb(138,"mat-slide-toggle",48),_.Vb(),_.Vb(),_.Vb(),_.Wb(139,"label",9),_.Pc(140," Required Tenure"),_.Wb(141,"span",10),_.Pc(142," * "),_.Vb(),_.Vb(),_.Wb(143,"div",11),_.Rb(144,"p-inputNumber",49),_.Rb(145,"app-form-error-presentation",50),_.Vb(),_.Vb(),_.Wb(146,"div",8),_.Rb(147,"div",37),_.Wb(148,"label",9),_.Pc(149," List of Document Required "),_.Vb(),_.Wb(150,"div",11),_.Rb(151,"textarea",51),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(152,"br"),_.Wb(153,"div",52),_.Wb(154,"form",53),_.Wb(155,"p-accordion",54),_.Wb(156,"p-accordionTab",55),_.Wb(157,"div",1),_.Wb(158,"table",56),_.Wb(159,"thead"),_.Wb(160,"tr"),_.Wb(161,"th"),_.Pc(162,"Rate No"),_.Vb(),_.Wb(163,"th"),_.Pc(164,"Validity Start Date"),_.Vb(),_.Wb(165,"th"),_.Pc(166,"Validity End Date"),_.Vb(),_.Wb(167,"th"),_.Pc(168,"Status"),_.Vb(),_.Wb(169,"th"),_.Pc(170,"Type"),_.Vb(),_.Rb(171,"th"),_.Vb(),_.Vb(),_.Wb(172,"tbody"),_.Nc(173,bt,17,3,"tr",57),_.Vb(),_.Wb(174,"tfoot",58),_.Wb(175,"tr"),_.Wb(176,"td",59),_.Wb(177,"a",60),_.gc("click",function(){return e.addAddRates()}),_.Rb(178,"i",61),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(179,"div",52),_.Wb(180,"div",62),_.Wb(181,"button",63),_.gc("click",function(){return e.cancelSkuForm()}),_.Pc(182," CANCEL"),_.Vb(),_.Wb(183,"button",64),_.Pc(184,"Save"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(185,"div",65,66),_.Wb(187,"div",67),_.Wb(188,"div",68),_.Wb(189,"div",69),_.Wb(190,"h4",70),_.Pc(191,"Success"),_.Vb(),_.Vb(),_.Wb(192,"div",71),_.Wb(193,"p"),_.Pc(194),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(195,"div",72,73),_.Wb(197,"div",74),_.Wb(198,"div",68),_.Wb(199,"div",69),_.Wb(200,"h4",70),_.Pc(201,"Error"),_.Vb(),_.Vb(),_.Wb(202,"div",71),_.Wb(203,"p"),_.Pc(204),_.Vb(),_.Vb(),_.Rb(205,"div",75),_.Vb(),_.Vb(),_.Vb()),2&t){const t=_.Dc(51),o=_.Dc(91),r=_.Dc(107),a=_.Dc(123);_.Db(10),_.rc("formGroup",e.skuAddForm),_.Db(7),_.rc("readonly",!0),_.Db(1),_.rc("displayError",e.isFieldValid("uuid")),_.Db(6),_.rc("showTime",!1),_.Db(7),_.rc("options",e.fpsTypeList),_.Db(1),_.rc("displayError",e.isFieldValid("package_type_id")),_.Db(4),_.rc("showTime",!1),_.Db(7),_.rc("options",e.countryList),_.Db(1),_.rc("displayError",e.isFieldValid("country_code")),_.Db(9),_.rc("ngIf",t.checked),_.Db(1),_.rc("displayError",e.isFieldValid("interest_rate")),_.Db(7),_.rc("options",e.institutions_list),_.Db(1),_.rc("displayError",e.isFieldValid("financier_id")),_.Db(7),_.rc("binary",!0),_.Db(4),_.rc("binary",!0),_.Db(4),_.rc("binary",!0),_.Db(6),_.rc("readonly",!o.checked),_.Db(14),_.rc("disabled",!o.checked)("options",e.currencies_list),_.Db(16),_.rc("readonly",!r.checked),_.Db(16),_.rc("readonly",!a.checked),_.Db(16),_.rc("displayError",e.isFieldValid("required_tenure")),_.Db(9),_.rc("formGroup",e.rateAddForm),_.Db(1),_.rc("multiple",!0),_.Db(18),_.rc("ngForOf",e.addRates().controls),_.Db(21),_.Qc(e.alertBody),_.Db(10),_.Qc(e.alertBody)}},directives:[d.z,d.q,d.j,d.c,d.p,d.h,P,tt.a,V.a,s.a,r.p,et.a,d.u,ot.a,rt.a,rt.c,d.d,r.o,b.f,b.e,i.a,d.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),t})();const pt=["addProductModal"],ut=["successModal"],mt=["dangerModal"],ft=["foundModal"],_t=["submitSkuAdd"],ht=["skuEditFormContainer"];function gt(t,e){1&t&&_.Rb(0,"input",93)}function yt(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",94),_.Wb(1,"td",95),_.Rb(2,"input",96),_.Vb(),_.Wb(3,"td",95),_.Rb(4,"input",97),_.Vb(),_.Wb(5,"td",98),_.Rb(6,"input",99),_.Vb(),_.Wb(7,"td",100),_.Rb(8,"p-dropdown",101),_.Vb(),_.Wb(9,"td",95),_.Rb(10,"p-dropdown",102),_.Vb(),_.Wb(11,"td",103),_.Wb(12,"a",62),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc().openAddRateDetailsModal(!0,o)}),_.Rb(13,"i",104),_.Vb(),_.Pc(14," \xa0 "),_.Wb(15,"a",62),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc().removeAddRates(o)}),_.Rb(16,"i",105),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc();_.rc("formGroupName",t),_.Db(8),_.rc("options",o.rateStatusList),_.Db(2),_.rc("options",o.rateTypeOptions)}}function vt(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",94),_.Wb(1,"td",106),_.Rb(2,"input",107),_.Vb(),_.Wb(3,"td",106),_.Rb(4,"input",108),_.Vb(),_.Wb(5,"td",103),_.Wb(6,"a",62),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc().removeAddRateDetails(o)}),_.Rb(7,"i",105),_.Vb(),_.Vb(),_.Vb()}2&t&&_.rc("formGroupName",e.index)}let Vt=(()=>{class t{constructor(t,e,o,r,a,n,i,d,s,l,b){this.countryService=t,this.currencyService=e,this.institutionService=o,this.dialogService=r,this.zone=a,this.fb=n,this.SkuService=i,this.route=d,this.fpsService=s,this.datePipe=l,this.router=b,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.has_interest_flag=!1,this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}ngOnInit(){this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.route.paramMap.subscribe(t=>{t.get("id")&&(this.getData(t.get("id")),this.skuID=t.get("id"))}),this.skuEditForm=this.fb.group({uuid:new d.f("",[d.y.required]),validity_start_at:new d.f(new Date),package_type_id:new d.f("1",[d.y.required]),validity_end_at:new d.f(new Date),country_code:new d.f("",[d.y.required]),interest_rate:new d.f,financier_id:new d.f("",[d.y.required]),has_interest_flag:new d.f,min_payment_amount_flag:new d.f,monthly_payment:new d.f,quarterly_payment:new d.f,half_yearly_payment:new d.f,currency_code:new d.f,min_payment_amount:new d.f("0"),consumable_usage:new d.f,min_procedure:new d.f,required_tenure:new d.f("0"),required_docs:new d.f,agreement_mandatory:new d.f("0"),has_min_procedure:new d.f("0"),has_consumable_usage:new d.f("0")}),this.countryService.getCountry().subscribe({next:t=>{t.success?this.zone.run(()=>{this.countryList=t.data.countries}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve country list")}}),this.loadInstitutionsList(),this.setConditionalValidators()}cancelSkuForm(){}setConditionalValidators(){const t=this.skuEditForm.get("interest_rate");this.skuEditForm.get("has_interest_flag").valueChanges.subscribe(e=>{1==e?t.setValidators([d.y.required]):t.clearValidators()})}getData(t){this.SkuService.find(t).subscribe(t=>{this.skuEditForm.patchValue(t.data),this.countryCode=this.skuEditForm.get("country_code").value,this.countryChange(),t.data.interest_rate>0&&this.skuEditForm.controls.has_interest_flag.setValue(!0),t.data.min_payment_amount>0&&this.skuEditForm.controls.min_payment_amount_flag.setValue(!0),t.data.consumable_usage>0&&this.skuEditForm.controls.has_consumable_usage.setValue(!0),t.data.min_procedure>0&&this.skuEditForm.controls.has_min_procedure.setValue(!0),t.data.rates.forEach(t=>{this.rate_counter=t.id,this.addRates().push(this.existingRates(t))})})}isFieldValid(t){return!this.skuEditForm.get(t).valid&&this.skuEditForm.get(t).touched}onSave(){if(!this.skuEditForm.valid)return this.fpsService.validateAllFormFields(this.skuEditForm),void this.skuEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.updateSku({uuid:this.skuEditForm.get("uuid").value+"",country_code:this.skuEditForm.get("country_code").value+"",financier_id:this.skuEditForm.get("financier_id").value+"",monthly_payment:this.skuEditForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuEditForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuEditForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuEditForm.get("package_type_id").value+"",interest_rate:(this.skuEditForm.get("interest_rate").value?this.skuEditForm.get("interest_rate").value:0)+"",currency_code:this.skuEditForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuEditForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuEditForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuEditForm.get("required_docs").value+"",required_tenure:this.skuEditForm.get("required_tenure").value+"",agreement_mandatory:this.skuEditForm.get("agreement_mandatory").value+"",data_area_id:"test_data_rea_id",consumable_usage:this.skuEditForm.get("consumable_usage").value+"",min_procedure:this.skuEditForm.get("min_procedure").value+"",min_payment_amount:this.skuEditForm.get("min_payment_amount").value+""},this.skuID).subscribe(t=>{t.id&&(this.alertBody="FPS updated successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide();let e=this.rateAddForm.value.addRates,o=[];for(let r=0;r<e.length;r++)o.push(e[r].rate_no),this.storeRates({id:e[r].rate_no,financial_package_id:t.id,validity_start_at:e[r].validity_start_at,validity_end_at:e[r].validity_end_at,status:e[r].status,type:e[r].type});this.rateCheckSum(o,t.id),this.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3))},t=>{console.log(t),this.alertBody="The FPS can't updated <br>"+t,this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)})}onSaveRateDetails(){let t=this.rateDatailAddForm.value.addRateDetails,e=[];for(let o=0;o<t.length;o++)t[o].details_tenure>0&&t[o].details_interest_rate>0&&e.push({details_rate_no:this.currentRateNo,details_tenure:t[o].details_tenure,details_interest_rate:t[o].details_interest_rate});this.storeRatesDetails(e),this.addRateDetailsModal.hide()}addRates(){return this.rateAddForm.get("addRates")}existingRates(t){return this.fb.group({rate_no:t.id,validity_start_at:t.validity_start_at,validity_end_at:t.validity_end_at,status:t.status,type:t.type})}newAddRates(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,type:"normal"})}addAddRates(){this.addRates().push(this.newAddRates())}removeAddRates(t){this.addRates().removeAt(t)}storeRates(t){this.SkuService.saveRates(t).subscribe(t=>{t.id&&console.log("Rates Stored successfully.")},t=>{console.log(t)})}countryChange(){this.countryCode=this.skuEditForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.currencies_list=t.data}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve currencies list")}}),this.loadInstitutionsList()}loadInstitutionsList(){this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.institutions_list=t.data.institutions}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}rateCheckSum(t,e){this.SkuService.checksumRates({activeRateIDs:t,skuID:e}).subscribe()}openAddRateDetailsModal(t,e){this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.currentRateNo=this.rateAddForm.value.addRates[e].rate_no,this.currentRateStart=this.rateAddForm.value.addRates[e].validity_start_at,this.currentRateEnd=this.rateAddForm.value.addRates[e].validity_end_at,this.currentRateType=this.rateAddForm.value.addRates[e].type,this.SkuService.loadRateDetails(this.currentRateNo).subscribe(e=>{e.data.rate_details.forEach(t=>{this.addRateDetails().push(this.existingRateDetails(t))}),this.addLine=t,this.addRateDetailsModal.show()},t=>{alert("Details for new rates can be added only after saving. please save and re-edit.")})}addRateDetails(){return this.rateDatailAddForm.get("addRateDetails")}existingRateDetails(t){return this.fb.group({details_tenure:t.details_tenure,details_interest_rate:t.details_interest_rate})}newAddRateDetails(){return this.fb.group({details_tenure:0,details_interest_rate:0})}addAddRateDetails(){this.addRateDetails().push(this.newAddRateDetails())}removeAddRateDetails(t){this.addRateDetails().removeAt(t)}storeRatesDetails(t){this.SkuService.saveRateDetails(t).subscribe(t=>{t.id&&console.log("Rate Details Stored successfully.")},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(Z),_.Qb(v),_.Qb(y),_.Qb(p.a),_.Qb(_.A),_.Qb(d.e),_.Qb(x),_.Qb(b.a),_.Qb(u.a),_.Qb(r.f),_.Qb(b.c))},t.\u0275cmp=_.Kb({type:t,selectors:[["app-sku-edit"]],viewQuery:function(t,e){if(1&t&&(_.Uc(pt,1),_.Uc(ut,1),_.Uc(mt,1),_.Uc(ft,1),_.Uc(_t,1),_.Uc(ht,1)),2&t){let t;_.Cc(t=_.hc())&&(e.addRateDetailsModal=t.first),_.Cc(t=_.hc())&&(e.successModal=t.first),_.Cc(t=_.hc())&&(e.dangerModal=t.first),_.Cc(t=_.hc())&&(e.foundModal=t.first),_.Cc(t=_.hc())&&(e.submitSkuAdd=t.first),_.Cc(t=_.hc())&&(e.skuEditFormContainerRef=t.first)}},decls:262,vars:38,consts:[[1,"animated","fadeIn"],[1,"row"],["skuEditFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest_flag",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],["formControlName","min_payment_amount_flag",1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["formControlName","has_consumable_usage",1,"example-margin"],["min_usage",""],["type","number","formControlName","consumable_usage",1,"form-control",3,"readonly"],["formControlName","has_min_procedure",1,"example-margin"],["min_procedure",""],["type","number","formControlName","min_procedure",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuEditForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["addProductModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"top-info"],[1,"row","form-group","top-info-1"],[1,"col-md-6","info-text"],["type","text",1,"form-control",3,"value","disabled"],[1,"table-div"],[3,"formGroup","ngSubmit"],["header","Rate Details"],["id","sku_rate_datails","formArrayName","addRateDetails",1,"table","table-borderless"],["colspan","3","align","center",1,"td-actions"],["colspan","3",1,"td-actions"],["type","submit","value","Submit",1,"btn","btn-primary",2,"float","right"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],["title","Add SKU Rate Details",1,"fa","fa-plus"],[1,"fa","fa-trash"],[2,"width","45%"],["formControlName","details_tenure","size","1","type","number",1,"form-control"],["formControlName","details_interest_rate","size","1","type","number","step","0.1",1,"form-control"]],template:function(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",0),_.Wb(1,"div",1,2),_.Wb(3,"div",3),_.Wb(4,"div",4),_.Wb(5,"div",5),_.Wb(6,"div",6),_.Wb(7,"h2"),_.Pc(8,"Edit FPS SKU Management"),_.Vb(),_.Vb(),_.Rb(9,"hr"),_.Wb(10,"form",7),_.gc("ngSubmit",function(){return e.onSave()}),_.Wb(11,"div",8),_.Wb(12,"label",9),_.Pc(13," FPS SKU No "),_.Wb(14,"span",10),_.Pc(15," * "),_.Vb(),_.Vb(),_.Wb(16,"div",11),_.Rb(17,"input",12),_.Rb(18,"app-form-error-presentation",13),_.Vb(),_.Wb(19,"label",9),_.Pc(20," Validity Start Date"),_.Wb(21,"span",10),_.Pc(22," * "),_.Vb(),_.Vb(),_.Wb(23,"div",11),_.Rb(24,"p-calendar",14),_.Vb(),_.Vb(),_.Wb(25,"div",8),_.Wb(26,"label",9),_.Pc(27," FPS Type "),_.Wb(28,"span",10),_.Pc(29," * "),_.Vb(),_.Vb(),_.Wb(30,"div",11),_.Rb(31,"p-dropdown",15),_.Rb(32,"app-form-error-presentation",16),_.Vb(),_.Wb(33,"label",9),_.Pc(34," Validity End Date "),_.Vb(),_.Wb(35,"div",11),_.Rb(36,"p-calendar",17),_.Vb(),_.Vb(),_.Wb(37,"div",8),_.Wb(38,"label",9),_.Pc(39," Country"),_.Wb(40,"span",10),_.Pc(41," * "),_.Vb(),_.Vb(),_.Wb(42,"div",11),_.Wb(43,"p-dropdown",18),_.gc("onChange",function(){return e.countryChange()}),_.Vb(),_.Rb(44,"app-form-error-presentation",19),_.Vb(),_.Wb(45,"label",9),_.Pc(46," Interest "),_.Vb(),_.Wb(47,"div",11),_.Wb(48,"div",8),_.Wb(49,"div",20),_.Rb(50,"mat-slide-toggle",21,22),_.Vb(),_.Wb(52,"div",23),_.Nc(53,gt,1,0,"input",24),_.Rb(54,"app-form-error-presentation",25),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(55,"div",8),_.Wb(56,"label",9),_.Pc(57," Financial Instititue"),_.Wb(58,"span",10),_.Pc(59," * "),_.Vb(),_.Vb(),_.Wb(60,"div",11),_.Rb(61,"p-dropdown",26),_.Rb(62,"app-form-error-presentation",27),_.Vb(),_.Vb(),_.Wb(63,"div",8),_.Wb(64,"label",9),_.Pc(65," Payment Frequency "),_.Vb(),_.Wb(66,"div",11),_.Wb(67,"div",28),_.Wb(68,"div",29),_.Rb(69,"p-checkbox",30),_.Wb(70,"label",31),_.Pc(71,"Monthly"),_.Vb(),_.Vb(),_.Wb(72,"div",29),_.Rb(73,"p-checkbox",32),_.Wb(74,"label",33),_.Pc(75,"Quarterly"),_.Vb(),_.Vb(),_.Wb(76,"div",29),_.Rb(77,"p-checkbox",34),_.Wb(78,"label",35),_.Pc(79,"Half-Yearly"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(80,"label",9),_.Pc(81," Mininumum Payment Amount "),_.Vb(),_.Wb(82,"div",11),_.Rb(83,"input",36),_.Vb(),_.Vb(),_.Wb(84,"div",8),_.Wb(85,"div",37),_.Wb(86,"div",8),_.Wb(87,"label",38),_.Pc(88," Mininumum Payment Amount "),_.Vb(),_.Wb(89,"div",11),_.Rb(90,"mat-slide-toggle",39,40),_.Vb(),_.Vb(),_.Vb(),_.Wb(92,"div",37),_.Wb(93,"div",8),_.Wb(94,"label",41),_.Pc(95," Min Payment Amount Currency "),_.Vb(),_.Wb(96,"div",42),_.Rb(97,"p-dropdown",43),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(98,"div",8),_.Wb(99,"div",37),_.Wb(100,"div",8),_.Wb(101,"label",38),_.Pc(102," Consumable Usage "),_.Wb(103,"span",10),_.Pc(104," * "),_.Vb(),_.Vb(),_.Wb(105,"div",11),_.Rb(106,"mat-slide-toggle",44,45),_.Vb(),_.Vb(),_.Vb(),_.Wb(108,"label",9),_.Pc(109," Minimum Usage"),_.Wb(110,"span",10),_.Pc(111," * "),_.Vb(),_.Vb(),_.Wb(112,"div",11),_.Rb(113,"input",46),_.Vb(),_.Vb(),_.Wb(114,"div",8),_.Wb(115,"div",37),_.Wb(116,"div",8),_.Wb(117,"label",38),_.Pc(118," Procedure Per Month"),_.Wb(119,"span",10),_.Pc(120," * "),_.Vb(),_.Vb(),_.Wb(121,"div",11),_.Rb(122,"mat-slide-toggle",47,48),_.Vb(),_.Vb(),_.Vb(),_.Wb(124,"label",9),_.Pc(125," Minimum Procedure"),_.Wb(126,"span",10),_.Pc(127," * "),_.Vb(),_.Vb(),_.Wb(128,"div",11),_.Rb(129,"input",49),_.Vb(),_.Vb(),_.Wb(130,"div",8),_.Wb(131,"div",37),_.Wb(132,"div",8),_.Wb(133,"label",38),_.Pc(134," Agreement Number Mandatory"),_.Wb(135,"span",10),_.Pc(136," * "),_.Vb(),_.Vb(),_.Wb(137,"div",11),_.Rb(138,"mat-slide-toggle",50),_.Vb(),_.Vb(),_.Vb(),_.Wb(139,"label",9),_.Pc(140," Required Tenure"),_.Wb(141,"span",10),_.Pc(142," * "),_.Vb(),_.Vb(),_.Wb(143,"div",11),_.Rb(144,"p-inputNumber",51),_.Rb(145,"app-form-error-presentation",52),_.Vb(),_.Vb(),_.Wb(146,"div",8),_.Rb(147,"div",37),_.Wb(148,"label",9),_.Pc(149," List of Document Required "),_.Vb(),_.Wb(150,"div",11),_.Rb(151,"textarea",53),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(152,"br"),_.Wb(153,"div",54),_.Wb(154,"form",55),_.Wb(155,"p-accordion",56),_.Wb(156,"p-accordionTab",57),_.Wb(157,"div",1),_.Wb(158,"table",58),_.Wb(159,"thead"),_.Wb(160,"tr"),_.Wb(161,"th"),_.Pc(162,"Rate No"),_.Vb(),_.Wb(163,"th"),_.Pc(164,"Validity Start Date"),_.Vb(),_.Wb(165,"th"),_.Pc(166,"Validity End Date"),_.Vb(),_.Wb(167,"th"),_.Pc(168,"Status"),_.Vb(),_.Wb(169,"th"),_.Pc(170,"Type"),_.Vb(),_.Rb(171,"th"),_.Vb(),_.Vb(),_.Wb(172,"tbody"),_.Nc(173,yt,17,3,"tr",59),_.Vb(),_.Wb(174,"tfoot",60),_.Wb(175,"tr"),_.Wb(176,"td",61),_.Wb(177,"a",62),_.gc("click",function(){return e.addAddRates()}),_.Rb(178,"i",63),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(179,"div",54),_.Wb(180,"div",64),_.Wb(181,"button",65),_.gc("click",function(){return e.cancelSkuForm()}),_.Pc(182," CANCEL"),_.Vb(),_.Wb(183,"button",66),_.Pc(184,"Save"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(185,"div",67,68),_.Wb(187,"div",69),_.Wb(188,"div",70),_.Wb(189,"div",71),_.Wb(190,"h4",72),_.Pc(191,"Success"),_.Vb(),_.Vb(),_.Wb(192,"div",73),_.Wb(193,"p"),_.Pc(194),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(195,"div",74,75),_.Wb(197,"div",76),_.Wb(198,"div",70),_.Wb(199,"div",71),_.Wb(200,"h4",72),_.Pc(201,"Error"),_.Vb(),_.Vb(),_.Wb(202,"div",73),_.Wb(203,"p"),_.Pc(204),_.Vb(),_.Vb(),_.Rb(205,"div",77),_.Vb(),_.Vb(),_.Vb(),_.Wb(206,"div",74,78),_.Wb(208,"div",79),_.Wb(209,"div",70),_.Wb(210,"div",71),_.Wb(211,"h4",72),_.Pc(212,"FPS SKU Rate Details"),_.Vb(),_.Wb(213,"button",80),_.gc("click",function(){return _.Fc(t),_.Dc(207).hide()}),_.Wb(214,"span",81),_.Pc(215,"\xd7"),_.Vb(),_.Vb(),_.Vb(),_.Wb(216,"div",73),_.Wb(217,"div",82),_.Wb(218,"div",83),_.Wb(219,"div",84),_.Pc(220,"Rate No."),_.Vb(),_.Wb(221,"div",37),_.Rb(222,"input",85),_.Vb(),_.Vb(),_.Wb(223,"div",83),_.Wb(224,"div",84),_.Pc(225,"Validity Start"),_.Vb(),_.Wb(226,"div",37),_.Rb(227,"input",85),_.Vb(),_.Vb(),_.Wb(228,"div",83),_.Wb(229,"div",84),_.Pc(230,"Validity End"),_.Vb(),_.Wb(231,"div",37),_.Rb(232,"input",85),_.Vb(),_.Vb(),_.Wb(233,"div",83),_.Wb(234,"div",84),_.Pc(235,"Type"),_.Vb(),_.Wb(236,"div",37),_.Rb(237,"input",85),_.Vb(),_.Vb(),_.Vb(),_.Rb(238,"hr"),_.Wb(239,"div",86),_.Wb(240,"form",87),_.gc("ngSubmit",function(){return e.onSaveRateDetails()}),_.Wb(241,"p-accordion",56),_.Wb(242,"p-accordionTab",88),_.Wb(243,"div",1),_.Wb(244,"table",89),_.Wb(245,"thead"),_.Wb(246,"tr"),_.Wb(247,"th"),_.Pc(248,"Tenure"),_.Vb(),_.Wb(249,"th"),_.Pc(250,"Interest Rate"),_.Vb(),_.Vb(),_.Vb(),_.Wb(251,"tbody"),_.Nc(252,vt,8,1,"tr",59),_.Vb(),_.Wb(253,"tfoot",60),_.Wb(254,"tr"),_.Wb(255,"td",90),_.Wb(256,"a",62),_.gc("click",function(){return e.addAddRateDetails()}),_.Rb(257,"i",63),_.Vb(),_.Vb(),_.Vb(),_.Wb(258,"tr"),_.Wb(259,"td",91),_.Rb(260,"input",92),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(261,"hr"),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=_.Dc(51),o=_.Dc(91),r=_.Dc(107),a=_.Dc(123);_.Db(10),_.rc("formGroup",e.skuEditForm),_.Db(7),_.rc("readonly",!0),_.Db(1),_.rc("displayError",e.isFieldValid("uuid")),_.Db(6),_.rc("showTime",!1),_.Db(7),_.rc("options",e.fpsTypeList),_.Db(1),_.rc("displayError",e.isFieldValid("package_type_id")),_.Db(4),_.rc("showTime",!1),_.Db(7),_.rc("options",e.countryList),_.Db(1),_.rc("displayError",e.isFieldValid("country_code")),_.Db(9),_.rc("ngIf",t.checked),_.Db(1),_.rc("displayError",e.isFieldValid("interest_rate")),_.Db(7),_.rc("options",e.institutions_list),_.Db(1),_.rc("displayError",e.isFieldValid("financier_id")),_.Db(7),_.rc("binary",!0),_.Db(4),_.rc("binary",!0),_.Db(4),_.rc("binary",!0),_.Db(6),_.rc("readonly",!o.checked),_.Db(14),_.rc("disabled",!o.checked)("options",e.currencies_list),_.Db(16),_.rc("readonly",!r.checked),_.Db(16),_.rc("readonly",!a.checked),_.Db(16),_.rc("displayError",e.isFieldValid("required_tenure")),_.Db(9),_.rc("formGroup",e.rateAddForm),_.Db(1),_.rc("multiple",!0),_.Db(18),_.rc("ngForOf",e.addRates().controls),_.Db(21),_.Qc(e.alertBody),_.Db(10),_.Qc(e.alertBody),_.Db(18),_.rc("value",e.currentRateNo)("disabled",!0),_.Db(5),_.rc("value",e.currentRateStart)("disabled",!0),_.Db(5),_.rc("value",e.currentRateEnd)("disabled",!0),_.Db(5),_.rc("value",e.currentRateType)("disabled",!0),_.Db(3),_.rc("formGroup",e.rateDatailAddForm),_.Db(1),_.rc("multiple",!0),_.Db(11),_.rc("ngForOf",e.addRateDetails().controls)}},directives:[d.z,d.q,d.j,d.c,d.p,d.h,P,tt.a,V.a,s.a,r.p,et.a,d.u,ot.a,rt.a,rt.c,d.d,r.o,b.f,b.e,i.a,d.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),t})();const Wt=["successModal"],Pt=["dangerModal"],Ct=["foundModal"],Mt=["fpsEditFormContainer"];function kt(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",76),_.Wb(1,"td",77),_.Rb(2,"input",78),_.Vb(),_.Wb(3,"td",77),_.Rb(4,"input",79),_.Vb(),_.Wb(5,"td",80),_.Rb(6,"p-dropdown",81),_.Vb(),_.Wb(7,"td",77),_.Rb(8,"input",82),_.Vb(),_.Wb(9,"td",83),_.Wb(10,"a",84),_.Rb(11,"i",85),_.Vb(),_.Pc(12," \xa0 "),_.Wb(13,"a",86),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc(2).removeAddMinProcedure(o)}),_.Rb(14,"i",87),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc(2);_.rc("formGroupName",t),_.Db(6),_.rc("options",o.fps_user_list)}}function Ft(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",25),_.Wb(2,"div",66),_.Wb(3,"h2"),_.Pc(4,"Procedure Usage "),_.Vb(),_.Vb(),_.Wb(5,"div",67),_.Wb(6,"label",68),_.Pc(7," Minimum Procedure "),_.Vb(),_.Vb(),_.Wb(8,"div",11),_.Rb(9,"input",69),_.Vb(),_.Vb(),_.Wb(10,"div",52),_.Wb(11,"form",70),_.Wb(12,"div",2),_.Wb(13,"table",71),_.Wb(14,"thead"),_.Wb(15,"tr"),_.Wb(16,"th"),_.Pc(17,"Date"),_.Vb(),_.Wb(18,"th"),_.Pc(19,"No. Of Procedure"),_.Vb(),_.Wb(20,"th"),_.Pc(21,"Updated By"),_.Vb(),_.Wb(22,"th"),_.Pc(23,"Updated On"),_.Vb(),_.Rb(24,"th"),_.Vb(),_.Vb(),_.Wb(25,"tbody"),_.Nc(26,kt,15,2,"tr",72),_.Vb(),_.Wb(27,"tfoot",73),_.Wb(28,"tr"),_.Wb(29,"td",74),_.Wb(30,"i",75),_.gc("click",function(){return _.Fc(t),_.kc().addAddMinProcedure()}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=_.kc();_.Db(9),_.rc("readonly",!0),_.Db(2),_.rc("formGroup",t.minProcedureAddForm),_.Db(15),_.rc("ngForOf",t.addMinProcedure().controls)}}function wt(t,e){if(1&t){const t=_.Xb();_.Wb(0,"tr",76),_.Wb(1,"td",77),_.Rb(2,"input",78),_.Vb(),_.Wb(3,"td",77),_.Rb(4,"input",90),_.Vb(),_.Wb(5,"td",80),_.Rb(6,"p-dropdown",81),_.Vb(),_.Wb(7,"td",77),_.Rb(8,"input",82),_.Vb(),_.Wb(9,"td",83),_.Wb(10,"a",84),_.Rb(11,"i",85),_.Vb(),_.Pc(12," \xa0 "),_.Wb(13,"a",86),_.gc("click",function(){_.Fc(t);const o=e.index;return _.kc(2).removeAddMinUsage(o)}),_.Rb(14,"i",87),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=e.index,o=_.kc(2);_.rc("formGroupName",t),_.Db(6),_.rc("options",o.fps_user_list)}}function Ot(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",7),_.Wb(1,"div",25),_.Wb(2,"div",66),_.Wb(3,"h2"),_.Pc(4,"Consumable Usage "),_.Vb(),_.Vb(),_.Wb(5,"div",67),_.Wb(6,"label",68),_.Pc(7," Minimum Usage "),_.Vb(),_.Vb(),_.Wb(8,"div",11),_.Rb(9,"input",88),_.Vb(),_.Vb(),_.Wb(10,"div",52),_.Wb(11,"form",70),_.Wb(12,"div",2),_.Wb(13,"table",89),_.Wb(14,"thead"),_.Wb(15,"tr"),_.Wb(16,"th"),_.Pc(17,"Date"),_.Vb(),_.Wb(18,"th"),_.Pc(19,"Usage"),_.Vb(),_.Wb(20,"th"),_.Pc(21,"Updated By"),_.Vb(),_.Wb(22,"th"),_.Pc(23,"Updated On"),_.Vb(),_.Rb(24,"th"),_.Vb(),_.Vb(),_.Wb(25,"tbody"),_.Nc(26,wt,15,2,"tr",72),_.Vb(),_.Wb(27,"tfoot",73),_.Wb(28,"tr"),_.Wb(29,"td",74),_.Wb(30,"i",75),_.gc("click",function(){return _.Fc(t),_.kc().addAddMinUsage()}),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb()}if(2&t){const t=_.kc();_.Db(9),_.rc("readonly",!0),_.Db(2),_.rc("formGroup",t.minUsageAddForm),_.Db(15),_.rc("ngForOf",t.addMinUsage().controls)}}const Rt=[{path:"fps-listing",component:c.a},{path:"fps-create",component:A},{path:":id/fps-edit",component:(()=>{class t{constructor(t,e,o,r,a,n,i,d,s){this.fb=t,this.fpsService=e,this.appService=o,this.institutionService=r,this.zone=a,this.dialogService=n,this.route=i,this.currencyService=d,this.router=s,this.agreement_mandatory=!1,this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!1,this.has_min_procedure=!1,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList()}get form_controls(){return this.fpsEditForm.controls}ngOnInit(){this.route.paramMap.subscribe(t=>{t.get("id")&&(this.fpsID=t.get("id"))}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.fpsEditForm=this.fb.group({fps_no:new d.f("",[d.y.required]),fps_opportunity_id:new d.f,fps_quote_id:new d.f,fps_customer_name:new d.f,fps_soci_uuid:new d.f,fps_transaction_type_id:new d.f(1,[d.y.min(1)]),fps_financier_id:new d.f("",[d.y.required,d.y.min(1)]),fps_payment_frequency:new d.f("",[d.y.required]),fps_status_id:new d.f(1,[d.y.min(1)]),fps_tenure_id:new d.f("",[d.y.required]),fps_adv_payment:new d.f("0"),fps_adv_payment_percentage:new d.f("0"),fps_net_financing_amount:new d.f("0"),fps_monthly_payment_amount:new d.f,fps_interest_rate:new d.f,fps_validated_by:new d.f,fps_approved_by:new d.f,fps_leas_aggr_no:new d.f("0"),fps_internal_aggr_no:new d.f,fps_remarks:new d.f,fps_currency_code:new d.f,fps_total_financial_amount:new d.f,fps_min_payment_amount:new d.f,fps_required_docs:new d.f,fps_data_area_id:new d.f,fps_consumable_usage:new d.f,fps_min_procedure:new d.f}),this.route.queryParams.subscribe(t=>{this.current_apportunity_id=t.opport_id,this.fpsEditForm.controls.fps_opportunity_id.setValue(this.current_apportunity_id),this.current_quot_id=t.quot_id,this.fpsEditForm.controls.fps_quote_id.setValue(this.current_quot_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(t=>{this.oppt_details=t.data,this.fpsEditForm.controls.fps_currency_code.setValue(this.oppt_details.currency_code),this.fpsEditForm.controls.fps_total_financial_amount.setValue(this.oppt_details.amount),this.fpsEditForm.controls.fps_data_area_id.setValue(this.oppt_details.customer.data_area_id),this.loadUsers(),this.currencyService.getCountryCodeFromCurrency(this.oppt_details.currency_code).subscribe({next:t=>{t.success&&this.zone.run(()=>{this.countryCode=t.data.iso3,this.loadFpsDetails()})}})})}onSave(){if(!this.fpsEditForm.valid)return this.fpsService.validateAllFormFields(this.fpsEditForm),void this.fpsEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.updateFps({fps_no:this.fpsEditForm.get("fps_no").value+"",fps_opportunity_id:this.fpsEditForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsEditForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsEditForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsEditForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsEditForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsEditForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsEditForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsEditForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsEditForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsEditForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsEditForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsEditForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsEditForm.get("fps_status_id").value+"",fps_validated_by:this.fpsEditForm.get("fps_validated_by").value,fps_approved_by:this.fpsEditForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsEditForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsEditForm.get("fps_remarks").value+"",fps_required_docs:this.fpsEditForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsEditForm.get("fps_data_area_id").value+""},this.fpsID).subscribe(t=>{if(t.id){let e=this.minProcedureAddForm.value.addMinProcedure,o=[];for(let n=0;n<e.length;n++)o.push(e[n].id),this.fpsService.storeMinProcedure({id:e[n].id,fps_id:t.id,date:e[n].date,no_procedure:e[n].no_procedure,updated_by:e[n].updated_by,updated_on:e[n].updated_on});this.fpsService.minProcedureCheckSum({activeProcedureIDs:o,fps_id:t.id}).subscribe();let r=this.minUsageAddForm.value.addMinUsage,a=[];for(let n=0;n<r.length;n++)a.push(r[n].id),this.fpsService.storeMinUsage({id:r[n].id,fps_id:t.id,date:r[n].date,usage:r[n].usage,updated_by:r[n].updated_by,updated_on:r[n].updated_on});this.fpsService.minUsageCheckSum({activeUsageIDs:a,fps_id:t.id}).subscribe(),this.alertBody="FPS updated successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide()},2e3),this.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})}},t=>{console.log(t),this.alertBody="The FPS can't save",this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)})}onChangeAdvancePayment(){let t=this.fpsEditForm.controls.fps_total_financial_amount.value;this.fpsEditForm.controls.fps_net_financing_amount.setValue(t-t/100*this.fpsEditForm.controls.fps_adv_payment_percentage.value)}updateInterestRate(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsEditForm.controls.fps_tenure_id.value);e.length>1&&(this.fpsEditForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsEditForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsEditForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsEditForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsEditForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment())}updateMontlyPayment(){let t=parseFloat(this.fpsEditForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsEditForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsEditForm.controls.fps_tenure_id.value);this.fpsEditForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}updateTenure(){this.countryCode.length>0&&this.loadFinancialInstitutions();let t=this.fpsEditForm.controls.fps_financier_id.value,e=this.fpsEditForm.controls.fps_payment_frequency.value,o=this.fpsEditForm.controls.fps_transaction_type_id.value;o&&t&&e&&this.fpsService.getTenureList(o,t,e).subscribe(t=>{t.unshift(t.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),this.tenure_list=t,this.updateInterestRate()},t=>{console.log(t)})}loadFinancialInstitutions(){this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:t=>{t.success?this.zone.run(()=>{this.institutions_list=t.data.institutions}):this.dialogService.showErrorDialog(t.message)},error:t=>{this.dialogService.showErrorDialog(null!=t.error.message?t.error.message:"Error retrieve institutions list")}})}getFilteredCodes(t,e,o){return t.filter(function(t){return t[e]==o})}isFieldValid(t){return!this.fpsEditForm.get(t).valid&&this.fpsEditForm.get(t).touched}loadUsers(){this.fpsService.getUsersList().subscribe(t=>{this.fps_user_list=t.data})}loadFpsDetails(){this.fpsService.find(this.fpsID).subscribe(t=>{this.updateTenure(),this.fpsEditForm.patchValue(t.data),t.data.min_procedures.forEach(t=>{this.has_min_procedure=!0,this.addMinProcedure().push(this.existingMinProcedure(t))}),t.data.min_usages.forEach(t=>{this.has_consumable_usage=!0,this.addMinUsage().push(this.existingMinUsage(t))}),this.updateTenure()})}addMinProcedure(){return this.minProcedureAddForm.get("addMinProcedure")}newMinProcedure(){return this.fb.group({id:"",date:"",no_procedure:12,updated_by:1,updated_on:""})}addAddMinProcedure(){this.addMinProcedure().push(this.newMinProcedure())}removeAddMinProcedure(t){this.addMinProcedure().removeAt(t)}existingMinProcedure(t){return this.fb.group({id:t.id,date:t.date,no_procedure:t.no_procedure,updated_by:t.updated_by,updated_on:t.updated_on})}addMinUsage(){return this.minUsageAddForm.get("addMinUsage")}newMinUsage(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}addAddMinUsage(){this.addMinUsage().push(this.newMinUsage())}removeAddMinUsage(t){this.addMinUsage().removeAt(t)}existingMinUsage(t){return this.fb.group({id:t.id,date:t.date,usage:t.usage,updated_by:t.updated_by,updated_on:t.updated_on})}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(d.e),_.Qb(u.a),_.Qb(h),_.Qb(y),_.Qb(_.A),_.Qb(p.a),_.Qb(b.a),_.Qb(v),_.Qb(b.c))},t.\u0275cmp=_.Kb({type:t,selectors:[["app-edit"]],viewQuery:function(t,e){if(1&t&&(_.Uc(Wt,1),_.Uc(Pt,1),_.Uc(Ct,1),_.Uc(Mt,1)),2&t){let t;_.Cc(t=_.hc())&&(e.successModal=t.first),_.Cc(t=_.hc())&&(e.dangerModal=t.first),_.Cc(t=_.hc())&&(e.foundModal=t.first),_.Cc(t=_.hc())&&(e.fpsEditFormContainerRef=t.first)}},features:[_.Cb([h])],decls:199,vars:24,consts:[[1,"animated","fadeIn"],["id","fpsEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["fpsEditFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment",1,"form-control"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"custom-footer","d-flex","justify-content-center"],["type","submit","form","fpsEditForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"]],template:function(t,e){1&t&&(_.Wb(0,"div",0),_.Wb(1,"form",1),_.gc("ngSubmit",function(){return e.onSave()}),_.Wb(2,"div",2),_.Wb(3,"div",3),_.Wb(4,"div",4),_.Wb(5,"div",5),_.Wb(6,"div",6),_.Pc(7,"Edit FPS Request Form"),_.Vb(),_.Vb(),_.Wb(8,"div",7),_.Wb(9,"div",8),_.Wb(10,"div",9),_.Wb(11,"div",10),_.Wb(12,"div",2),_.Wb(13,"div",11),_.Wb(14,"div",12),_.Wb(15,"h3",13),_.Pc(16),_.Vb(),_.Vb(),_.Vb(),_.Wb(17,"div",14),_.Wb(18,"div",12),_.Wb(19,"label",13),_.Pc(20,"FPS Request No."),_.Vb(),_.Wb(21,"div",15),_.Pc(22),_.Vb(),_.Wb(23,"span"),_.Rb(24,"input",16),_.Vb(),_.Vb(),_.Vb(),_.Wb(25,"div",11),_.Wb(26,"div",12),_.Wb(27,"label",13),_.Pc(28,"Transaction Type"),_.Vb(),_.Wb(29,"p-dropdown",17),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(30,"div",11),_.Wb(31,"div",12),_.Wb(32,"label",13),_.Pc(33,"Status"),_.Vb(),_.Rb(34,"p-dropdown",18),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(35,"div",19),_.Wb(36,"div",2),_.Wb(37,"div",11),_.Wb(38,"div",12),_.Wb(39,"label",13),_.Pc(40,"Created Date"),_.Vb(),_.Wb(41,"div"),_.Pc(42),_.lc(43,"date"),_.Vb(),_.Vb(),_.Vb(),_.Wb(44,"div",11),_.Wb(45,"div",12),_.Wb(46,"label",13),_.Pc(47,"Opportunity ID "),_.Vb(),_.Wb(48,"div"),_.Pc(49),_.Rb(50,"input",20),_.Rb(51,"input",21),_.Vb(),_.Vb(),_.Vb(),_.Wb(52,"div",11),_.Wb(53,"div",12),_.Wb(54,"label",13),_.Pc(55,"Quote ID (Version)"),_.Vb(),_.Wb(56,"div"),_.Pc(57," ... "),_.Vb(),_.Vb(),_.Vb(),_.Wb(58,"div",11),_.Wb(59,"div",12),_.Wb(60,"label",13),_.Pc(61,"SOCI No."),_.Vb(),_.Wb(62,"div"),_.Pc(63," ... "),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(64,"div",2,22),_.Wb(66,"div",23),_.Wb(67,"div",4),_.Wb(68,"div",7),_.Wb(69,"div",24),_.Wb(70,"h2"),_.Pc(71,"General"),_.Vb(),_.Vb(),_.Wb(72,"div",25),_.Wb(73,"label",26),_.Pc(74," Payment Frequency"),_.Wb(75,"span",27),_.Pc(76," * "),_.Vb(),_.Vb(),_.Wb(77,"div",28),_.Wb(78,"p-dropdown",29),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Rb(79,"app-form-error-presentation",30),_.Vb(),_.Wb(80,"label",26),_.Pc(81," Tenure "),_.Vb(),_.Wb(82,"div",28),_.Wb(83,"p-dropdown",31),_.gc("onChange",function(){return e.updateInterestRate()}),_.Vb(),_.Rb(84,"app-form-error-presentation",32),_.Vb(),_.Vb(),_.Wb(85,"div",25),_.Wb(86,"label",26),_.Pc(87," Financial Instititue"),_.Wb(88,"span",27),_.Pc(89," * "),_.Vb(),_.Vb(),_.Wb(90,"div",28),_.Wb(91,"p-dropdown",33),_.gc("onChange",function(){return e.updateTenure()}),_.Vb(),_.Rb(92,"app-form-error-presentation",34),_.Vb(),_.Wb(93,"label",26),_.Pc(94," Interest % "),_.Vb(),_.Wb(95,"div",28),_.Wb(96,"input",35),_.gc("change",function(){return e.updateMontlyPayment()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(97,"div",25),_.Wb(98,"label",26),_.Pc(99," Currency"),_.Wb(100,"span",27),_.Pc(101," * "),_.Vb(),_.Vb(),_.Wb(102,"div",28),_.Rb(103,"input",36),_.Vb(),_.Wb(104,"label",26),_.Pc(105," Monthly Payment Amount "),_.Vb(),_.Wb(106,"div",28),_.Rb(107,"input",37),_.Vb(),_.Vb(),_.Wb(108,"div",25),_.Wb(109,"label",26),_.Pc(110," Total Financial Amount"),_.Wb(111,"span",27),_.Pc(112," * "),_.Vb(),_.Vb(),_.Wb(113,"div",28),_.Rb(114,"input",38),_.Vb(),_.Wb(115,"label",26),_.Pc(116," Min Payment Amount "),_.Vb(),_.Wb(117,"div",28),_.Rb(118,"input",39),_.Vb(),_.Vb(),_.Wb(119,"div",25),_.Wb(120,"div",40),_.Wb(121,"div",25),_.Wb(122,"label",41),_.Pc(123," Advance Payment (%) "),_.Vb(),_.Wb(124,"div",42),_.Wb(125,"input",43),_.gc("change",function(){return e.onChangeAdvancePayment()}),_.Vb(),_.Vb(),_.Vb(),_.Wb(126,"div",25),_.Wb(127,"label",41),_.Pc(128," Advance Payment "),_.Vb(),_.Wb(129,"div",42),_.Rb(130,"input",44),_.Vb(),_.Vb(),_.Wb(131,"div",25),_.Wb(132,"label",41),_.Pc(133," Net Financing Amount "),_.Vb(),_.Wb(134,"div",42),_.Rb(135,"input",45),_.Vb(),_.Vb(),_.Vb(),_.Wb(136,"div",40),_.Wb(137,"div",25),_.Wb(138,"label",41),_.Pc(139," Remark "),_.Vb(),_.Wb(140,"div",42),_.Rb(141,"textarea",46),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(142,"hr"),_.Wb(143,"div",25),_.Wb(144,"label",26),_.Pc(145," Validated By "),_.Vb(),_.Wb(146,"div",28),_.Rb(147,"p-dropdown",47),_.Vb(),_.Wb(148,"label",26),_.Pc(149," Argeement No. "),_.Vb(),_.Wb(150,"div",28),_.Rb(151,"input",48),_.Vb(),_.Vb(),_.Wb(152,"div",25),_.Wb(153,"div",40),_.Wb(154,"div",25),_.Wb(155,"label",41),_.Pc(156," Approved By "),_.Vb(),_.Wb(157,"div",42),_.Rb(158,"p-dropdown",49),_.Vb(),_.Vb(),_.Vb(),_.Wb(159,"div",40),_.Wb(160,"div",25),_.Wb(161,"label",41),_.Pc(162," Required Documents "),_.Vb(),_.Wb(163,"div",42),_.Rb(164,"textarea",50),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(165,"hr"),_.Nc(166,Ft,31,3,"div",51),_.Nc(167,Ot,31,3,"div",51),_.Wb(168,"div",52),_.Wb(169,"div",53),_.Wb(170,"button",54),_.Pc(171,"Save"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rb(172,"br"),_.Wb(173,"div",52),_.Wb(174,"h3"),_.Pc(175,"File Library"),_.Vb(),_.Wb(176,"p"),_.Pc(177,"Work on this section will be done later"),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(178,"div",55,56),_.Wb(180,"div",57),_.Wb(181,"div",58),_.Wb(182,"div",59),_.Wb(183,"h4",60),_.Pc(184,"Success"),_.Vb(),_.Vb(),_.Wb(185,"div",61),_.Wb(186,"p"),_.Pc(187),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Wb(188,"div",62,63),_.Wb(190,"div",64),_.Wb(191,"div",58),_.Wb(192,"div",59),_.Wb(193,"h4",60),_.Pc(194,"Error"),_.Vb(),_.Vb(),_.Wb(195,"div",61),_.Wb(196,"p"),_.Pc(197),_.Vb(),_.Vb(),_.Rb(198,"div",65),_.Vb(),_.Vb(),_.Vb()),2&t&&(_.Db(1),_.rc("formGroup",e.fpsEditForm),_.Db(15),_.Rc(" ",e.oppt_details.customer.company_name," "),_.Db(6),_.Qc(e.form_controls.fps_no.value),_.Db(7),_.rc("options",e.fpsTypeList),_.Db(5),_.rc("options",e.fpsStatusList),_.Db(8),_.Rc(" ",_.nc(43,21,e.oppt_details.created_at,"dd-MMM-yyyy")," "),_.Db(7),_.Rc(" ",e.current_apportunity_id," "),_.Db(29),_.rc("options",e.payment_frequency_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_payment_frequency")),_.Db(4),_.rc("options",e.tenure_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_tenure_id")),_.Db(7),_.rc("options",e.institutions_list),_.Db(1),_.rc("displayError",e.isFieldValid("fps_financier_id")),_.Db(11),_.rc("readonly",!0),_.Db(44),_.rc("options",e.fps_user_list),_.Db(4),_.rc("readonly",9!=e.fpsEditForm.controls.fps_status_id.value),_.Db(7),_.rc("options",e.fps_user_list),_.Db(8),_.rc("ngIf",e.has_min_procedure),_.Db(1),_.rc("ngIf",e.has_consumable_usage),_.Db(20),_.Qc(e.alertBody),_.Db(10),_.Qc(e.alertBody))},directives:[d.z,d.q,d.j,d.c,d.p,d.h,V.a,P,d.u,r.p,i.a,d.d,r.o,d.k,b.f,b.e],pipes:[r.f],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),t})()},{path:"sku-listing",component:J},{path:"sku-create",component:ct},{path:"sku-edit",component:ct},{path:":id/sku-edit",component:Vt},{path:"**",redirectTo:"fps-listing"}];let St=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.Ob({type:t}),t.\u0275inj=_.Nb({imports:[[b.g.forChild(Rt)],b.g]}),t})(),At=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.Ob({type:t}),t.\u0275inj=_.Nb({imports:[[r.c,St,l.g,d.l,d.v,i.b,n.b,a.a,s.b]]}),t})()}}]);