!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{LFMZ:function(e,n,r){"use strict";r.r(n),r.d(n,"FpsModule",function(){return Kt});var a,i,d,s=r("SVse"),l=r("Wcfd"),c=r("rVqu"),b=r("LqlI"),p=r("s7LF"),u=r("jMqV"),m=r("ZRSf"),f=r("iInd"),_=r("tUjy"),g=r("hLZb"),h=r("EE25"),y=r("IheW"),v=r("AytR"),V=r("8Y7J"),W=((a=function(){function e(o){t(this,e),this.httpClient=o,this.apiURL=v.b.apiBaseUrl,this.httpOptions={headers:new y.e({"Content-Type":"application/json"})}}return o(e,[{key:"getQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t;return null!=e&&(o+="?page_items="+e),this.httpClient.get(this.apiURL+o,this.httpOptions)}},{key:"postQuery",value:function(t,e){return this.httpClient.post(this.apiURL+t,JSON.stringify(e),this.httpOptions)}}]),e}()).\u0275fac=function(t){return new(t||a)(V.dc(y.b))},a.\u0275prov=V.Mb({token:a,factory:a.\u0275fac}),a),P=r("Hva9"),C=((d=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getFinancialInstition",value:function(t){return this.httpClient.get(P.a.apiBaseUrl+"/institutions-list/"+t).pipe()}},{key:"getSkuAutoGeneratedKey",value:function(){return this.httpClient.get(P.a.apiBaseUrl+"/get-last-fps-sku-id").pipe()}},{key:"getFPSAutoGeneratedKey",value:function(){return this.httpClient.get(P.a.apiBaseUrl+"/get-last-fps-id").pipe()}}]),e}()).\u0275fac=function(t){return new(t||d)(V.dc(y.b))},d.\u0275prov=V.Mb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),M=((i=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getCurrencyList",value:function(t){return this.httpClient.get(P.a.apiBaseUrl+"/currencies-list/?countryCode="+t).pipe()}},{key:"getCountryCodeFromCurrency",value:function(t){return this.httpClient.get(P.a.apiBaseUrl+"/convert-currency-to-country/?currency_code="+t).pipe()}}]),e}()).\u0275fac=function(t){return new(t||i)(V.dc(y.b))},i.\u0275prov=V.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),k=r("y1st");function F(t,e){if(1&t&&(V.Wb(0,"div"),V.Rb(1,"span",1),V.Wb(2,"span",2),V.Pc(3,"(error)"),V.Vb(),V.Wb(4,"div",3),V.Pc(5),V.Vb(),V.Vb()),2&t){var o=V.kc();V.Db(5),V.Rc(" ",o.errorMsg," ")}}var w,O=((w=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||w)},w.\u0275cmp=V.Kb({type:w,selectors:[["app-form-error-presentation"]],inputs:{errorMsg:"errorMsg",displayError:"displayError"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"glyphicon","glyphicon-remove","form-control-feedback","fix-error-icon"],[1,"sr-only"],[1,"error-msg"]],template:function(t,e){1&t&&V.Nc(0,F,6,1,"div",0),2&t&&V.rc("ngIf",e.displayError)},directives:[s.p],styles:[".error-msg[_ngcontent-%COMP%]{color:#ff1814}.fix-error-icon[_ngcontent-%COMP%]{top:27px}"]}),w),R=["successModal"],S=["dangerModal"],A=["foundModal"],D=["fpsAddFormContainer"];function x(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",77),V.Wb(1,"td",78),V.Rb(2,"input",79),V.Vb(),V.Wb(3,"td",78),V.Rb(4,"input",80),V.Vb(),V.Wb(5,"td",81),V.Rb(6,"p-dropdown",82),V.Vb(),V.Wb(7,"td",78),V.Rb(8,"input",83),V.Vb(),V.Wb(9,"td",84),V.Wb(10,"a",85),V.Rb(11,"i",86),V.Vb(),V.Pc(12," \xa0 "),V.Wb(13,"a",87),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinProcedure(t)}),V.Rb(14,"i",88),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",r.fps_user_list)}}function N(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",26),V.Wb(2,"div",67),V.Wb(3,"h2"),V.Pc(4,"Procedure Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",68),V.Wb(6,"label",69),V.Pc(7," Minimum Procedure "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",70),V.Vb(),V.Vb(),V.Wb(10,"div",53),V.Wb(11,"form",71),V.Wb(12,"div",2),V.Wb(13,"table",72),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Pc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Pc(19,"No. Of Procedure"),V.Vb(),V.Wb(20,"th"),V.Pc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Pc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Nc(26,x,15,2,"tr",73),V.Vb(),V.Wb(27,"tfoot",74),V.Wb(28,"tr"),V.Wb(29,"td",75),V.Wb(30,"i",76),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinProcedure()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minProcedureAddForm),V.Db(15),V.rc("ngForOf",n.addMinProcedure().controls)}}function E(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",77),V.Wb(1,"td",78),V.Rb(2,"input",79),V.Vb(),V.Wb(3,"td",78),V.Rb(4,"input",91),V.Vb(),V.Wb(5,"td",81),V.Rb(6,"p-dropdown",82),V.Vb(),V.Wb(7,"td",78),V.Rb(8,"input",83),V.Vb(),V.Wb(9,"td",84),V.Wb(10,"a",85),V.Rb(11,"i",86),V.Vb(),V.Pc(12," \xa0 "),V.Wb(13,"a",87),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinUsage(t)}),V.Rb(14,"i",88),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",r.fps_user_list)}}function q(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",26),V.Wb(2,"div",67),V.Wb(3,"h2"),V.Pc(4,"Consumable Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",68),V.Wb(6,"label",69),V.Pc(7," Minimum Usage "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",89),V.Vb(),V.Vb(),V.Wb(10,"div",53),V.Wb(11,"form",71),V.Wb(12,"div",2),V.Wb(13,"table",90),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Pc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Pc(19,"Usage"),V.Vb(),V.Wb(20,"th"),V.Pc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Pc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Nc(26,E,15,2,"tr",73),V.Vb(),V.Wb(27,"tfoot",74),V.Wb(28,"tr"),V.Wb(29,"td",75),V.Wb(30,"i",76),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinUsage()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minUsageAddForm),V.Db(15),V.rc("ngForOf",n.addMinUsage().controls)}}var U,L,T=((U=function(){function e(o,n,r,a,i,d,s,l,c){t(this,e),this.fb=o,this.fpsService=n,this.appService=r,this.institutionService=a,this.zone=i,this.dialogService=d,this.activatedRoute=s,this.currencyService=l,this.router=c,this.agreement_mandatory=!1,this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!0,this.has_min_procedure=!0,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList()}return o(e,[{key:"form_controls",get:function(){return this.fpsAddForm.controls}},{key:"ngOnInit",value:function(){var t=this;this.fpsAddForm=this.fb.group({fps_no:new p.f("",[p.y.required]),fps_opportunity_id:new p.f,fps_quote_id:new p.f,fps_customer_name:new p.f,fps_soci_uuid:new p.f,fps_transaction_type_id:new p.f(1,[p.y.min(1)]),fps_financier_id:new p.f("",[p.y.required,p.y.min(1)]),fps_payment_frequency:new p.f("",[p.y.required]),fps_status_id:new p.f(1,[p.y.min(1)]),fps_tenure_id:new p.f("",[p.y.required]),fps_adv_payment:new p.f("0"),fps_adv_payment_percentage:new p.f("0"),fps_net_financing_amount:new p.f("0"),fps_monthly_payment_amount:new p.f,fps_interest_rate:new p.f,fps_validated_by:new p.f,fps_approved_by:new p.f,fps_leas_aggr_no:new p.f("0"),fps_internal_aggr_no:new p.f,fps_remarks:new p.f,fps_currency_code:new p.f,fps_total_financial_amount:new p.f,fps_min_payment_amount:new p.f,fps_required_docs:new p.f,fps_data_area_id:new p.f,fps_consumable_usage:new p.f,fps_min_procedure:new p.f}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.activatedRoute.queryParams.subscribe(function(e){t.current_apportunity_id=e.opport_id,t.current_quot_id=e.quot_id,t.fpsAddForm.controls.fps_quote_id.setValue(t.current_quot_id),t.fpsAddForm.controls.fps_opportunity_id.setValue(t.current_apportunity_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(function(e){t.oppt_details=e.data,t.fpsAddForm.controls.fps_currency_code.setValue(t.oppt_details.currency_code),t.fpsAddForm.controls.fps_total_financial_amount.setValue(t.oppt_details.amount),t.fpsAddForm.controls.fps_data_area_id.setValue(t.oppt_details.customer.data_area_id),t.currencyService.getCountryCodeFromCurrency(t.oppt_details.currency_code).subscribe({next:function(e){e.success&&t.zone.run(function(){t.countryCode=e.data.iso3})}})}),this.fpsService.getUsersList().subscribe(function(e){t.fps_user_list=e.data}),this.institutionService.getFPSAutoGeneratedKey().subscribe({next:function(e){e.success?t.zone.run(function(){t.fpsAddForm.controls.fps_no.setValue("FPS"+(e.data[0].id+1)+"-"+t.oppt_details.opportunity_code)}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"onSave",value:function(){var t=this;if(!this.fpsAddForm.valid)return this.fpsService.validateAllFormFields(this.fpsAddForm),void this.fpsAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.saveFps({fps_no:this.fpsAddForm.get("fps_no").value+"",fps_opportunity_id:this.fpsAddForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsAddForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsAddForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsAddForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsAddForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsAddForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsAddForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsAddForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsAddForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsAddForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsAddForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsAddForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsAddForm.get("fps_status_id").value+"",fps_validated_by:this.fpsAddForm.get("fps_validated_by").value,fps_approved_by:this.fpsAddForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsAddForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsAddForm.get("fps_remarks").value+"",fps_required_docs:this.fpsAddForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsAddForm.get("fps_data_area_id").value+""}).subscribe(function(e){if(e.id){for(var o=t.minProcedureAddForm.value.addMinProcedure,n=0;n<o.length;n++)t.fpsService.storeMinProcedure({id:null,fps_id:e.id,date:o[n].date,no_procedure:o[n].no_procedure,updated_by:o[n].updated_by,updated_on:o[n].updated_on});for(var r=t.minUsageAddForm.value.addMinUsage,a=0;a<r.length;a++)t.fpsService.storeMinUsage({id:null,fps_id:e.id,date:r[a].date,usage:r[a].usage,updated_by:r[a].updated_by,updated_on:r[a].updated_on});t.alertBody="FPS saved successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})},2e3)}},function(e){console.log(e),t.alertBody="The FPS can't save",t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onChangeAdvancePayment",value:function(){var t=this.fpsAddForm.controls.fps_total_financial_amount.value;this.fpsAddForm.controls.fps_net_financing_amount.setValue(t-t/100*this.fpsAddForm.controls.fps_adv_payment_percentage.value)}},{key:"updateInterestRate",value:function(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsAddForm.controls.fps_adv_payment.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsAddForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsAddForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment()}},{key:"updateMontlyPayment",value:function(){var t=parseFloat(this.fpsAddForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsAddForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}},{key:"updateTenure",value:function(){var t=this;this.loadFinancialInstitutions();var e=this.fpsAddForm.controls.fps_financier_id.value,o=this.fpsAddForm.controls.fps_payment_frequency.value,n=this.fpsAddForm.controls.fps_transaction_type_id.value;n&&e&&o&&this.fpsService.getTenureList(n,e,o).subscribe(function(e){e.unshift(e.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),t.tenure_list=e},function(t){console.log(t)})}},{key:"loadFinancialInstitutions",value:function(){var t=this;this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getFilteredCodes",value:function(t,e,o){return t.filter(function(t){return t[e]==o})}},{key:"isFieldValid",value:function(t){return!this.fpsAddForm.get(t).valid&&this.fpsAddForm.get(t).touched}},{key:"addMinProcedure",value:function(){return this.minProcedureAddForm.get("addMinProcedure")}},{key:"newMinProcedure",value:function(){return this.fb.group({date:"",no_procedure:12,updated_by:1,updated_on:""})}},{key:"addAddMinProcedure",value:function(){this.addMinProcedure().push(this.newMinProcedure())}},{key:"removeAddMinProcedure",value:function(t){this.addMinProcedure().removeAt(t)}},{key:"addMinUsage",value:function(){return this.minUsageAddForm.get("addMinUsage")}},{key:"newMinUsage",value:function(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}},{key:"addAddMinUsage",value:function(){this.addMinUsage().push(this.newMinUsage())}},{key:"removeAddMinUsage",value:function(t){this.addMinUsage().removeAt(t)}}]),e}()).\u0275fac=function(t){return new(t||U)(V.Qb(p.e),V.Qb(h.a),V.Qb(W),V.Qb(C),V.Qb(V.A),V.Qb(g.a),V.Qb(f.a),V.Qb(M),V.Qb(f.c))},U.\u0275cmp=V.Kb({type:U,selectors:[["app-create"]],viewQuery:function(t,e){var o;1&t&&(V.Uc(R,1),V.Uc(S,1),V.Uc(A,1),V.Uc(D,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.fpsAddFormContainerRef=o.first))},features:[V.Cb([W])],decls:200,vars:25,consts:[[1,"animated","fadeIn"],["id","fpsAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["type","hidden","formControlName","fps_quote_id",1,"form-control"],["fpsAddFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment",1,"form-control"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"custom-footer","d-flex","justify-content-center"],["type","submit","form","fpsAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"form",1),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Pc(7,"Create FPS Request Form"),V.Vb(),V.Vb(),V.Wb(8,"div",7),V.Wb(9,"div",8),V.Wb(10,"div",9),V.Wb(11,"div",10),V.Wb(12,"div",2),V.Wb(13,"div",11),V.Wb(14,"div",12),V.Wb(15,"h3",13),V.Pc(16),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",14),V.Wb(18,"div",12),V.Wb(19,"label",13),V.Pc(20,"FPS Request No."),V.Vb(),V.Wb(21,"div",15),V.Pc(22),V.Vb(),V.Wb(23,"span"),V.Rb(24,"input",16),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",11),V.Wb(26,"div",12),V.Wb(27,"label",13),V.Pc(28,"Transaction Type"),V.Vb(),V.Wb(29,"p-dropdown",17),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Wb(31,"div",12),V.Wb(32,"label",13),V.Pc(33,"Status"),V.Vb(),V.Rb(34,"p-dropdown",18),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(35,"div",19),V.Wb(36,"div",2),V.Wb(37,"div",11),V.Wb(38,"div",12),V.Wb(39,"label",13),V.Pc(40,"Created Date"),V.Vb(),V.Wb(41,"div"),V.Pc(42),V.lc(43,"date"),V.Vb(),V.Vb(),V.Vb(),V.Wb(44,"div",11),V.Wb(45,"div",12),V.Wb(46,"label",13),V.Pc(47,"Opportunity ID "),V.Vb(),V.Wb(48,"div"),V.Pc(49),V.Rb(50,"input",20),V.Rb(51,"input",21),V.Vb(),V.Vb(),V.Vb(),V.Wb(52,"div",11),V.Wb(53,"div",12),V.Wb(54,"label",13),V.Pc(55,"Quote ID (Version)"),V.Vb(),V.Wb(56,"div"),V.Pc(57),V.Rb(58,"input",22),V.Vb(),V.Vb(),V.Vb(),V.Wb(59,"div",11),V.Wb(60,"div",12),V.Wb(61,"label",13),V.Pc(62,"SOCI No."),V.Vb(),V.Wb(63,"div"),V.Pc(64," ... "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(65,"div",2,23),V.Wb(67,"div",24),V.Wb(68,"div",4),V.Wb(69,"div",7),V.Wb(70,"div",25),V.Wb(71,"h2"),V.Pc(72,"General"),V.Vb(),V.Vb(),V.Wb(73,"div",26),V.Wb(74,"label",27),V.Pc(75," Payment Frequency"),V.Wb(76,"span",28),V.Pc(77," * "),V.Vb(),V.Vb(),V.Wb(78,"div",29),V.Wb(79,"p-dropdown",30),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(80,"app-form-error-presentation",31),V.Vb(),V.Wb(81,"label",27),V.Pc(82," Tenure "),V.Vb(),V.Wb(83,"div",29),V.Wb(84,"p-dropdown",32),V.gc("onChange",function(){return e.updateInterestRate()}),V.Vb(),V.Rb(85,"app-form-error-presentation",33),V.Vb(),V.Vb(),V.Wb(86,"div",26),V.Wb(87,"label",27),V.Pc(88," Financial Instititue"),V.Wb(89,"span",28),V.Pc(90," * "),V.Vb(),V.Vb(),V.Wb(91,"div",29),V.Wb(92,"p-dropdown",34),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(93,"app-form-error-presentation",35),V.Vb(),V.Wb(94,"label",27),V.Pc(95," Interest % "),V.Vb(),V.Wb(96,"div",29),V.Wb(97,"input",36),V.gc("change",function(){return e.updateMontlyPayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",26),V.Wb(99,"label",27),V.Pc(100," Currency"),V.Wb(101,"span",28),V.Pc(102," * "),V.Vb(),V.Vb(),V.Wb(103,"div",29),V.Rb(104,"input",37),V.Vb(),V.Wb(105,"label",27),V.Pc(106," Monthly Payment Amount "),V.Vb(),V.Wb(107,"div",29),V.Rb(108,"input",38),V.Vb(),V.Vb(),V.Wb(109,"div",26),V.Wb(110,"label",27),V.Pc(111," Total Financial Amount"),V.Wb(112,"span",28),V.Pc(113," * "),V.Vb(),V.Vb(),V.Wb(114,"div",29),V.Rb(115,"input",39),V.Vb(),V.Wb(116,"label",27),V.Pc(117," Min Payment Amount "),V.Vb(),V.Wb(118,"div",29),V.Rb(119,"input",40),V.Vb(),V.Vb(),V.Wb(120,"div",26),V.Wb(121,"div",41),V.Wb(122,"div",26),V.Wb(123,"label",42),V.Pc(124," Advance Payment (%) "),V.Vb(),V.Wb(125,"div",43),V.Wb(126,"input",44),V.gc("change",function(){return e.onChangeAdvancePayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(127,"div",26),V.Wb(128,"label",42),V.Pc(129," Advance Payment "),V.Vb(),V.Wb(130,"div",43),V.Rb(131,"input",45),V.Vb(),V.Vb(),V.Wb(132,"div",26),V.Wb(133,"label",42),V.Pc(134," Net Financing Amount "),V.Vb(),V.Wb(135,"div",43),V.Rb(136,"input",46),V.Vb(),V.Vb(),V.Vb(),V.Wb(137,"div",41),V.Wb(138,"div",26),V.Wb(139,"label",42),V.Pc(140," Remark "),V.Vb(),V.Wb(141,"div",43),V.Rb(142,"textarea",47),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(143,"hr"),V.Wb(144,"div",26),V.Wb(145,"label",27),V.Pc(146," Validated By "),V.Vb(),V.Wb(147,"div",29),V.Rb(148,"p-dropdown",48),V.Vb(),V.Wb(149,"label",27),V.Pc(150," Argeement No. "),V.Vb(),V.Wb(151,"div",29),V.Rb(152,"input",49),V.Vb(),V.Vb(),V.Wb(153,"div",26),V.Wb(154,"div",41),V.Wb(155,"div",26),V.Wb(156,"label",42),V.Pc(157," Approved By "),V.Vb(),V.Wb(158,"div",43),V.Rb(159,"p-dropdown",50),V.Vb(),V.Vb(),V.Vb(),V.Wb(160,"div",41),V.Wb(161,"div",26),V.Wb(162,"label",42),V.Pc(163," Required Documents "),V.Vb(),V.Wb(164,"div",43),V.Rb(165,"textarea",51),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(166,"hr"),V.Nc(167,N,31,3,"div",52),V.Nc(168,q,31,3,"div",52),V.Wb(169,"div",53),V.Wb(170,"div",54),V.Wb(171,"button",55),V.Pc(172,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(173,"br"),V.Wb(174,"div",53),V.Wb(175,"h3"),V.Pc(176,"File Library"),V.Vb(),V.Wb(177,"p"),V.Pc(178,"Work on this section will be done later"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(179,"div",56,57),V.Wb(181,"div",58),V.Wb(182,"div",59),V.Wb(183,"div",60),V.Wb(184,"h4",61),V.Pc(185,"Success"),V.Vb(),V.Vb(),V.Wb(186,"div",62),V.Wb(187,"p"),V.Pc(188),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(189,"div",63,64),V.Wb(191,"div",65),V.Wb(192,"div",59),V.Wb(193,"div",60),V.Wb(194,"h4",61),V.Pc(195,"Error"),V.Vb(),V.Vb(),V.Wb(196,"div",62),V.Wb(197,"p"),V.Pc(198),V.Vb(),V.Vb(),V.Rb(199,"div",66),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.Db(1),V.rc("formGroup",e.fpsAddForm),V.Db(15),V.Rc(" ",e.oppt_details.customer.company_name," "),V.Db(6),V.Qc(e.form_controls.fps_no.value),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(5),V.rc("options",e.fpsStatusList),V.Db(8),V.Rc(" ",V.nc(43,22,e.oppt_details.created_at,"dd-MMM-yyyy")," "),V.Db(7),V.Rc(" ",e.current_apportunity_id," "),V.Db(8),V.Rc(" ",e.current_quot_id," "),V.Db(22),V.rc("options",e.payment_frequency_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_payment_frequency")),V.Db(4),V.rc("options",e.tenure_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_tenure_id")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_financier_id")),V.Db(11),V.rc("readonly",!0),V.Db(44),V.rc("options",e.fps_user_list),V.Db(4),V.rc("readonly",9!=e.fpsAddForm.controls.fps_status_id.value),V.Db(7),V.rc("options",e.fps_user_list),V.Db(8),V.rc("ngIf",e.has_min_procedure),V.Db(1),V.rc("ngIf",e.has_consumable_usage),V.Db(20),V.Qc(e.alertBody),V.Db(10),V.Qc(e.alertBody))},directives:[p.z,p.q,p.j,p.c,p.p,p.h,k.a,O,p.u,s.p,b.a,p.d,s.o,p.k,f.f,f.e],pipes:[s.f],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),U),I=r("1Hbi"),Q=((L=function(){function e(o,n){t(this,e),this.apiClient=o,this.httpClient=n,this.apiURL=v.b.apiBaseUrl,this.httpOptions={headers:new y.e({"Content-Type":"application/json"})}}return o(e,[{key:"getList",value:function(t,e,o){var n="sku?page_items="+t+"&search_text="+e;return o&&null!=o.field&&(n+="&field="+o.field+"&order="+o.order),this.apiClient.get(n)}},{key:"getPage",value:function(t,e,o){return this.httpClient.get(t+"&page_items="+e+"&search_text="+o,this.httpOptions)}},{key:"saveSku",value:function(t){return this.apiClient.post("sku/createDraft",t)}},{key:"updateSku",value:function(t,e){return this.apiClient.post("sku/update/"+e,t)}},{key:"updateSkuPaymentMethod",value:function(t){return this.apiClient.post("sku/UpdatePaymentMethod",t)}},{key:"saveRates",value:function(t){return this.apiClient.post("rate/store",t)}},{key:"saveRateDetails",value:function(t){return this.apiClient.post("rateDetails/store",t)}},{key:"checksumRates",value:function(t){return this.apiClient.post("rate/checksum",t)}},{key:"find",value:function(t){return this.httpClient.get(this.apiURL+"/sku-details/"+t).pipe()}},{key:"loadRateDetails",value:function(t){return this.httpClient.get(this.apiURL+"/rate-details/"+t).pipe()}}]),e}()).\u0275fac=function(t){return new(t||L)(V.dc(I.a),V.dc(y.b))},L.\u0275prov=V.Mb({token:L,factory:L.\u0275fac,providedIn:"root"}),L),z=r("1G5W"),G=r("XNiG"),B=r("hhfa"),j=r("MY3+"),K=r("gtx6"),X=["successModal"],H=["dangerModal"],$=["foundModal"];function Y(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",13),V.Wb(1,"div",14),V.Wb(2,"div"),V.Pc(3,"FPS SKU Listing"),V.Vb(),V.Wb(4,"div",15),V.Wb(5,"a",16),V.Rb(6,"i",17),V.Vb(),V.Vb(),V.Vb(),V.Wb(7,"div"),V.Wb(8,"span",18),V.Rb(9,"i",19),V.Wb(10,"input",20),V.gc("input",function(){return V.Fc(o),V.kc().getAll()})("ngModelChange",function(t){return V.Fc(o),V.kc().search_text=t}),V.Vb(),V.Vb(),V.Rb(11,"img",21),V.Rb(12,"img",22),V.Rb(13,"img",23),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(10),V.rc("ngModel",n.search_text)}}function J(t,e){if(1&t&&(V.Wb(0,"th",25),V.Wb(1,"div",26),V.Pc(2),V.Vb(),V.Vb()),2&t){var o=e.$implicit;V.sc("pSortableColumn",o.field),V.Db(2),V.Rc(" ",o.header," ")}}var Z=function(){return{width:"5%"}};function tt(t,e){if(1&t&&(V.Wb(0,"tr"),V.Nc(1,J,3,2,"th",24),V.Rb(2,"th"),V.Vb()),2&t){var o=e.$implicit;V.Db(1),V.rc("ngForOf",o),V.Db(1),V.Jc(V.uc(3,Z))}}var et=function(t){return["/fps/",t,"sku-edit"]};function ot(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",27),V.Wb(1,"td",28),V.Wb(2,"span",29),V.Pc(3,"FPS SKU No"),V.Vb(),V.Pc(4),V.Vb(),V.Wb(5,"td",28),V.Wb(6,"span",29),V.Pc(7,"FPS Type"),V.Vb(),V.Pc(8),V.Vb(),V.Wb(9,"td",28),V.Wb(10,"span",29),V.Pc(11,"Financial Instititue"),V.Vb(),V.Pc(12),V.Vb(),V.Wb(13,"td",28),V.Wb(14,"span",29),V.Pc(15,"Validity Start Date"),V.Vb(),V.Pc(16),V.lc(17,"date"),V.Vb(),V.Wb(18,"td",28),V.Wb(19,"span",29),V.Pc(20,"Validity End Date"),V.Vb(),V.Pc(21),V.lc(22,"date"),V.Vb(),V.Wb(23,"td",28),V.Wb(24,"span",29),V.Pc(25,"Tenure"),V.Vb(),V.Pc(26),V.Vb(),V.Wb(27,"td",28),V.Wb(28,"span",29),V.Pc(29,"Rate"),V.Vb(),V.Pc(30),V.Vb(),V.Wb(31,"td",28),V.Wb(32,"span",29),V.Pc(33,"Monthly"),V.Vb(),V.Wb(34,"mat-slide-toggle",30),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("monthly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(35,"td",28),V.Wb(36,"span",29),V.Pc(37,"Quarterly"),V.Vb(),V.Wb(38,"mat-slide-toggle",31),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("quarterly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(39,"td",28),V.Wb(40,"span",29),V.Pc(41,"Half-Yearly"),V.Vb(),V.Wb(42,"mat-slide-toggle",32),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("half_yearly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(43,"td",28),V.Wb(44,"span",29),V.Pc(45,"Min Usage"),V.Vb(),V.Pc(46),V.Vb(),V.Wb(47,"td",28),V.Wb(48,"span",29),V.Pc(49,"Min Procedure"),V.Vb(),V.Pc(50),V.Vb(),V.Wb(51,"td",28),V.Rb(52,"span",29),V.Rb(53,"a",33),V.Vb(),V.Vb()}if(2&t){var n=e.$implicit,r=V.kc();V.Db(4),V.Rc(" ",n.uuid," "),V.Db(4),V.Rc(" ",r.showFPSType(n.package_type_id)," "),V.Db(4),V.Rc(" ",n.financial_institution.title," "),V.Db(4),V.Rc(" ",V.nc(17,13,n.validity_start_at,"dd-MMM-yyyy")," "),V.Db(5),V.Rc(" ",V.nc(22,16,n.validity_end_at,"dd-MMM-yyyy")," "),V.Db(5),V.Rc(" ",n.required_tenure," "),V.Db(4),V.Rc(" ",n.interest_rate," "),V.Db(4),V.rc("checked",1==n.monthly_payment),V.Db(4),V.rc("checked",1==n.quarterly_payment),V.Db(4),V.rc("checked",1==n.half_yearly_payment),V.Db(4),V.Rc(" ",n.consumable_usage," "),V.Db(4),V.Rc(" ",n.min_procedure," "),V.Db(3),V.rc("routerLink",V.vc(19,et,n.id))}}var nt,rt,at=function(){return["quote_id","company","amount","status"]},it=function(){return{showAll:"All"}},dt=function(t){return[10,25,50,t]},st=((rt=function(){function e(o,n,r,a){t(this,e),this.skuService=o,this.dialogService=n,this.zone=r,this.fpsService=a,this.ngUnsubscribe=new G.a,this.search_text="",this.pageItems=10,this.columns=[{header:"FPS SKU No",field:"uuid",type:"string"},{header:"FPS Type",field:"",type:"text"},{header:"Financial Instititue",field:"",type:"text"},{header:"Validity Start Date",field:"validity_start_at",type:"date"},{header:"Validity End Date",field:"validity_end_at",type:"date"},{header:"Tenure",field:"required_tenure",type:"number"},{header:"Rate",field:"interest_rate",type:"decimal"},{header:"Monthly",field:"monthly_payment",type:"boolean"},{header:"Quarterly",field:"quarterly_payment",type:"boolean"},{header:"Half-Yearly",field:"half_yearly_payment",type:"boolean"},{header:"Min Usage",field:"min_usage",type:"number"},{header:"Min Procedure",field:"procedure_per_month",type:"number"}],this.fpsTypeList=this.fpsService.getTransSactionTypeList()}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.skuService.getList(this.pageItems,this.search_text,this.sort).subscribe({next:function(e){e.data.length&&t.zone.run(function(){t.skuList=e.data,t.pages=e.links,t.totalRecords=e.total})},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getAll",value:function(){}},{key:"showFPSType",value:function(t){return this.fpsTypeList.find(function(e){return e.id==t}).title}},{key:"paginate",value:function(t){this.pageItems=t.rows,this.onClick(parseInt(t.page)+1)}},{key:"onClick",value:function(t){var e=this;this.skuService.getPage(this.pages[t].url,this.pageItems,this.search_text).pipe(Object(z.a)(this.ngUnsubscribe)).subscribe(function(t){e.zone.run(function(){e.skuList=t.data.data,e.pages=t.data.links,e.totalRecords=t.data.total})})}},{key:"updatePaymentMethod",value:function(t,e){var o=this;this.skuService.updateSkuPaymentMethod({id:e,field:t}).subscribe({next:function(t){200==t.code&&(o.alertBody="Payment Method Updated.",o.successModal.show(),setTimeout(function(){o.successModal.hide()},2e3))},error:function(t){o.dialogService.showErrorDialog("Payment Method Can't be Updated!<br>"+t)}})}}]),e}()).\u0275fac=function(t){return new(t||rt)(V.Qb(Q),V.Qb(g.a),V.Qb(V.A),V.Qb(h.a))},rt.\u0275cmp=V.Kb({type:rt,selectors:[["app-sku-index"]],viewQuery:function(t,e){var o;1&t&&(V.Uc(X,1),V.Uc(H,1),V.Uc($,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first))},decls:16,vars:14,consts:[["styleClass","p-datatable-customers","responsiveLayout","scroll",1,"table","table-hover","table-striped",3,"value","rowHover","reorderableColumns","filterDelay","globalFilterFields","columns"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","totalRecords","rowsPerPageOptions","onPageChange"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"table-header"],[1,"d-flex"],[1,"ml-2","mt-1"],["routerLink","/fps/sku-create","routerLinkActive","router-link-active"],[1,"icon-plus","icons",2,"color","#ffffff"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Global Search",3,"ngModel","input","ngModelChange"],["src","../../../../assets/img/icons/Vector (2).svg",2,"width","22px","margin","0px 8px 0px 0px"],["src","../../../../assets/img/icons/Vector (1).svg",2,"width","22px"],["src","../../../../assets/img/icons/vertcalLines.svg",2,"width","22px","margin","7px"],["class","text-center","pReorderableColumn","",3,"pSortableColumn",4,"ngFor","ngForOf"],["pReorderableColumn","",1,"text-center",3,"pSortableColumn"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"p-selectable-row"],[1,"text-center"],[1,"p-column-title"],["name","monthly_payment",1,"example-margin",3,"checked","change"],["name","quarterly_payment",1,"example-margin",3,"checked","change"],["name","half_yearly_payment",1,"example-margin",3,"checked","change"],["href","#",1,"fa","fa-edit",3,"routerLink"]],template:function(t,e){1&t&&(V.Wb(0,"p-table",0,1),V.Nc(2,Y,14,1,"ng-template",2),V.Nc(3,tt,3,4,"ng-template",3),V.Nc(4,ot,54,21,"ng-template",4),V.Vb(),V.Wb(5,"p-paginator",5),V.gc("onPageChange",function(t){return e.paginate(t)}),V.Vb(),V.Wb(6,"div",6,7),V.Wb(8,"div",8),V.Wb(9,"div",9),V.Wb(10,"div",10),V.Wb(11,"h4",11),V.Pc(12,"Success"),V.Vb(),V.Vb(),V.Wb(13,"div",12),V.Wb(14,"p"),V.Pc(15),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.rc("value",e.skuList)("rowHover",!0)("reorderableColumns",!0)("filterDelay",0)("globalFilterFields",V.uc(10,at))("columns",e.columns),V.Db(5),V.rc("rows",e.pageItems)("totalRecords",e.totalRecords)("rowsPerPageOptions",V.vc(12,dt,V.uc(11,it))),V.Db(10),V.Qc(e.alertBody))},directives:[m.f,B.h,j.a,b.a,f.f,f.e,p.c,K.a,p.p,p.s,s.o,m.b,m.e,u.a],pipes:[s.f],styles:["","tr[_ngcontent-%COMP%]{border:hidden}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{vertical-align:middle}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th>div.p-d-flex{word-break:normal}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto;padding:.25em}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:unset}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;color:#000;font-size:17px;margin-right:5px}.icon-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),rt),lt=((nt=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getCountry",value:function(){return this.httpClient.get(P.a.apiBaseUrl+"/countries-list").pipe()}}]),e}()).\u0275fac=function(t){return new(t||nt)(V.dc(y.b))},nt.\u0275prov=V.Mb({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt),ct=r("7vha"),bt=r("+yXi"),pt=r("FjU+"),ut=r("KnEf"),mt=["successModal"],ft=["dangerModal"],_t=["foundModal"],gt=["submitSkuAdd"],ht=["skuAddFormContainer"];function yt(t,e){1&t&&V.Rb(0,"input",76)}function vt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",77),V.Wb(1,"td",78),V.Rb(2,"input",79),V.Vb(),V.Wb(3,"td",78),V.Rb(4,"input",80),V.Vb(),V.Wb(5,"td",81),V.Rb(6,"input",82),V.Vb(),V.Wb(7,"td",83),V.Rb(8,"p-dropdown",84),V.Vb(),V.Wb(9,"td",78),V.Rb(10,"p-dropdown",85),V.Vb(),V.Wb(11,"td",86),V.Wb(12,"a",87),V.Rb(13,"i",88),V.Vb(),V.Pc(14," \xa0 "),V.Wb(15,"a",60),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRates(t)}),V.Rb(16,"i",89),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc();V.rc("formGroupName",n),V.Db(8),V.rc("options",r.rateStatusList),V.Db(2),V.rc("options",r.rateTypeOptions)}}var Vt,Wt=((Vt=function(){function e(o,n,r,a,i,d,s,l,c,b){t(this,e),this.countryService=o,this.currencyService=n,this.institutionService=r,this.dialogService=a,this.zone=i,this.fb=d,this.SkuService=s,this.datePipe=l,this.router=c,this.fpsService=b,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.skuAddForm=this.fb.group({uuid:new p.f("",[p.y.required]),validity_start_at:new p.f(new Date),package_type_id:new p.f("1",[p.y.required]),validity_end_at:new p.f(new Date),country_code:new p.f("",[p.y.required]),interest_rate:new p.f,financier_id:new p.f("",[p.y.required]),has_interest:new p.f,monthly_payment:new p.f,quarterly_payment:new p.f,half_yearly_payment:new p.f,currency_code:new p.f,min_payment_amount:new p.f("0"),min_usage:new p.f("0"),consumable_usage:new p.f,procedure_per_month:new p.f,required_tenure:new p.f("0"),required_docs:new p.f,agreement_mandatory:new p.f("0")}),this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.institutionService.getSkuAutoGeneratedKey().subscribe({next:function(e){e.success?t.zone.run(function(){t.skuAddForm.controls.uuid.setValue("FPS-"+(e.data[0].id+1))}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve Auto generated ID.")}}),this.countryService.getCountry().subscribe({next:function(e){e.success?t.zone.run(function(){t.countryList=e.data.countries}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve country list")}}),this.setConditionalValidators()}},{key:"setConditionalValidators",value:function(){var t=this.skuAddForm.get("interest_rate");this.skuAddForm.get("has_interest").valueChanges.subscribe(function(e){1==e?t.setValidators([p.y.required]):t.clearValidators()})}},{key:"onSave",value:function(){var t=this;if(!this.skuAddForm.valid)return this.fpsService.validateAllFormFields(this.skuAddForm),void this.skuAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.saveSku({uuid:this.skuAddForm.get("uuid").value+"",country_code:this.skuAddForm.get("country_code").value+"",financier_id:this.skuAddForm.get("financier_id").value+"",monthly_payment:this.skuAddForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuAddForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuAddForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuAddForm.get("package_type_id").value+"",interest_rate:(this.skuAddForm.get("interest_rate").value?this.skuAddForm.get("interest_rate").value:0)+"",currency_code:this.skuAddForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuAddForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuAddForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuAddForm.get("required_docs").value+"",required_tenure:this.skuAddForm.get("required_tenure").value+"",agreement_mandatory:this.skuAddForm.get("agreement_mandatory").value?1:0,data_area_id:"test_data_rea_id",consumable_usage:this.skuAddForm.get("min_usage").value+"",min_procedure:this.skuAddForm.get("procedure_per_month").value+"",min_payment_amount:this.skuAddForm.get("min_payment_amount").value+""}).subscribe(function(e){if(e.id){for(var o=t.rateAddForm.value.addRates,n=0;n<o.length;n++)t.storeRates({id:o[n].rate_no,financial_package_id:e.id,validity_start_at:o[n].validity_start_at,validity_end_at:o[n].validity_end_at,status:o[n].status,type:o[n].rate_type});t.alertBody="FPS saved successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3)}},function(e){console.log(e),t.alertBody="The FPS can't save <br>"+e,t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"triggerFalseClick",value:function(){this.submitSkuAdd.nativeElement.click()}},{key:"cancelSkuForm",value:function(){this.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})}},{key:"addRates",value:function(){return this.rateAddForm.get("addRates")}},{key:"newAddRates",value:function(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,rate_type:"normal"})}},{key:"addAddRates",value:function(){this.addRates().push(this.newAddRates())}},{key:"removeAddRates",value:function(t){this.addRates().removeAt(t)}},{key:"storeRates",value:function(t){this.SkuService.saveRates(t).subscribe(function(t){t.id&&console.log("Rates Stored successfully.")},function(t){console.log(t)})}},{key:"isFieldValid",value:function(t){return!this.skuAddForm.get(t).valid&&this.skuAddForm.get(t).touched}},{key:"countryChange",value:function(){var t=this;this.countryCode=this.skuAddForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.currencies_list=e.data}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve currencies list")}}),this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}}]),e}()).\u0275fac=function(t){return new(t||Vt)(V.Qb(lt),V.Qb(M),V.Qb(C),V.Qb(g.a),V.Qb(V.A),V.Qb(p.e),V.Qb(Q),V.Qb(s.f),V.Qb(f.c),V.Qb(h.a))},Vt.\u0275cmp=V.Kb({type:Vt,selectors:[["app-sku-create"]],viewQuery:function(t,e){var o;1&t&&(V.Uc(mt,1),V.Uc(ft,1),V.Uc(_t,1),V.Uc(gt,1),V.Uc(ht,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.submitSkuAdd=o.first),V.Cc(o=V.hc())&&(e.skuAddFormContainerRef=o.first))},decls:206,vars:27,consts:[[1,"animated","fadeIn"],[1,"row"],["skuAddFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],[1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["min_usage",""],["type","number","formControlName","min_usage",1,"form-control",3,"readonly"],["min_procedure",""],["type","number","formControlName","procedure_per_month",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","rate_type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],[1,"fa","fa-trash"]],template:function(t,e){if(1&t&&(V.Wb(0,"div",0),V.Wb(1,"div",1,2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Wb(7,"h2"),V.Pc(8,"Create FPS SKU Management"),V.Vb(),V.Vb(),V.Rb(9,"hr"),V.Wb(10,"form",7),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(11,"div",8),V.Wb(12,"label",9),V.Pc(13," FPS SKU No "),V.Wb(14,"span",10),V.Pc(15," * "),V.Vb(),V.Vb(),V.Wb(16,"div",11),V.Rb(17,"input",12),V.Rb(18,"app-form-error-presentation",13),V.Vb(),V.Wb(19,"label",9),V.Pc(20," Validity Start Date"),V.Wb(21,"span",10),V.Pc(22," * "),V.Vb(),V.Vb(),V.Wb(23,"div",11),V.Rb(24,"p-calendar",14),V.Vb(),V.Vb(),V.Wb(25,"div",8),V.Wb(26,"label",9),V.Pc(27," FPS Type "),V.Wb(28,"span",10),V.Pc(29," * "),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Rb(31,"p-dropdown",15),V.Rb(32,"app-form-error-presentation",16),V.Vb(),V.Wb(33,"label",9),V.Pc(34," Validity End Date "),V.Vb(),V.Wb(35,"div",11),V.Rb(36,"p-calendar",17),V.Vb(),V.Vb(),V.Wb(37,"div",8),V.Wb(38,"label",9),V.Pc(39," Country"),V.Wb(40,"span",10),V.Pc(41," * "),V.Vb(),V.Vb(),V.Wb(42,"div",11),V.Wb(43,"p-dropdown",18),V.gc("onChange",function(){return e.countryChange()}),V.Vb(),V.Rb(44,"app-form-error-presentation",19),V.Vb(),V.Wb(45,"label",9),V.Pc(46," Interest "),V.Vb(),V.Wb(47,"div",11),V.Wb(48,"div",8),V.Wb(49,"div",20),V.Rb(50,"mat-slide-toggle",21,22),V.Vb(),V.Wb(52,"div",23),V.Nc(53,yt,1,0,"input",24),V.Rb(54,"app-form-error-presentation",25),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(55,"div",8),V.Wb(56,"label",9),V.Pc(57," Financial Instititue"),V.Wb(58,"span",10),V.Pc(59," * "),V.Vb(),V.Vb(),V.Wb(60,"div",11),V.Rb(61,"p-dropdown",26),V.Rb(62,"app-form-error-presentation",27),V.Vb(),V.Vb(),V.Wb(63,"div",8),V.Wb(64,"label",9),V.Pc(65," Payment Frequency "),V.Vb(),V.Wb(66,"div",11),V.Wb(67,"div",28),V.Wb(68,"div",29),V.Rb(69,"p-checkbox",30),V.Wb(70,"label",31),V.Pc(71,"Monthly"),V.Vb(),V.Vb(),V.Wb(72,"div",29),V.Rb(73,"p-checkbox",32),V.Wb(74,"label",33),V.Pc(75,"Quarterly"),V.Vb(),V.Vb(),V.Wb(76,"div",29),V.Rb(77,"p-checkbox",34),V.Wb(78,"label",35),V.Pc(79,"Half-Yearly"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(80,"label",9),V.Pc(81," Mininumum Payment Amount "),V.Vb(),V.Wb(82,"div",11),V.Rb(83,"input",36),V.Vb(),V.Vb(),V.Wb(84,"div",8),V.Wb(85,"div",37),V.Wb(86,"div",8),V.Wb(87,"label",38),V.Pc(88," Mininumum Payment Amount "),V.Vb(),V.Wb(89,"div",11),V.Rb(90,"mat-slide-toggle",39,40),V.Vb(),V.Vb(),V.Vb(),V.Wb(92,"div",37),V.Wb(93,"div",8),V.Wb(94,"label",41),V.Pc(95," Min Payment Amount Currency "),V.Vb(),V.Wb(96,"div",42),V.Rb(97,"p-dropdown",43),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",8),V.Wb(99,"div",37),V.Wb(100,"div",8),V.Wb(101,"label",38),V.Pc(102," Consumable Usage"),V.Wb(103,"span",10),V.Pc(104," * "),V.Vb(),V.Vb(),V.Wb(105,"div",11),V.Rb(106,"mat-slide-toggle",39,44),V.Vb(),V.Vb(),V.Vb(),V.Wb(108,"label",9),V.Pc(109," Minimum Usage"),V.Wb(110,"span",10),V.Pc(111," * "),V.Vb(),V.Vb(),V.Wb(112,"div",11),V.Rb(113,"input",45),V.Vb(),V.Vb(),V.Wb(114,"div",8),V.Wb(115,"div",37),V.Wb(116,"div",8),V.Wb(117,"label",38),V.Pc(118," Procedure Per Month"),V.Wb(119,"span",10),V.Pc(120," * "),V.Vb(),V.Vb(),V.Wb(121,"div",11),V.Rb(122,"mat-slide-toggle",39,46),V.Vb(),V.Vb(),V.Vb(),V.Wb(124,"label",9),V.Pc(125," Minimum Procedure"),V.Wb(126,"span",10),V.Pc(127," * "),V.Vb(),V.Vb(),V.Wb(128,"div",11),V.Rb(129,"input",47),V.Vb(),V.Vb(),V.Wb(130,"div",8),V.Wb(131,"div",37),V.Wb(132,"div",8),V.Wb(133,"label",38),V.Pc(134," Agreement Number Mandatory"),V.Wb(135,"span",10),V.Pc(136," * "),V.Vb(),V.Vb(),V.Wb(137,"div",11),V.Rb(138,"mat-slide-toggle",48),V.Vb(),V.Vb(),V.Vb(),V.Wb(139,"label",9),V.Pc(140," Required Tenure"),V.Wb(141,"span",10),V.Pc(142," * "),V.Vb(),V.Vb(),V.Wb(143,"div",11),V.Rb(144,"p-inputNumber",49),V.Rb(145,"app-form-error-presentation",50),V.Vb(),V.Vb(),V.Wb(146,"div",8),V.Rb(147,"div",37),V.Wb(148,"label",9),V.Pc(149," List of Document Required "),V.Vb(),V.Wb(150,"div",11),V.Rb(151,"textarea",51),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(152,"br"),V.Wb(153,"div",52),V.Wb(154,"form",53),V.Wb(155,"p-accordion",54),V.Wb(156,"p-accordionTab",55),V.Wb(157,"div",1),V.Wb(158,"table",56),V.Wb(159,"thead"),V.Wb(160,"tr"),V.Wb(161,"th"),V.Pc(162,"Rate No"),V.Vb(),V.Wb(163,"th"),V.Pc(164,"Validity Start Date"),V.Vb(),V.Wb(165,"th"),V.Pc(166,"Validity End Date"),V.Vb(),V.Wb(167,"th"),V.Pc(168,"Status"),V.Vb(),V.Wb(169,"th"),V.Pc(170,"Type"),V.Vb(),V.Rb(171,"th"),V.Vb(),V.Vb(),V.Wb(172,"tbody"),V.Nc(173,vt,17,3,"tr",57),V.Vb(),V.Wb(174,"tfoot",58),V.Wb(175,"tr"),V.Wb(176,"td",59),V.Wb(177,"a",60),V.gc("click",function(){return e.addAddRates()}),V.Rb(178,"i",61),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(179,"div",52),V.Wb(180,"div",62),V.Wb(181,"button",63),V.gc("click",function(){return e.cancelSkuForm()}),V.Pc(182," CANCEL"),V.Vb(),V.Wb(183,"button",64),V.Pc(184,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(185,"div",65,66),V.Wb(187,"div",67),V.Wb(188,"div",68),V.Wb(189,"div",69),V.Wb(190,"h4",70),V.Pc(191,"Success"),V.Vb(),V.Vb(),V.Wb(192,"div",71),V.Wb(193,"p"),V.Pc(194),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(195,"div",72,73),V.Wb(197,"div",74),V.Wb(198,"div",68),V.Wb(199,"div",69),V.Wb(200,"h4",70),V.Pc(201,"Error"),V.Vb(),V.Vb(),V.Wb(202,"div",71),V.Wb(203,"p"),V.Pc(204),V.Vb(),V.Vb(),V.Rb(205,"div",75),V.Vb(),V.Vb(),V.Vb()),2&t){var o=V.Dc(51),n=V.Dc(91),r=V.Dc(107),a=V.Dc(123);V.Db(10),V.rc("formGroup",e.skuAddForm),V.Db(7),V.rc("readonly",!0),V.Db(1),V.rc("displayError",e.isFieldValid("uuid")),V.Db(6),V.rc("showTime",!1),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(1),V.rc("displayError",e.isFieldValid("package_type_id")),V.Db(4),V.rc("showTime",!1),V.Db(7),V.rc("options",e.countryList),V.Db(1),V.rc("displayError",e.isFieldValid("country_code")),V.Db(9),V.rc("ngIf",o.checked),V.Db(1),V.rc("displayError",e.isFieldValid("interest_rate")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("financier_id")),V.Db(7),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(6),V.rc("readonly",!n.checked),V.Db(14),V.rc("disabled",!n.checked)("options",e.currencies_list),V.Db(16),V.rc("readonly",!r.checked),V.Db(16),V.rc("readonly",!a.checked),V.Db(16),V.rc("displayError",e.isFieldValid("required_tenure")),V.Db(9),V.rc("formGroup",e.rateAddForm),V.Db(1),V.rc("multiple",!0),V.Db(18),V.rc("ngForOf",e.addRates().controls),V.Db(21),V.Qc(e.alertBody),V.Db(10),V.Qc(e.alertBody)}},directives:[p.z,p.q,p.j,p.c,p.p,p.h,O,ct.a,k.a,u.a,s.p,bt.a,p.u,pt.a,ut.a,ut.c,p.d,s.o,f.f,f.e,b.a,p.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),Vt),Pt=["addProductModal"],Ct=["successModal"],Mt=["dangerModal"],kt=["foundModal"],Ft=["submitSkuAdd"],wt=["skuEditFormContainer"];function Ot(t,e){1&t&&V.Rb(0,"input",93)}function Rt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",94),V.Wb(1,"td",95),V.Rb(2,"input",96),V.Vb(),V.Wb(3,"td",95),V.Rb(4,"input",97),V.Vb(),V.Wb(5,"td",98),V.Rb(6,"input",99),V.Vb(),V.Wb(7,"td",100),V.Rb(8,"p-dropdown",101),V.Vb(),V.Wb(9,"td",95),V.Rb(10,"p-dropdown",102),V.Vb(),V.Wb(11,"td",103),V.Wb(12,"a",62),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().openAddRateDetailsModal(!0,t)}),V.Rb(13,"i",104),V.Vb(),V.Pc(14," \xa0 "),V.Wb(15,"a",62),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRates(t)}),V.Rb(16,"i",105),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc();V.rc("formGroupName",n),V.Db(8),V.rc("options",r.rateStatusList),V.Db(2),V.rc("options",r.rateTypeOptions)}}function St(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",94),V.Wb(1,"td",106),V.Rb(2,"input",107),V.Vb(),V.Wb(3,"td",106),V.Rb(4,"input",108),V.Vb(),V.Wb(5,"td",103),V.Wb(6,"a",62),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRateDetails(t)}),V.Rb(7,"i",105),V.Vb(),V.Vb(),V.Vb()}2&t&&V.rc("formGroupName",e.index)}var At,Dt=((At=function(){function e(o,n,r,a,i,d,s,l,c,b,p){t(this,e),this.countryService=o,this.currencyService=n,this.institutionService=r,this.dialogService=a,this.zone=i,this.fb=d,this.SkuService=s,this.route=l,this.fpsService=c,this.datePipe=b,this.router=p,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.has_interest_flag=!1,this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.route.paramMap.subscribe(function(e){e.get("id")&&(t.getData(e.get("id")),t.skuID=e.get("id"))}),this.skuEditForm=this.fb.group({uuid:new p.f("",[p.y.required]),validity_start_at:new p.f(new Date),package_type_id:new p.f("1",[p.y.required]),validity_end_at:new p.f(new Date),country_code:new p.f("",[p.y.required]),interest_rate:new p.f,financier_id:new p.f("",[p.y.required]),has_interest_flag:new p.f,min_payment_amount_flag:new p.f,monthly_payment:new p.f,quarterly_payment:new p.f,half_yearly_payment:new p.f,currency_code:new p.f,min_payment_amount:new p.f("0"),consumable_usage:new p.f,min_procedure:new p.f,required_tenure:new p.f("0"),required_docs:new p.f,agreement_mandatory:new p.f("0"),has_min_procedure:new p.f("0"),has_consumable_usage:new p.f("0")}),this.countryService.getCountry().subscribe({next:function(e){e.success?t.zone.run(function(){t.countryList=e.data.countries}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve country list")}}),this.loadInstitutionsList(),this.setConditionalValidators()}},{key:"cancelSkuForm",value:function(){}},{key:"setConditionalValidators",value:function(){var t=this.skuEditForm.get("interest_rate");this.skuEditForm.get("has_interest_flag").valueChanges.subscribe(function(e){1==e?t.setValidators([p.y.required]):t.clearValidators()})}},{key:"getData",value:function(t){var e=this;this.SkuService.find(t).subscribe(function(t){e.skuEditForm.patchValue(t.data),e.countryCode=e.skuEditForm.get("country_code").value,e.countryChange(),t.data.interest_rate>0&&e.skuEditForm.controls.has_interest_flag.setValue(!0),t.data.min_payment_amount>0&&e.skuEditForm.controls.min_payment_amount_flag.setValue(!0),t.data.consumable_usage>0&&e.skuEditForm.controls.has_consumable_usage.setValue(!0),t.data.min_procedure>0&&e.skuEditForm.controls.has_min_procedure.setValue(!0),t.data.rates.forEach(function(t){e.rate_counter=t.id,e.addRates().push(e.existingRates(t))})})}},{key:"isFieldValid",value:function(t){return!this.skuEditForm.get(t).valid&&this.skuEditForm.get(t).touched}},{key:"onSave",value:function(){var t=this;if(!this.skuEditForm.valid)return this.fpsService.validateAllFormFields(this.skuEditForm),void this.skuEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.updateSku({uuid:this.skuEditForm.get("uuid").value+"",country_code:this.skuEditForm.get("country_code").value+"",financier_id:this.skuEditForm.get("financier_id").value+"",monthly_payment:this.skuEditForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuEditForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuEditForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuEditForm.get("package_type_id").value+"",interest_rate:(this.skuEditForm.get("interest_rate").value?this.skuEditForm.get("interest_rate").value:0)+"",currency_code:this.skuEditForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuEditForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuEditForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuEditForm.get("required_docs").value+"",required_tenure:this.skuEditForm.get("required_tenure").value+"",agreement_mandatory:this.skuEditForm.get("agreement_mandatory").value+"",data_area_id:"test_data_rea_id",consumable_usage:this.skuEditForm.get("consumable_usage").value+"",min_procedure:this.skuEditForm.get("min_procedure").value+"",min_payment_amount:this.skuEditForm.get("min_payment_amount").value+""},this.skuID).subscribe(function(e){e.id&&(t.alertBody="FPS updated successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide();for(var o=t.rateAddForm.value.addRates,n=[],r=0;r<o.length;r++)n.push(o[r].rate_no),t.storeRates({id:o[r].rate_no,financial_package_id:e.id,validity_start_at:o[r].validity_start_at,validity_end_at:o[r].validity_end_at,status:o[r].status,type:o[r].type});t.rateCheckSum(n,e.id),t.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3))},function(e){console.log(e),t.alertBody="The FPS can't updated <br>"+e,t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onSaveRateDetails",value:function(){for(var t=this.rateDatailAddForm.value.addRateDetails,e=[],o=0;o<t.length;o++)t[o].details_tenure>0&&t[o].details_interest_rate>0&&e.push({details_rate_no:this.currentRateNo,details_tenure:t[o].details_tenure,details_interest_rate:t[o].details_interest_rate});this.storeRatesDetails(e),this.addRateDetailsModal.hide()}},{key:"addRates",value:function(){return this.rateAddForm.get("addRates")}},{key:"existingRates",value:function(t){return this.fb.group({rate_no:t.id,validity_start_at:t.validity_start_at,validity_end_at:t.validity_end_at,status:t.status,type:t.type})}},{key:"newAddRates",value:function(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,type:"normal"})}},{key:"addAddRates",value:function(){this.addRates().push(this.newAddRates())}},{key:"removeAddRates",value:function(t){this.addRates().removeAt(t)}},{key:"storeRates",value:function(t){this.SkuService.saveRates(t).subscribe(function(t){t.id&&console.log("Rates Stored successfully.")},function(t){console.log(t)})}},{key:"countryChange",value:function(){var t=this;this.countryCode=this.skuEditForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.currencies_list=e.data}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve currencies list")}}),this.loadInstitutionsList()}},{key:"loadInstitutionsList",value:function(){var t=this;this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"rateCheckSum",value:function(t,e){this.SkuService.checksumRates({activeRateIDs:t,skuID:e}).subscribe()}},{key:"openAddRateDetailsModal",value:function(t,e){var o=this;this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.currentRateNo=this.rateAddForm.value.addRates[e].rate_no,this.currentRateStart=this.rateAddForm.value.addRates[e].validity_start_at,this.currentRateEnd=this.rateAddForm.value.addRates[e].validity_end_at,this.currentRateType=this.rateAddForm.value.addRates[e].type,this.SkuService.loadRateDetails(this.currentRateNo).subscribe(function(e){e.data.rate_details.forEach(function(t){o.addRateDetails().push(o.existingRateDetails(t))}),o.addLine=t,o.addRateDetailsModal.show()},function(t){alert("Details for new rates can be added only after saving. please save and re-edit.")})}},{key:"addRateDetails",value:function(){return this.rateDatailAddForm.get("addRateDetails")}},{key:"existingRateDetails",value:function(t){return this.fb.group({details_tenure:t.details_tenure,details_interest_rate:t.details_interest_rate})}},{key:"newAddRateDetails",value:function(){return this.fb.group({details_tenure:0,details_interest_rate:0})}},{key:"addAddRateDetails",value:function(){this.addRateDetails().push(this.newAddRateDetails())}},{key:"removeAddRateDetails",value:function(t){this.addRateDetails().removeAt(t)}},{key:"storeRatesDetails",value:function(t){this.SkuService.saveRateDetails(t).subscribe(function(t){t.id&&console.log("Rate Details Stored successfully.")},function(t){console.log(t)})}}]),e}()).\u0275fac=function(t){return new(t||At)(V.Qb(lt),V.Qb(M),V.Qb(C),V.Qb(g.a),V.Qb(V.A),V.Qb(p.e),V.Qb(Q),V.Qb(f.a),V.Qb(h.a),V.Qb(s.f),V.Qb(f.c))},At.\u0275cmp=V.Kb({type:At,selectors:[["app-sku-edit"]],viewQuery:function(t,e){var o;1&t&&(V.Uc(Pt,1),V.Uc(Ct,1),V.Uc(Mt,1),V.Uc(kt,1),V.Uc(Ft,1),V.Uc(wt,1)),2&t&&(V.Cc(o=V.hc())&&(e.addRateDetailsModal=o.first),V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.submitSkuAdd=o.first),V.Cc(o=V.hc())&&(e.skuEditFormContainerRef=o.first))},decls:262,vars:38,consts:[[1,"animated","fadeIn"],[1,"row"],["skuEditFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest_flag",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],["formControlName","min_payment_amount_flag",1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["formControlName","has_consumable_usage",1,"example-margin"],["min_usage",""],["type","number","formControlName","consumable_usage",1,"form-control",3,"readonly"],["formControlName","has_min_procedure",1,"example-margin"],["min_procedure",""],["type","number","formControlName","min_procedure",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuEditForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["addProductModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"top-info"],[1,"row","form-group","top-info-1"],[1,"col-md-6","info-text"],["type","text",1,"form-control",3,"value","disabled"],[1,"table-div"],[3,"formGroup","ngSubmit"],["header","Rate Details"],["id","sku_rate_datails","formArrayName","addRateDetails",1,"table","table-borderless"],["colspan","3","align","center",1,"td-actions"],["colspan","3",1,"td-actions"],["type","submit","value","Submit",1,"btn","btn-primary",2,"float","right"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],["title","Add SKU Rate Details",1,"fa","fa-plus"],[1,"fa","fa-trash"],[2,"width","45%"],["formControlName","details_tenure","size","1","type","number",1,"form-control"],["formControlName","details_interest_rate","size","1","type","number","step","0.1",1,"form-control"]],template:function(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",0),V.Wb(1,"div",1,2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Wb(7,"h2"),V.Pc(8,"Edit FPS SKU Management"),V.Vb(),V.Vb(),V.Rb(9,"hr"),V.Wb(10,"form",7),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(11,"div",8),V.Wb(12,"label",9),V.Pc(13," FPS SKU No "),V.Wb(14,"span",10),V.Pc(15," * "),V.Vb(),V.Vb(),V.Wb(16,"div",11),V.Rb(17,"input",12),V.Rb(18,"app-form-error-presentation",13),V.Vb(),V.Wb(19,"label",9),V.Pc(20," Validity Start Date"),V.Wb(21,"span",10),V.Pc(22," * "),V.Vb(),V.Vb(),V.Wb(23,"div",11),V.Rb(24,"p-calendar",14),V.Vb(),V.Vb(),V.Wb(25,"div",8),V.Wb(26,"label",9),V.Pc(27," FPS Type "),V.Wb(28,"span",10),V.Pc(29," * "),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Rb(31,"p-dropdown",15),V.Rb(32,"app-form-error-presentation",16),V.Vb(),V.Wb(33,"label",9),V.Pc(34," Validity End Date "),V.Vb(),V.Wb(35,"div",11),V.Rb(36,"p-calendar",17),V.Vb(),V.Vb(),V.Wb(37,"div",8),V.Wb(38,"label",9),V.Pc(39," Country"),V.Wb(40,"span",10),V.Pc(41," * "),V.Vb(),V.Vb(),V.Wb(42,"div",11),V.Wb(43,"p-dropdown",18),V.gc("onChange",function(){return e.countryChange()}),V.Vb(),V.Rb(44,"app-form-error-presentation",19),V.Vb(),V.Wb(45,"label",9),V.Pc(46," Interest "),V.Vb(),V.Wb(47,"div",11),V.Wb(48,"div",8),V.Wb(49,"div",20),V.Rb(50,"mat-slide-toggle",21,22),V.Vb(),V.Wb(52,"div",23),V.Nc(53,Ot,1,0,"input",24),V.Rb(54,"app-form-error-presentation",25),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(55,"div",8),V.Wb(56,"label",9),V.Pc(57," Financial Instititue"),V.Wb(58,"span",10),V.Pc(59," * "),V.Vb(),V.Vb(),V.Wb(60,"div",11),V.Rb(61,"p-dropdown",26),V.Rb(62,"app-form-error-presentation",27),V.Vb(),V.Vb(),V.Wb(63,"div",8),V.Wb(64,"label",9),V.Pc(65," Payment Frequency "),V.Vb(),V.Wb(66,"div",11),V.Wb(67,"div",28),V.Wb(68,"div",29),V.Rb(69,"p-checkbox",30),V.Wb(70,"label",31),V.Pc(71,"Monthly"),V.Vb(),V.Vb(),V.Wb(72,"div",29),V.Rb(73,"p-checkbox",32),V.Wb(74,"label",33),V.Pc(75,"Quarterly"),V.Vb(),V.Vb(),V.Wb(76,"div",29),V.Rb(77,"p-checkbox",34),V.Wb(78,"label",35),V.Pc(79,"Half-Yearly"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(80,"label",9),V.Pc(81," Mininumum Payment Amount "),V.Vb(),V.Wb(82,"div",11),V.Rb(83,"input",36),V.Vb(),V.Vb(),V.Wb(84,"div",8),V.Wb(85,"div",37),V.Wb(86,"div",8),V.Wb(87,"label",38),V.Pc(88," Mininumum Payment Amount "),V.Vb(),V.Wb(89,"div",11),V.Rb(90,"mat-slide-toggle",39,40),V.Vb(),V.Vb(),V.Vb(),V.Wb(92,"div",37),V.Wb(93,"div",8),V.Wb(94,"label",41),V.Pc(95," Min Payment Amount Currency "),V.Vb(),V.Wb(96,"div",42),V.Rb(97,"p-dropdown",43),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",8),V.Wb(99,"div",37),V.Wb(100,"div",8),V.Wb(101,"label",38),V.Pc(102," Consumable Usage "),V.Wb(103,"span",10),V.Pc(104," * "),V.Vb(),V.Vb(),V.Wb(105,"div",11),V.Rb(106,"mat-slide-toggle",44,45),V.Vb(),V.Vb(),V.Vb(),V.Wb(108,"label",9),V.Pc(109," Minimum Usage"),V.Wb(110,"span",10),V.Pc(111," * "),V.Vb(),V.Vb(),V.Wb(112,"div",11),V.Rb(113,"input",46),V.Vb(),V.Vb(),V.Wb(114,"div",8),V.Wb(115,"div",37),V.Wb(116,"div",8),V.Wb(117,"label",38),V.Pc(118," Procedure Per Month"),V.Wb(119,"span",10),V.Pc(120," * "),V.Vb(),V.Vb(),V.Wb(121,"div",11),V.Rb(122,"mat-slide-toggle",47,48),V.Vb(),V.Vb(),V.Vb(),V.Wb(124,"label",9),V.Pc(125," Minimum Procedure"),V.Wb(126,"span",10),V.Pc(127," * "),V.Vb(),V.Vb(),V.Wb(128,"div",11),V.Rb(129,"input",49),V.Vb(),V.Vb(),V.Wb(130,"div",8),V.Wb(131,"div",37),V.Wb(132,"div",8),V.Wb(133,"label",38),V.Pc(134," Agreement Number Mandatory"),V.Wb(135,"span",10),V.Pc(136," * "),V.Vb(),V.Vb(),V.Wb(137,"div",11),V.Rb(138,"mat-slide-toggle",50),V.Vb(),V.Vb(),V.Vb(),V.Wb(139,"label",9),V.Pc(140," Required Tenure"),V.Wb(141,"span",10),V.Pc(142," * "),V.Vb(),V.Vb(),V.Wb(143,"div",11),V.Rb(144,"p-inputNumber",51),V.Rb(145,"app-form-error-presentation",52),V.Vb(),V.Vb(),V.Wb(146,"div",8),V.Rb(147,"div",37),V.Wb(148,"label",9),V.Pc(149," List of Document Required "),V.Vb(),V.Wb(150,"div",11),V.Rb(151,"textarea",53),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(152,"br"),V.Wb(153,"div",54),V.Wb(154,"form",55),V.Wb(155,"p-accordion",56),V.Wb(156,"p-accordionTab",57),V.Wb(157,"div",1),V.Wb(158,"table",58),V.Wb(159,"thead"),V.Wb(160,"tr"),V.Wb(161,"th"),V.Pc(162,"Rate No"),V.Vb(),V.Wb(163,"th"),V.Pc(164,"Validity Start Date"),V.Vb(),V.Wb(165,"th"),V.Pc(166,"Validity End Date"),V.Vb(),V.Wb(167,"th"),V.Pc(168,"Status"),V.Vb(),V.Wb(169,"th"),V.Pc(170,"Type"),V.Vb(),V.Rb(171,"th"),V.Vb(),V.Vb(),V.Wb(172,"tbody"),V.Nc(173,Rt,17,3,"tr",59),V.Vb(),V.Wb(174,"tfoot",60),V.Wb(175,"tr"),V.Wb(176,"td",61),V.Wb(177,"a",62),V.gc("click",function(){return e.addAddRates()}),V.Rb(178,"i",63),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(179,"div",54),V.Wb(180,"div",64),V.Wb(181,"button",65),V.gc("click",function(){return e.cancelSkuForm()}),V.Pc(182," CANCEL"),V.Vb(),V.Wb(183,"button",66),V.Pc(184,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(185,"div",67,68),V.Wb(187,"div",69),V.Wb(188,"div",70),V.Wb(189,"div",71),V.Wb(190,"h4",72),V.Pc(191,"Success"),V.Vb(),V.Vb(),V.Wb(192,"div",73),V.Wb(193,"p"),V.Pc(194),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(195,"div",74,75),V.Wb(197,"div",76),V.Wb(198,"div",70),V.Wb(199,"div",71),V.Wb(200,"h4",72),V.Pc(201,"Error"),V.Vb(),V.Vb(),V.Wb(202,"div",73),V.Wb(203,"p"),V.Pc(204),V.Vb(),V.Vb(),V.Rb(205,"div",77),V.Vb(),V.Vb(),V.Vb(),V.Wb(206,"div",74,78),V.Wb(208,"div",79),V.Wb(209,"div",70),V.Wb(210,"div",71),V.Wb(211,"h4",72),V.Pc(212,"FPS SKU Rate Details"),V.Vb(),V.Wb(213,"button",80),V.gc("click",function(){return V.Fc(o),V.Dc(207).hide()}),V.Wb(214,"span",81),V.Pc(215,"\xd7"),V.Vb(),V.Vb(),V.Vb(),V.Wb(216,"div",73),V.Wb(217,"div",82),V.Wb(218,"div",83),V.Wb(219,"div",84),V.Pc(220,"Rate No."),V.Vb(),V.Wb(221,"div",37),V.Rb(222,"input",85),V.Vb(),V.Vb(),V.Wb(223,"div",83),V.Wb(224,"div",84),V.Pc(225,"Validity Start"),V.Vb(),V.Wb(226,"div",37),V.Rb(227,"input",85),V.Vb(),V.Vb(),V.Wb(228,"div",83),V.Wb(229,"div",84),V.Pc(230,"Validity End"),V.Vb(),V.Wb(231,"div",37),V.Rb(232,"input",85),V.Vb(),V.Vb(),V.Wb(233,"div",83),V.Wb(234,"div",84),V.Pc(235,"Type"),V.Vb(),V.Wb(236,"div",37),V.Rb(237,"input",85),V.Vb(),V.Vb(),V.Vb(),V.Rb(238,"hr"),V.Wb(239,"div",86),V.Wb(240,"form",87),V.gc("ngSubmit",function(){return e.onSaveRateDetails()}),V.Wb(241,"p-accordion",56),V.Wb(242,"p-accordionTab",88),V.Wb(243,"div",1),V.Wb(244,"table",89),V.Wb(245,"thead"),V.Wb(246,"tr"),V.Wb(247,"th"),V.Pc(248,"Tenure"),V.Vb(),V.Wb(249,"th"),V.Pc(250,"Interest Rate"),V.Vb(),V.Vb(),V.Vb(),V.Wb(251,"tbody"),V.Nc(252,St,8,1,"tr",59),V.Vb(),V.Wb(253,"tfoot",60),V.Wb(254,"tr"),V.Wb(255,"td",90),V.Wb(256,"a",62),V.gc("click",function(){return e.addAddRateDetails()}),V.Rb(257,"i",63),V.Vb(),V.Vb(),V.Vb(),V.Wb(258,"tr"),V.Wb(259,"td",91),V.Rb(260,"input",92),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(261,"hr"),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.Dc(51),r=V.Dc(91),a=V.Dc(107),i=V.Dc(123);V.Db(10),V.rc("formGroup",e.skuEditForm),V.Db(7),V.rc("readonly",!0),V.Db(1),V.rc("displayError",e.isFieldValid("uuid")),V.Db(6),V.rc("showTime",!1),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(1),V.rc("displayError",e.isFieldValid("package_type_id")),V.Db(4),V.rc("showTime",!1),V.Db(7),V.rc("options",e.countryList),V.Db(1),V.rc("displayError",e.isFieldValid("country_code")),V.Db(9),V.rc("ngIf",n.checked),V.Db(1),V.rc("displayError",e.isFieldValid("interest_rate")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("financier_id")),V.Db(7),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(6),V.rc("readonly",!r.checked),V.Db(14),V.rc("disabled",!r.checked)("options",e.currencies_list),V.Db(16),V.rc("readonly",!a.checked),V.Db(16),V.rc("readonly",!i.checked),V.Db(16),V.rc("displayError",e.isFieldValid("required_tenure")),V.Db(9),V.rc("formGroup",e.rateAddForm),V.Db(1),V.rc("multiple",!0),V.Db(18),V.rc("ngForOf",e.addRates().controls),V.Db(21),V.Qc(e.alertBody),V.Db(10),V.Qc(e.alertBody),V.Db(18),V.rc("value",e.currentRateNo)("disabled",!0),V.Db(5),V.rc("value",e.currentRateStart)("disabled",!0),V.Db(5),V.rc("value",e.currentRateEnd)("disabled",!0),V.Db(5),V.rc("value",e.currentRateType)("disabled",!0),V.Db(3),V.rc("formGroup",e.rateDatailAddForm),V.Db(1),V.rc("multiple",!0),V.Db(11),V.rc("ngForOf",e.addRateDetails().controls)}},directives:[p.z,p.q,p.j,p.c,p.p,p.h,O,ct.a,k.a,u.a,s.p,bt.a,p.u,pt.a,ut.a,ut.c,p.d,s.o,f.f,f.e,b.a,p.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),At),xt=["successModal"],Nt=["dangerModal"],Et=["foundModal"],qt=["fpsEditFormContainer"];function Ut(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",76),V.Wb(1,"td",77),V.Rb(2,"input",78),V.Vb(),V.Wb(3,"td",77),V.Rb(4,"input",79),V.Vb(),V.Wb(5,"td",80),V.Rb(6,"p-dropdown",81),V.Vb(),V.Wb(7,"td",77),V.Rb(8,"input",82),V.Vb(),V.Wb(9,"td",83),V.Wb(10,"a",84),V.Rb(11,"i",85),V.Vb(),V.Pc(12," \xa0 "),V.Wb(13,"a",86),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinProcedure(t)}),V.Rb(14,"i",87),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",r.fps_user_list)}}function Lt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",25),V.Wb(2,"div",66),V.Wb(3,"h2"),V.Pc(4,"Procedure Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",67),V.Wb(6,"label",68),V.Pc(7," Minimum Procedure "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",69),V.Vb(),V.Vb(),V.Wb(10,"div",52),V.Wb(11,"form",70),V.Wb(12,"div",2),V.Wb(13,"table",71),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Pc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Pc(19,"No. Of Procedure"),V.Vb(),V.Wb(20,"th"),V.Pc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Pc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Nc(26,Ut,15,2,"tr",72),V.Vb(),V.Wb(27,"tfoot",73),V.Wb(28,"tr"),V.Wb(29,"td",74),V.Wb(30,"i",75),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinProcedure()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minProcedureAddForm),V.Db(15),V.rc("ngForOf",n.addMinProcedure().controls)}}function Tt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",76),V.Wb(1,"td",77),V.Rb(2,"input",78),V.Vb(),V.Wb(3,"td",77),V.Rb(4,"input",90),V.Vb(),V.Wb(5,"td",80),V.Rb(6,"p-dropdown",81),V.Vb(),V.Wb(7,"td",77),V.Rb(8,"input",82),V.Vb(),V.Wb(9,"td",83),V.Wb(10,"a",84),V.Rb(11,"i",85),V.Vb(),V.Pc(12," \xa0 "),V.Wb(13,"a",86),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinUsage(t)}),V.Rb(14,"i",87),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,r=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",r.fps_user_list)}}function It(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",25),V.Wb(2,"div",66),V.Wb(3,"h2"),V.Pc(4,"Consumable Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",67),V.Wb(6,"label",68),V.Pc(7," Minimum Usage "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",88),V.Vb(),V.Vb(),V.Wb(10,"div",52),V.Wb(11,"form",70),V.Wb(12,"div",2),V.Wb(13,"table",89),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Pc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Pc(19,"Usage"),V.Vb(),V.Wb(20,"th"),V.Pc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Pc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Nc(26,Tt,15,2,"tr",72),V.Vb(),V.Wb(27,"tfoot",73),V.Wb(28,"tr"),V.Wb(29,"td",74),V.Wb(30,"i",75),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinUsage()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minUsageAddForm),V.Db(15),V.rc("ngForOf",n.addMinUsage().controls)}}var Qt,zt,Gt,Bt=[{path:"fps-listing",component:_.a},{path:"fps-create",component:T},{path:":id/fps-edit",component:(Qt=function(){function e(o,n,r,a,i,d,s,l,c){t(this,e),this.fb=o,this.fpsService=n,this.appService=r,this.institutionService=a,this.zone=i,this.dialogService=d,this.route=s,this.currencyService=l,this.router=c,this.agreement_mandatory=!1,this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!1,this.has_min_procedure=!1,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList()}return o(e,[{key:"form_controls",get:function(){return this.fpsEditForm.controls}},{key:"ngOnInit",value:function(){var t=this;this.route.paramMap.subscribe(function(e){e.get("id")&&(t.fpsID=e.get("id"))}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.fpsEditForm=this.fb.group({fps_no:new p.f("",[p.y.required]),fps_opportunity_id:new p.f,fps_quote_id:new p.f,fps_customer_name:new p.f,fps_soci_uuid:new p.f,fps_transaction_type_id:new p.f(1,[p.y.min(1)]),fps_financier_id:new p.f("",[p.y.required,p.y.min(1)]),fps_payment_frequency:new p.f("",[p.y.required]),fps_status_id:new p.f(1,[p.y.min(1)]),fps_tenure_id:new p.f("",[p.y.required]),fps_adv_payment:new p.f("0"),fps_adv_payment_percentage:new p.f("0"),fps_net_financing_amount:new p.f("0"),fps_monthly_payment_amount:new p.f,fps_interest_rate:new p.f,fps_validated_by:new p.f,fps_approved_by:new p.f,fps_leas_aggr_no:new p.f("0"),fps_internal_aggr_no:new p.f,fps_remarks:new p.f,fps_currency_code:new p.f,fps_total_financial_amount:new p.f,fps_min_payment_amount:new p.f,fps_required_docs:new p.f,fps_data_area_id:new p.f,fps_consumable_usage:new p.f,fps_min_procedure:new p.f}),this.route.queryParams.subscribe(function(e){t.current_apportunity_id=e.opport_id,t.fpsEditForm.controls.fps_opportunity_id.setValue(t.current_apportunity_id),t.current_quot_id=e.quot_id,t.fpsEditForm.controls.fps_quote_id.setValue(t.current_quot_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(function(e){t.oppt_details=e.data,t.fpsEditForm.controls.fps_currency_code.setValue(t.oppt_details.currency_code),t.fpsEditForm.controls.fps_total_financial_amount.setValue(t.oppt_details.amount),t.fpsEditForm.controls.fps_data_area_id.setValue(t.oppt_details.customer.data_area_id),t.loadUsers(),t.currencyService.getCountryCodeFromCurrency(t.oppt_details.currency_code).subscribe({next:function(e){e.success&&t.zone.run(function(){t.countryCode=e.data.iso3,t.loadFpsDetails()})}})})}},{key:"onSave",value:function(){var t=this;if(!this.fpsEditForm.valid)return this.fpsService.validateAllFormFields(this.fpsEditForm),void this.fpsEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.updateFps({fps_no:this.fpsEditForm.get("fps_no").value+"",fps_opportunity_id:this.fpsEditForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsEditForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsEditForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsEditForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsEditForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsEditForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsEditForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsEditForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsEditForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsEditForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsEditForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsEditForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsEditForm.get("fps_status_id").value+"",fps_validated_by:this.fpsEditForm.get("fps_validated_by").value,fps_approved_by:this.fpsEditForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsEditForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsEditForm.get("fps_remarks").value+"",fps_required_docs:this.fpsEditForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsEditForm.get("fps_data_area_id").value+""},this.fpsID).subscribe(function(e){if(e.id){for(var o=t.minProcedureAddForm.value.addMinProcedure,n=[],r=0;r<o.length;r++)n.push(o[r].id),t.fpsService.storeMinProcedure({id:o[r].id,fps_id:e.id,date:o[r].date,no_procedure:o[r].no_procedure,updated_by:o[r].updated_by,updated_on:o[r].updated_on});t.fpsService.minProcedureCheckSum({activeProcedureIDs:n,fps_id:e.id}).subscribe();for(var a=t.minUsageAddForm.value.addMinUsage,i=[],d=0;d<a.length;d++)i.push(a[d].id),t.fpsService.storeMinUsage({id:a[d].id,fps_id:e.id,date:a[d].date,usage:a[d].usage,updated_by:a[d].updated_by,updated_on:a[d].updated_on});t.fpsService.minUsageCheckSum({activeUsageIDs:i,fps_id:e.id}).subscribe(),t.alertBody="FPS updated successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide()},2e3),t.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})}},function(e){console.log(e),t.alertBody="The FPS can't save",t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onChangeAdvancePayment",value:function(){var t=this.fpsEditForm.controls.fps_total_financial_amount.value;this.fpsEditForm.controls.fps_net_financing_amount.setValue(t-t/100*this.fpsEditForm.controls.fps_adv_payment_percentage.value)}},{key:"updateInterestRate",value:function(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsEditForm.controls.fps_tenure_id.value);e.length>1&&(this.fpsEditForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsEditForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsEditForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsEditForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsEditForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment())}},{key:"updateMontlyPayment",value:function(){var t=parseFloat(this.fpsEditForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsEditForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsEditForm.controls.fps_tenure_id.value);this.fpsEditForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}},{key:"updateTenure",value:function(){var t=this;this.countryCode.length>0&&this.loadFinancialInstitutions();var e=this.fpsEditForm.controls.fps_financier_id.value,o=this.fpsEditForm.controls.fps_payment_frequency.value,n=this.fpsEditForm.controls.fps_transaction_type_id.value;n&&e&&o&&this.fpsService.getTenureList(n,e,o).subscribe(function(e){e.unshift(e.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),t.tenure_list=e,t.updateInterestRate()},function(t){console.log(t)})}},{key:"loadFinancialInstitutions",value:function(){var t=this;this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getFilteredCodes",value:function(t,e,o){return t.filter(function(t){return t[e]==o})}},{key:"isFieldValid",value:function(t){return!this.fpsEditForm.get(t).valid&&this.fpsEditForm.get(t).touched}},{key:"loadUsers",value:function(){var t=this;this.fpsService.getUsersList().subscribe(function(e){t.fps_user_list=e.data})}},{key:"loadFpsDetails",value:function(){var t=this;this.fpsService.find(this.fpsID).subscribe(function(e){t.updateTenure(),t.fpsEditForm.patchValue(e.data),e.data.min_procedures.forEach(function(e){t.has_min_procedure=!0,t.addMinProcedure().push(t.existingMinProcedure(e))}),e.data.min_usages.forEach(function(e){t.has_consumable_usage=!0,t.addMinUsage().push(t.existingMinUsage(e))}),t.updateTenure()})}},{key:"addMinProcedure",value:function(){return this.minProcedureAddForm.get("addMinProcedure")}},{key:"newMinProcedure",value:function(){return this.fb.group({id:"",date:"",no_procedure:12,updated_by:1,updated_on:""})}},{key:"addAddMinProcedure",value:function(){this.addMinProcedure().push(this.newMinProcedure())}},{key:"removeAddMinProcedure",value:function(t){this.addMinProcedure().removeAt(t)}},{key:"existingMinProcedure",value:function(t){return this.fb.group({id:t.id,date:t.date,no_procedure:t.no_procedure,updated_by:t.updated_by,updated_on:t.updated_on})}},{key:"addMinUsage",value:function(){return this.minUsageAddForm.get("addMinUsage")}},{key:"newMinUsage",value:function(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}},{key:"addAddMinUsage",value:function(){this.addMinUsage().push(this.newMinUsage())}},{key:"removeAddMinUsage",value:function(t){this.addMinUsage().removeAt(t)}},{key:"existingMinUsage",value:function(t){return this.fb.group({id:t.id,date:t.date,usage:t.usage,updated_by:t.updated_by,updated_on:t.updated_on})}}]),e}(),Qt.\u0275fac=function(t){return new(t||Qt)(V.Qb(p.e),V.Qb(h.a),V.Qb(W),V.Qb(C),V.Qb(V.A),V.Qb(g.a),V.Qb(f.a),V.Qb(M),V.Qb(f.c))},Qt.\u0275cmp=V.Kb({type:Qt,selectors:[["app-edit"]],viewQuery:function(t,e){var o;1&t&&(V.Uc(xt,1),V.Uc(Nt,1),V.Uc(Et,1),V.Uc(qt,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.fpsEditFormContainerRef=o.first))},features:[V.Cb([W])],decls:199,vars:24,consts:[[1,"animated","fadeIn"],["id","fpsEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["fpsEditFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment",1,"form-control"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"custom-footer","d-flex","justify-content-center"],["type","submit","form","fpsEditForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-edit"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"form",1),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Pc(7,"Edit FPS Request Form"),V.Vb(),V.Vb(),V.Wb(8,"div",7),V.Wb(9,"div",8),V.Wb(10,"div",9),V.Wb(11,"div",10),V.Wb(12,"div",2),V.Wb(13,"div",11),V.Wb(14,"div",12),V.Wb(15,"h3",13),V.Pc(16),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",14),V.Wb(18,"div",12),V.Wb(19,"label",13),V.Pc(20,"FPS Request No."),V.Vb(),V.Wb(21,"div",15),V.Pc(22),V.Vb(),V.Wb(23,"span"),V.Rb(24,"input",16),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",11),V.Wb(26,"div",12),V.Wb(27,"label",13),V.Pc(28,"Transaction Type"),V.Vb(),V.Wb(29,"p-dropdown",17),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Wb(31,"div",12),V.Wb(32,"label",13),V.Pc(33,"Status"),V.Vb(),V.Rb(34,"p-dropdown",18),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(35,"div",19),V.Wb(36,"div",2),V.Wb(37,"div",11),V.Wb(38,"div",12),V.Wb(39,"label",13),V.Pc(40,"Created Date"),V.Vb(),V.Wb(41,"div"),V.Pc(42),V.lc(43,"date"),V.Vb(),V.Vb(),V.Vb(),V.Wb(44,"div",11),V.Wb(45,"div",12),V.Wb(46,"label",13),V.Pc(47,"Opportunity ID "),V.Vb(),V.Wb(48,"div"),V.Pc(49),V.Rb(50,"input",20),V.Rb(51,"input",21),V.Vb(),V.Vb(),V.Vb(),V.Wb(52,"div",11),V.Wb(53,"div",12),V.Wb(54,"label",13),V.Pc(55,"Quote ID (Version)"),V.Vb(),V.Wb(56,"div"),V.Pc(57," ... "),V.Vb(),V.Vb(),V.Vb(),V.Wb(58,"div",11),V.Wb(59,"div",12),V.Wb(60,"label",13),V.Pc(61,"SOCI No."),V.Vb(),V.Wb(62,"div"),V.Pc(63," ... "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(64,"div",2,22),V.Wb(66,"div",23),V.Wb(67,"div",4),V.Wb(68,"div",7),V.Wb(69,"div",24),V.Wb(70,"h2"),V.Pc(71,"General"),V.Vb(),V.Vb(),V.Wb(72,"div",25),V.Wb(73,"label",26),V.Pc(74," Payment Frequency"),V.Wb(75,"span",27),V.Pc(76," * "),V.Vb(),V.Vb(),V.Wb(77,"div",28),V.Wb(78,"p-dropdown",29),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(79,"app-form-error-presentation",30),V.Vb(),V.Wb(80,"label",26),V.Pc(81," Tenure "),V.Vb(),V.Wb(82,"div",28),V.Wb(83,"p-dropdown",31),V.gc("onChange",function(){return e.updateInterestRate()}),V.Vb(),V.Rb(84,"app-form-error-presentation",32),V.Vb(),V.Vb(),V.Wb(85,"div",25),V.Wb(86,"label",26),V.Pc(87," Financial Instititue"),V.Wb(88,"span",27),V.Pc(89," * "),V.Vb(),V.Vb(),V.Wb(90,"div",28),V.Wb(91,"p-dropdown",33),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(92,"app-form-error-presentation",34),V.Vb(),V.Wb(93,"label",26),V.Pc(94," Interest % "),V.Vb(),V.Wb(95,"div",28),V.Wb(96,"input",35),V.gc("change",function(){return e.updateMontlyPayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(97,"div",25),V.Wb(98,"label",26),V.Pc(99," Currency"),V.Wb(100,"span",27),V.Pc(101," * "),V.Vb(),V.Vb(),V.Wb(102,"div",28),V.Rb(103,"input",36),V.Vb(),V.Wb(104,"label",26),V.Pc(105," Monthly Payment Amount "),V.Vb(),V.Wb(106,"div",28),V.Rb(107,"input",37),V.Vb(),V.Vb(),V.Wb(108,"div",25),V.Wb(109,"label",26),V.Pc(110," Total Financial Amount"),V.Wb(111,"span",27),V.Pc(112," * "),V.Vb(),V.Vb(),V.Wb(113,"div",28),V.Rb(114,"input",38),V.Vb(),V.Wb(115,"label",26),V.Pc(116," Min Payment Amount "),V.Vb(),V.Wb(117,"div",28),V.Rb(118,"input",39),V.Vb(),V.Vb(),V.Wb(119,"div",25),V.Wb(120,"div",40),V.Wb(121,"div",25),V.Wb(122,"label",41),V.Pc(123," Advance Payment (%) "),V.Vb(),V.Wb(124,"div",42),V.Wb(125,"input",43),V.gc("change",function(){return e.onChangeAdvancePayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(126,"div",25),V.Wb(127,"label",41),V.Pc(128," Advance Payment "),V.Vb(),V.Wb(129,"div",42),V.Rb(130,"input",44),V.Vb(),V.Vb(),V.Wb(131,"div",25),V.Wb(132,"label",41),V.Pc(133," Net Financing Amount "),V.Vb(),V.Wb(134,"div",42),V.Rb(135,"input",45),V.Vb(),V.Vb(),V.Vb(),V.Wb(136,"div",40),V.Wb(137,"div",25),V.Wb(138,"label",41),V.Pc(139," Remark "),V.Vb(),V.Wb(140,"div",42),V.Rb(141,"textarea",46),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(142,"hr"),V.Wb(143,"div",25),V.Wb(144,"label",26),V.Pc(145," Validated By "),V.Vb(),V.Wb(146,"div",28),V.Rb(147,"p-dropdown",47),V.Vb(),V.Wb(148,"label",26),V.Pc(149," Argeement No. "),V.Vb(),V.Wb(150,"div",28),V.Rb(151,"input",48),V.Vb(),V.Vb(),V.Wb(152,"div",25),V.Wb(153,"div",40),V.Wb(154,"div",25),V.Wb(155,"label",41),V.Pc(156," Approved By "),V.Vb(),V.Wb(157,"div",42),V.Rb(158,"p-dropdown",49),V.Vb(),V.Vb(),V.Vb(),V.Wb(159,"div",40),V.Wb(160,"div",25),V.Wb(161,"label",41),V.Pc(162," Required Documents "),V.Vb(),V.Wb(163,"div",42),V.Rb(164,"textarea",50),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(165,"hr"),V.Nc(166,Lt,31,3,"div",51),V.Nc(167,It,31,3,"div",51),V.Wb(168,"div",52),V.Wb(169,"div",53),V.Wb(170,"button",54),V.Pc(171,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(172,"br"),V.Wb(173,"div",52),V.Wb(174,"h3"),V.Pc(175,"File Library"),V.Vb(),V.Wb(176,"p"),V.Pc(177,"Work on this section will be done later"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(178,"div",55,56),V.Wb(180,"div",57),V.Wb(181,"div",58),V.Wb(182,"div",59),V.Wb(183,"h4",60),V.Pc(184,"Success"),V.Vb(),V.Vb(),V.Wb(185,"div",61),V.Wb(186,"p"),V.Pc(187),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(188,"div",62,63),V.Wb(190,"div",64),V.Wb(191,"div",58),V.Wb(192,"div",59),V.Wb(193,"h4",60),V.Pc(194,"Error"),V.Vb(),V.Vb(),V.Wb(195,"div",61),V.Wb(196,"p"),V.Pc(197),V.Vb(),V.Vb(),V.Rb(198,"div",65),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.Db(1),V.rc("formGroup",e.fpsEditForm),V.Db(15),V.Rc(" ",e.oppt_details.customer.company_name," "),V.Db(6),V.Qc(e.form_controls.fps_no.value),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(5),V.rc("options",e.fpsStatusList),V.Db(8),V.Rc(" ",V.nc(43,21,e.oppt_details.created_at,"dd-MMM-yyyy")," "),V.Db(7),V.Rc(" ",e.current_apportunity_id," "),V.Db(29),V.rc("options",e.payment_frequency_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_payment_frequency")),V.Db(4),V.rc("options",e.tenure_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_tenure_id")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_financier_id")),V.Db(11),V.rc("readonly",!0),V.Db(44),V.rc("options",e.fps_user_list),V.Db(4),V.rc("readonly",9!=e.fpsEditForm.controls.fps_status_id.value),V.Db(7),V.rc("options",e.fps_user_list),V.Db(8),V.rc("ngIf",e.has_min_procedure),V.Db(1),V.rc("ngIf",e.has_consumable_usage),V.Db(20),V.Qc(e.alertBody),V.Db(10),V.Qc(e.alertBody))},directives:[p.z,p.q,p.j,p.c,p.p,p.h,k.a,O,p.u,s.p,b.a,p.d,s.o,p.k,f.f,f.e],pipes:[s.f],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),Qt)},{path:"sku-listing",component:st},{path:"sku-create",component:Wt},{path:"sku-edit",component:Wt},{path:":id/sku-edit",component:Dt},{path:"**",redirectTo:"fps-listing"}],jt=((Gt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Gt)},Gt.\u0275mod=V.Ob({type:Gt}),Gt.\u0275inj=V.Nb({imports:[[f.g.forChild(Bt)],f.g]}),Gt),Kt=((zt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||zt)},zt.\u0275mod=V.Ob({type:zt}),zt.\u0275inj=V.Nb({imports:[[s.c,jt,m.h,p.l,p.v,b.b,c.b,l.a,u.b]]}),zt)}}])}();