(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{mXvY:function(t,e,n){"use strict";n.r(e),n.d(e,"UserModule",function(){return Wt});var i=n("SVse"),o=n("s7LF"),a=n("iInd"),r=n("alOh"),c=n("8Y7J"),s=n("y1st"),l=n("gtx6"),d=n("ZRSf"),b=n("hhfa"),u=n("LqlI"),p=n("FjU+");const g=["successModal"],h=["dangerModal"];function m(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",45),c.gc("click",function(){return c.Fc(t),c.kc().addPriceLevelApproval()}),c.Rb(1,"i",46),c.Vb()}}function f(t,e){if(1&t){const t=c.Xb();c.Wb(0,"a",51),c.gc("click",function(){c.Fc(t);const e=c.kc().index;return c.kc().deletePriceLevelRow(e)}),c.Rb(1,"i",52),c.Vb()}}const v=function(){return{width:"380px"}},_=function(){return{width:"300px"}};function y(t,e){if(1&t&&(c.Wb(0,"div",47),c.Wb(1,"div",8),c.Wb(2,"div",9),c.Wb(3,"div",10),c.Wb(4,"label"),c.Qc(5,"Amount: "),c.Wb(6,"span",11),c.Qc(7,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"div",12),c.Rb(9,"p-inputNumber",48),c.Vb(),c.Vb(),c.Vb(),c.Wb(10,"div",8),c.Wb(11,"div",9),c.Wb(12,"div",10),c.Wb(13,"label"),c.Qc(14,"Approve By: "),c.Wb(15,"span",11),c.Qc(16,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(17,"div",12),c.Rb(18,"p-dropdown",49),c.Oc(19,f,2,0,"a",50),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t){const t=e.index,n=c.kc();c.rc("formGroupName",t),c.Db(9),c.Kc(c.uc(10,v)),c.rc("disabled",n.isUserViewLoa),c.Db(9),c.Kc(c.uc(11,_)),c.rc("options",n.userList)("required",!0)("disabled",n.isUserViewLoa),c.Db(1),c.rc("ngIf",!n.isUserViewLoa)}}function C(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",53),c.gc("click",function(){return c.Fc(t),c.kc().createUserLoad()}),c.Qc(1," SAVE "),c.Vb()}}function M(t,e){1&t&&(c.Wb(0,"div",54),c.Wb(1,"tr",55),c.Wb(2,"th",56),c.Wb(3,"div",57),c.Qc(4," Created Date "),c.Wb(5,"div",58),c.Rb(6,"p-sortIcon",59),c.Rb(7,"p-columnFilter",60),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"th",61),c.Wb(9,"div",57),c.Qc(10," UnitName "),c.Wb(11,"div",62),c.Rb(12,"p-sortIcon",63),c.Rb(13,"p-columnFilter",64),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"th",65),c.Wb(15,"div",57),c.Qc(16," Unit Code "),c.Wb(17,"div",66),c.Rb(18,"p-sortIcon",67),c.Rb(19,"p-columnFilter",68),c.Vb(),c.Vb(),c.Vb(),c.Wb(20,"th",69),c.Wb(21,"div",57),c.Qc(22," Action "),c.Rb(23,"div",70),c.Vb(),c.Vb(),c.Vb(),c.Vb())}function V(t,e){if(1&t&&(c.Wb(0,"div"),c.Qc(1),c.lc(2,"date"),c.Vb()),2&t){const t=c.kc().$implicit;c.Db(1),c.Sc(" ",c.nc(2,1,t.created_at,"MM-dd-yyyy")," ")}}function P(t,e){1&t&&(c.Wb(0,"div"),c.Qc(1,"_"),c.Vb())}function O(t,e){if(1&t){const t=c.Xb();c.Wb(0,"tr",71),c.Wb(1,"td",72),c.Oc(2,V,3,4,"div",73),c.Oc(3,P,2,0,"div",73),c.Vb(),c.Wb(4,"td",72),c.Qc(5),c.Vb(),c.Wb(6,"td",72),c.Qc(7),c.Vb(),c.Wb(8,"td",72),c.Wb(9,"a",74),c.gc("click",function(){c.Fc(t);const n=e.$implicit;return c.kc().viewUserLoaDetail(n.id)}),c.Vb(),c.Wb(10,"a",51),c.gc("click",function(){c.Fc(t);const n=e.$implicit;return c.kc().goForEdit(n.id)}),c.Rb(11,"i",75),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit;c.Db(2),c.rc("ngIf",t.created_at),c.Db(1),c.rc("ngIf",!t.created_at),c.Db(2),c.Sc(" ",t.title," "),c.Db(2),c.Sc(" ",t.code," ")}}const W=function(){return["created_at","code","title"]},x=function(){return{showAll:"All"}},w=function(t){return[t,10,25,50]};let A=(()=>{class t{constructor(t,e,n,i){this.formBuilder=t,this.router=e,this.systemAdminSerive=n,this.location=i,this.userList=[],this.allUnits=[],this.alertBody="",this.priceApprovalChk=!0,this.authorityForm=this.formBuilder.group({unit:"",paymentTermApproval:"",personInCharges:"",amount:"",approve_by:"",profitMargin:"",discount:"",cellingPriceAmount:"",cellingPriceApproval:"",priceApprovel:this.formBuilder.array([])})}ngOnInit(){this.getUserRole(),this.getAllUnits(),this.addPriceLevelApproval(),console.log("this.authorityForm.value =>",this.authorityForm.value)}createUserLoad(){let t={parent_unit_id:this.authorityForm.value.unit,pic_user_id:this.authorityForm.value.personInCharges,profit_margin:this.authorityForm.value.profitMargin,approval_discount:this.authorityForm.value.discount,celling_price_amount:this.authorityForm.value.cellingPriceAmount,celling_price_approval_id:this.authorityForm.value.cellingPriceApproval,price_level_approval:this.authorityForm.value.priceApprovel};if(this.unitId){let e=t.price_level_approval;for(let t=0;t<e.length;t++)console.log("alsdk",e[t]),this.priceApprovalChk=""!=e[t].amount&&""!=e[t].approve_by;this.priceApprovalChk&&this.systemAdminSerive.putQuery("/units/level-approval/"+this.unitId,t).subscribe(t=>{console.log("user-loa-res:",t),this.alertBody=t.message,this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.authorityForm.reset()},2e3)},t=>{console.log("Error:",t),this.alertBody=t.error.message,this.dangerModal.show()}),this.systemAdminSerive.putQuery("/units/level-approval/"+this.unitId,t).subscribe(t=>{console.log("user-loa-res:",t),this.alertBody=t.message,this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.authorityForm.reset(),this.getPriceApprovelForm().clear(),this.addPriceLevelApproval()},2e3)},t=>{console.log("Error:",t),this.alertBody=t.error.message,this.dangerModal.show()})}else this.alertBody="Please select unit first",this.dangerModal.show()}getUserRole(){this.systemAdminSerive.getQuery("/user-role").subscribe(t=>{console.log("user-role-data:",t),this.userList=t.data})}getAllUnits(){this.systemAdminSerive.getQuery("/units").subscribe(t=>{console.log("Unit-res:",t),this.allUnits=t.data})}goForEdit(t){this.unitId=t,this.systemAdminSerive.getQuery("/units/level-approval/"+this.unitId).subscribe(t=>{var e,n,i,o,a,r,c,s,l,d;this.authorityForm.value.priceApprovel.length&&this.getPriceApprovelForm().removeAt(0),null===(e=null==t?void 0:t.data)||void 0===e||e.price_levels.forEach(t=>{this.getPriceApprovelForm().push(this.formBuilder.group({amount:t.level_amount,approve_by:t.approval_personel_id}))}),this.authorityForm.patchValue({unit:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.parent_unit_id,personInCharges:null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.pic)||void 0===o?void 0:o.id,profitMargin:null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.min_profit_margin_percentage,discount:null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.allowed_discount_percentage,cellingPriceAmount:null===(s=null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.ceiling)||void 0===s?void 0:s.ceiling_amount,cellingPriceApproval:null===(d=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.ceiling)||void 0===d?void 0:d.approval_personel_id})})}resetForm(){this.isUserViewLoa=!1,this.authorityForm.reset(),this.getPriceApprovelForm().clear(),this.addPriceLevelApproval()}viewUserLoaDetail(t){this.isUserViewLoa=!0,this.goForEdit(t)}addPriceLevelApproval(){this.getPriceApprovelForm().push(this.newPriceApprovelFields())}deletePriceLevelRow(t){this.getPriceApprovelForm().removeAt(t)}getPriceApprovelForm(){return this.authorityForm.get("priceApprovel")}newPriceApprovelFields(){return this.formBuilder.group({amount:"",approve_by:""})}dynamicForm(){console.log("array form ",this.authorityForm.value)}back(){this.router.navigateByUrl("user/adduser")}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(o.e),c.Qb(a.c),c.Qb(r.a),c.Qb(i.l))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-user-loa"]],viewQuery:function(t,e){if(1&t&&(c.Vc(g,1),c.Vc(h,1)),2&t){let t;c.Cc(t=c.hc())&&(e.successModal=t.first),c.Cc(t=c.hc())&&(e.dangerModal=t.first)}},decls:106,vars:46,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"header-text"],[1,"pi","pi-user-plus"],[3,"formGroup"],[1,"card-body"],[1,"title-text"],[1,"authority-text","row","mb-3"],[1,"col-md-6"],[1,"row"],[1,"col-3","mt-2"],[1,"red-star"],[1,"col-9"],["id","opc","name","picList","formControlName","unit","optionLabel","title","optionValue","id","placeholder","Select parent unit",3,"options","required","disabled"],["id","opc","name","picList","formControlName","personInCharges","optionLabel","full_name","optionValue","id","placeholder","Select In-charges",3,"options","required","disabled"],[1,"authority-text-1","row","mb-4"],["type","text","pInputText","","placeholder","0","formControlName","profitMargin","inputId","integeronly","inputId","withoutgrouping"],["type","text","pInputText","","placeholder","0","formControlName","discount","inputId","integeronly","inputId","withoutgrouping"],[1,"celling-approval"],[1,"authority-text-1","row","mb-2"],["type","text","pInputText","","placeholder","0","formControlName","cellingPriceAmount","inputId","integeronly","inputId","withoutgrouping"],["id","opc","name","picList","formControlName","cellingPriceApproval","optionLabel","full_name","optionValue","id","placeholder","Select celling price approval",3,"options","required","disabled"],[1,"price-action"],["class","btn btn-icon btn-outline-primary","icon","pi pi-check",3,"click",4,"ngIf"],["formArrayName","priceApprovel"],["class","price-level row mt-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],[1,"authority-table"],["styleClass","p-datatable-authority","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["icon","pi pi-check",1,"btn","btn-icon","btn-outline-primary",3,"click"],[1,"cil-plus","c-icon"],[1,"price-level","row","mt-4",3,"formGroupName"],["name","","formControlName","amount","inputId","integeronly","inputId","withoutgrouping",3,"disabled"],["id","opc","name","picList","formControlName","approve_by","optionLabel","full_name","optionValue","id","placeholder","Select Approve By",3,"options","required","disabled"],["routerLinkActive","router-link-active",3,"routerLink","click",4,"ngIf"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash",2,"font-size","18px","padding-left","2rem"],["type","button",1,"btn","btn-primary","save-btn",3,"click"],[1,"table-header-column"],["align","center",2,"background-color","#009aff !important","color","white"],["pSortableColumn","created_at",1,"text-center"],[1,"column-design"],[1,"date-icons"],["field","created_at"],["type","date","field","created_at","display","menu",1,"p-ml-auto"],["pSortableColumn","name",1,"text-center"],[1,"name-icons"],["field","name"],["type","text","field","name","display","menu",1,"p-ml-auto"],["pSortableColumn","rate",1,"text-center"],[1,"rate-icons"],["field","rate"],["type","text","field","rate","display","menu",1,"p-ml-auto"],["pSortableColumn","action",1,"text-center"],[1,"action-icons"],["align","center"],[1,"text-center"],[4,"ngIf"],["href","#",1,"fa","fa-eye",2,"margin","10px",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"h2"),c.Rb(4,"i",3),c.Qc(5," Level Of Approval "),c.Vb(),c.Vb(),c.Vb(),c.Wb(6,"form",4),c.Wb(7,"div",5),c.Wb(8,"p",6),c.Qc(9," Add Level Of Approval "),c.Vb(),c.Wb(10,"div",7),c.Wb(11,"div",8),c.Wb(12,"div",9),c.Wb(13,"div",10),c.Wb(14,"label"),c.Qc(15,"Unit: "),c.Wb(16,"span",11),c.Qc(17,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"div",12),c.Rb(19,"p-dropdown",13),c.Vb(),c.Vb(),c.Vb(),c.Wb(20,"div",8),c.Wb(21,"div",9),c.Wb(22,"div",10),c.Wb(23,"label"),c.Qc(24," Person Incharge:"),c.Wb(25,"span",11),c.Qc(26,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(27,"div",12),c.Rb(28,"p-dropdown",14),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(29,"div",15),c.Wb(30,"div",8),c.Wb(31,"div",9),c.Wb(32,"div",10),c.Wb(33,"label"),c.Qc(34,"Profit Margin: "),c.Wb(35,"span",11),c.Qc(36,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(37,"div",12),c.Rb(38,"input",16),c.Vb(),c.Vb(),c.Vb(),c.Wb(39,"div",8),c.Wb(40,"div",9),c.Wb(41,"div",10),c.Wb(42,"label"),c.Qc(43,"Approval Discount:"),c.Wb(44,"span",11),c.Qc(45,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(46,"div",12),c.Rb(47,"input",17),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(48,"div",18),c.Wb(49,"h4"),c.Qc(50,"Celling Level Approval"),c.Vb(),c.Vb(),c.Wb(51,"div",19),c.Wb(52,"div",8),c.Wb(53,"div",9),c.Wb(54,"div",10),c.Wb(55,"label"),c.Qc(56,"Celling Price Amount: "),c.Wb(57,"span",11),c.Qc(58,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(59,"div",12),c.Rb(60,"input",20),c.Vb(),c.Vb(),c.Vb(),c.Wb(61,"div",8),c.Wb(62,"div",9),c.Wb(63,"div",10),c.Wb(64,"label"),c.Qc(65,"Celling Price Approval:"),c.Wb(66,"span",11),c.Qc(67,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(68,"div",12),c.Rb(69,"p-dropdown",21),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(70,"div",22),c.Wb(71,"h4"),c.Qc(72,"Price Level Approval"),c.Vb(),c.Oc(73,m,2,0,"button",23),c.Vb(),c.Wb(74,"div",24),c.Oc(75,y,20,12,"div",25),c.Vb(),c.Wb(76,"div",26),c.Wb(77,"button",27),c.gc("click",function(){return e.resetForm()}),c.Qc(78," CANCEL "),c.Vb(),c.Oc(79,C,2,0,"button",28),c.Vb(),c.Wb(80,"div",29),c.Wb(81,"p-table",30,31),c.Oc(83,M,24,0,"ng-template",32),c.Oc(84,O,12,4,"ng-template",33),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(85,"div",34,35),c.Wb(87,"div",36),c.Wb(88,"div",37),c.Wb(89,"div",38),c.Wb(90,"h4",39),c.Qc(91,"Success"),c.Vb(),c.Vb(),c.Wb(92,"div",40),c.Wb(93,"p"),c.Qc(94),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(95,"div",41,42),c.Wb(97,"div",43),c.Wb(98,"div",37),c.Wb(99,"div",38),c.Wb(100,"h4",39),c.Qc(101,"Error"),c.Vb(),c.Vb(),c.Wb(102,"div",40),c.Wb(103,"p"),c.Qc(104),c.Vb(),c.Vb(),c.Rb(105,"div",44),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Db(6),c.rc("formGroup",e.authorityForm),c.Db(13),c.Kc(c.uc(36,v)),c.rc("options",e.allUnits)("required",!0)("disabled",e.isUserViewLoa),c.Db(9),c.Kc(c.uc(37,v)),c.rc("options",e.userList)("required",!0)("disabled",e.isUserViewLoa),c.Db(10),c.Kc(c.uc(38,v)),c.Eb("disabled",e.isUserViewLoa?"":null),c.Db(9),c.Kc(c.uc(39,v)),c.Eb("disabled",e.isUserViewLoa?"":null),c.Db(13),c.Kc(c.uc(40,v)),c.Eb("disabled",e.isUserViewLoa?"":null),c.Db(9),c.Kc(c.uc(41,v)),c.rc("options",e.userList)("required",!0)("disabled",e.isUserViewLoa),c.Db(4),c.rc("ngIf",!e.isUserViewLoa),c.Db(2),c.rc("ngForOf",e.getPriceApprovelForm().controls),c.Db(4),c.rc("ngIf",!e.isUserViewLoa),c.Db(2),c.rc("value",e.allUnits)("globalFilterFields",c.uc(42,W))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.vc(44,w,c.uc(43,x))),c.Db(13),c.Rc(e.alertBody),c.Db(10),c.Rc(e.alertBody))},directives:[o.z,o.q,o.j,s.a,o.p,o.h,o.w,o.c,l.a,i.p,o.d,i.o,d.f,b.h,u.a,o.k,p.a,a.f,a.e,d.e,d.d,d.a],pipes:[i.f],styles:[".card[_ngcontent-%COMP%]{border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.main-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-family:Lato}.main-div[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;font-size:1.5rem}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;margin-left:10px}.main-div[_ngcontent-%COMP%]   .celling-approval[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-top:40px;margin-bottom:20px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;margin-top:12px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px;font-weight:600;font-size:16px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:-6px;font-size:16px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:35px 20px 20px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .country-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .date-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .main_unit-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .name-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .rate-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .sub_unit-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem}[_nghost-%COMP%]     .table-header-column{display:contents}[_nghost-%COMP%]     .p-datatable table{border:2px solid #d3d3d3;border-collapse:collapse;table-layout:fixed;width:100%;overflow:hidden;border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column{-ms-user-select:none;-webkit-user-select:none;cursor:pointer;user-select:none;padding:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column:focus{box-shadow:none;outline:0 none}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{color:#f8f9fa;margin-left:.5rem}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon:hover{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open{background:#76b8ee}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open, [_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open:hover{background:#e9ecef52;color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button:hover{color:#495057;border-color:transparent;background:rgba(0,0,0,.14)}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-progressbar{height:.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .table-header-column{display:contents;padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable-authority .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-datatable.p-datatable-authority atatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}"]}),t})();var k=n("c/fn"),U=n("+yXi");const Q=["successModal"],F=["dangerModal"];function R(t,e){1&t&&c.Rb(0,"img",45)}function D(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",46),c.Wb(1,"p-checkbox",47),c.gc("ngModelChange",function(e){return c.Fc(t),c.kc().selectAgency=e}),c.Vb(),c.Wb(2,"label"),c.Qc(3),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,n=c.kc();c.Db(1),c.rc("value",t)("ngModel",n.selectAgency)("inputId",t.agency_code)("disabled",n.isViewUnit),c.Db(2),c.Rc(t.agency)}}function I(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",46),c.Wb(1,"p-checkbox",48),c.gc("ngModelChange",function(e){return c.Fc(t),c.kc().selectManufectures=e}),c.Vb(),c.Wb(2,"label"),c.Qc(3),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,n=c.kc();c.Db(1),c.rc("value",t)("inputId",t.manufacturer_code)("ngModel",n.selectManufectures)("disabled",n.isViewUnit),c.Db(2),c.Rc(t.manufacturer)}}function L(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",46),c.Wb(1,"p-checkbox",48),c.gc("ngModelChange",function(e){return c.Fc(t),c.kc().selectOpc=e}),c.Vb(),c.Wb(2,"label"),c.Qc(3),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,n=c.kc();c.Db(1),c.rc("value",t)("inputId",t.opc_code)("ngModel",n.selectOpc)("disabled",n.isViewUnit),c.Db(2),c.Rc(t.opc)}}function S(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",46),c.Wb(1,"p-checkbox",47),c.gc("ngModelChange",function(e){return c.Fc(t),c.kc().selectedCareArea=e}),c.Vb(),c.Wb(2,"label"),c.Qc(3),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,n=c.kc();c.Db(1),c.rc("value",t)("ngModel",n.selectedCareArea)("inputId",t.code)("disabled",n.isViewUnit),c.Db(2),c.Rc(t.care_area)}}function N(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",46),c.Wb(1,"p-checkbox",47),c.gc("ngModelChange",function(e){return c.Fc(t),c.kc().selectPrinciples=e}),c.Vb(),c.Wb(2,"label"),c.Qc(3),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,n=c.kc();c.Db(1),c.rc("value",t)("ngModel",n.selectPrinciples)("inputId",t.principal_code)("disabled",n.isViewUnit),c.Db(2),c.Rc(t.description)}}function E(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",49),c.gc("click",function(){return c.Fc(t),c.kc().createUnit()}),c.Qc(1),c.Vb()}if(2&t){const t=c.kc();c.Db(1),c.Sc(" ",t.isEditEnabled?"Update":"Create"," ")}}function B(t,e){1&t&&(c.Wb(0,"div",50),c.Wb(1,"tr",51),c.Wb(2,"th",52),c.Wb(3,"div",53),c.Qc(4," Created Date "),c.Wb(5,"div",54),c.Rb(6,"p-sortIcon",55),c.Rb(7,"p-columnFilter",56),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"th",57),c.Wb(9,"div",53),c.Qc(10," Unit Name "),c.Wb(11,"div",58),c.Rb(12,"p-sortIcon",59),c.Rb(13,"p-columnFilter",60),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"th",61),c.Wb(15,"div",53),c.Qc(16," Unit Code "),c.Wb(17,"div",62),c.Rb(18,"p-sortIcon",63),c.Rb(19,"p-columnFilter",64),c.Vb(),c.Vb(),c.Vb(),c.Wb(20,"th",65),c.Wb(21,"div",53),c.Qc(22," Action "),c.Rb(23,"div",66),c.Vb(),c.Vb(),c.Vb(),c.Vb())}function T(t,e){if(1&t&&(c.Wb(0,"div"),c.Qc(1),c.lc(2,"date"),c.Vb()),2&t){const t=c.kc().$implicit;c.Db(1),c.Sc(" ",c.nc(2,1,t.created_at,"MM-dd-yyyy")," ")}}function j(t,e){1&t&&(c.Wb(0,"div"),c.Qc(1,"_"),c.Vb())}function K(t,e){if(1&t){const t=c.Xb();c.Wb(0,"tr",67),c.Wb(1,"td",68),c.Oc(2,T,3,4,"div",69),c.Oc(3,j,2,0,"div",69),c.Vb(),c.Wb(4,"td",68),c.Qc(5),c.Vb(),c.Wb(6,"td",68),c.Qc(7),c.Vb(),c.Wb(8,"td",68),c.Wb(9,"a",70),c.gc("click",function(){c.Fc(t);const n=e.$implicit;return c.kc().viewUnitSetDetail(n.id)}),c.Vb(),c.Wb(10,"a",71),c.gc("click",function(){c.Fc(t);const n=e.$implicit;return c.kc().getUnit(n.id)}),c.Rb(11,"i",72),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit;c.Db(2),c.rc("ngIf",t.created_at),c.Db(1),c.rc("ngIf",!t.created_at),c.Db(2),c.Sc(" ",t.title||""," "),c.Db(2),c.Sc(" ",t.code||""," ")}}const z=function(){return{width:"100%"}},X=function(){return["created_at","code","title"]},q=function(){return{showAll:"All"}},$=function(t){return[t,10,25,50]};let G=(()=>{class t{constructor(t,e,n){this.systemAdminService=t,this.formBuilder=e,this.router=n,this.inputfield="#ffffff",this.dummyUserSetupData=[],this.parenUnit=[],this.agency=[],this.manufactures=[],this.opc=[],this.careArea=[],this.principles=[],this.selectParentUnit="",this.selectAgency=[],this.selectManufectures=[],this.selectManufecturesData=[],this.selectOpc=[],this.selectedCareArea=[],this.selectPrinciples=[],this.userList=[],this.companies=[],this.company_Id="",this.unit_Name="",this.unit_Code="",this.isEditEnabled=!1,this.editedUnit=[],this.alertBody="",this.selectedAllUnits=[],this.userSetupForm=this.formBuilder.group({name:"",code:"",dataAreaId:"",parentUnit:"",agency:"",manufacture:"",opc:"",careArea:"",principles:""})}ngOnInit(){this.getParentUnit(),this.getAgency(),this.getManufactures(),this.getOpc(),this.getCareArea(),this.getPrinciples(),this.systemAdminService.getAllCompamanies().subscribe(t=>{t.data.forEach(t=>{this.companies.push(t)})}),this.systemAdminService.getQuery("/units").subscribe(t=>{var e;this.allUnits=t,this.selectedAllUnits=null===(e=this.allUnits)||void 0===e?void 0:e.data,this.selectedAllUnits.forEach(t=>{t.created_at&&(t.created_at=new Date(t.created_at))})})}createUnit(){let t={};t={name:this.unit_Name,code:this.unit_Code,dataAreaId:this.company_Id,min_profit_margin_percentage:"0.00",allowed_discount_percentage:"0.20",parent_unit:this.selectParentUnit.toString(),unit_agencies:this.selectAgency,unit_manufactures:this.selectManufectures,unit_opcs:this.selectOpc,unit_care_areas:this.selectedCareArea,unit_principals:this.selectPrinciples},this.isEditEnabled?this.systemAdminService.putQuery("/units/"+this.unitId,t).subscribe(t=>{if(t.success){let e=this.selectedAllUnits.find(e=>e.id==t.data.id);e&&(this.selectedAllUnits[this.selectedAllUnits.indexOf(e)]=t.data),this.alertBody="Unit Updated successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.resetForm()},2e3)}},t=>{console.log("Error:",t),this.alertBody=t.error.message,this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)}):this.systemAdminService.postQuery("/units",t).subscribe(t=>{t.success&&(this.selectedAllUnits.push(t.data),this.alertBody="Unit saved successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.resetForm()},2e3))},t=>{console.log("Error:",t),this.alertBody=t.error.message,this.dangerModal.show(),setTimeout(()=>{this.dangerModal.hide()},2e3)})}selectUser(){}getParentUnit(){this.systemAdminService.getQuery("/units").subscribe(t=>{console.log("parent-unit:",t),this.parenUnit=t.data})}getAgency(){this.systemAdminService.getQuery("/agency/active-list").subscribe(t=>{console.log("agency-res:",t),this.agency=t.data})}changeAgency(t){console.log("code:",t),this.selectAgency.push(t),console.log("selectAgency:",this.selectAgency)}getManufactures(){this.systemAdminService.getQuery("/manufacturer/active-list").subscribe(t=>{console.log("manufactures-res:",t),this.manufactures=t.data})}changeManufectures(t,e){console.log("value:",this.userSetupForm.value.manufacture),console.log("Manufecture:",e),this.selectManufectures.push(e),console.log("selectManufectures:",this.selectManufectures)}getOpc(){this.systemAdminService.getQuery("/opc/active-list").subscribe(t=>{console.log("opc-res:",t),this.opc=t.data})}changeOPC(t){console.log("opc:",t),this.selectOpc.push(t),console.log("opc-arr:",this.selectOpc)}getCareArea(){this.systemAdminService.getQuery("/care-area/active-list").subscribe(t=>{console.log("care-area:",t),this.careArea=t.data})}selectCareArea(t){console.log("care_area:",t),this.selectedCareArea.push(t)}getPrinciples(){this.systemAdminService.getQuery("/principal/active-list").subscribe(t=>{console.log("principles-res:",t),this.principles=t.data})}changePrinciples(t){console.log("value:",this.userSetupForm.value.principles),console.log("principles:",t),this.selectPrinciples.push(t)}getUnit(t){this.unitId=t,this.systemAdminService.getQuery("/units/"+t+"/edit").subscribe(t=>{if(t.success){this.editedUnit=t.data,this.isEditEnabled=!0;let e=t.data;e.parent.id&&(this.selectParentUnit=e.parent.id),e.title&&(this.unit_Name=e.title),e.code&&(this.unit_Code=e.code),e.data_area_id&&(this.company_Id=e.data_area_id),setTimeout(()=>{var t=[];e.unit_agencies.forEach(e=>{this.agency.filter(t=>{var n;return t.id==(null===(n=e.agency)||void 0===n?void 0:n.id)}).forEach(e=>{t.push(e)})}),this.selectAgency=t},300),setTimeout(()=>{var t=[];e.unit_manufactures.forEach(e=>{this.manufactures.filter(t=>{var n;return t.id==(null===(n=e.manufacturer)||void 0===n?void 0:n.id)}).forEach(e=>{t.push(e)})}),this.selectManufectures=t},300),setTimeout(()=>{var t=[];e.unit_opcs.forEach(e=>{this.opc.filter(t=>{var n;return t.id==(null===(n=e.opc)||void 0===n?void 0:n.id)}).forEach(e=>{t.push(e)})}),this.selectOpc=t},300),this.selectOpc=e.unit_opcs,setTimeout(()=>{var t=[];e.unit_care_areas.forEach(e=>{this.careArea.filter(t=>{var n;return t.id==(null===(n=e.care_area)||void 0===n?void 0:n.id)}).forEach(e=>{t.push(e)})}),this.selectedCareArea=t},2e3),setTimeout(()=>{var t=[];e.unit_principals.forEach(e=>{this.principles.filter(t=>{var n;return t.id==(null===(n=e.principal)||void 0===n?void 0:n.id)}).forEach(e=>{t.push(e)})}),this.selectPrinciples=t},300),console.log("this is the response if ",t)}})}isValidate(){return null!=this.selectParentUnit&&null!=this.selectOpc&&null!=this.selectPrinciples&&null!=this.selectAgency&&""!=this.unit_Code&&""!=this.unit_Name&&""!=this.company_Id&&null!=this.selectedCareArea&&null!=this.selectManufectures}viewUnitSetDetail(t){this.isViewUnit=!0,this.getUnit(t)}resetForm(){this.isViewUnit=!1,this.selectParentUnit=null,this.selectOpc=null,this.selectPrinciples=null,this.selectAgency=null,this.unit_Code="",this.unit_Name="",this.isEditEnabled=!1,this.company_Id="",this.selectedCareArea=null,this.selectManufectures=null,this.selectPrinciples=null}back(){this.router.navigateByUrl("user/adduser")}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a),c.Qb(o.e),c.Qb(a.c))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-user-setup"]],viewQuery:function(t,e){if(1&t&&(c.Vc(Q,1),c.Vc(F,1)),2&t){let t;c.Cc(t=c.hc())&&(e.successModal=t.first),c.Cc(t=c.hc())&&(e.dangerModal=t.first)}},decls:97,vars:34,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"unit-head"],["styleClass","p-button-outlined",1,"back-p-btn",3,"click"],["pTemplate","content"],[1,"card-body"],[1,"title-text"],[1,"row","mt-3","mb-3"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2"],[1,"col-lg-5","col-md-5","col-sm-5"],["placeholder","Select Company","optionLabel","title","optionValue","data_area_id",3,"options","ngModel","disabled","ngModelChange"],["placeholder","Select parent unit","optionLabel","title","optionValue","id",3,"options","ngModel","disabled","ngModelChange"],[1,"row","mb-5"],[2,"width","100px"],["type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange"],[1,"red-star"],[1,"card-list"],[1,"card","unit-card"],[1,"card-header"],["class","p-field-checkbox check-field",4,"ngFor","ngForOf"],[1,"card-list-2"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],[1,"row","mt-5"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","id","search-input","placeholder","Search...",1,"form-control","ds-input",2,"position","relative","vertical-align","top",3,"input"],[1,"authority-table"],["styleClass","p-datatable-authority","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["src","../../../../assets/img/icons/back-arrow.svg","alt","",2,"width","17px"],[1,"p-field-checkbox","check-field"],["name","group2",3,"value","ngModel","inputId","disabled","ngModelChange"],["name","group2",3,"value","inputId","ngModel","disabled","ngModelChange"],["type","button",1,"btn","btn-primary","save-btn",3,"click"],[1,"table-header-column"],["align","center",2,"background-color","#009aff !important","color","white"],["pSortableColumn","created_at",1,"text-center"],[1,"column-design"],[1,"date-icons"],["field","created_at"],["type","date","field","created_at","display","menu",1,"p-ml-auto"],["pSortableColumn","unit_name",1,"text-center"],[1,"name-icons"],["field","title"],["type","text","field","title","display","menu",1,"p-ml-auto"],["pSortableColumn","code",1,"text-center"],[1,"country-icons"],["field","code"],["type","text","field","code","display","menu",1,"p-ml-auto"],["pSortableColumn","action",1,"text-center"],[1,"action-icons"],["align","center"],[1,"text-center"],[4,"ngIf"],["href","#",1,"fa","fa-eye",2,"margin","10px",3,"routerLink","click"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"h2"),c.Qc(4,"Unit Setup"),c.Vb(),c.Wb(5,"div"),c.Wb(6,"p-button",3),c.gc("click",function(){return e.back()}),c.Oc(7,R,1,0,"ng-template",4),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"div",5),c.Wb(9,"p",6),c.Qc(10," Details "),c.Vb(),c.Wb(11,"div",7),c.Wb(12,"div",8),c.Wb(13,"label"),c.Qc(14,"Company:"),c.Vb(),c.Vb(),c.Wb(15,"div",9),c.Wb(16,"p-dropdown",10),c.gc("ngModelChange",function(t){return e.company_Id=t}),c.Vb(),c.Vb(),c.Wb(17,"div",8),c.Wb(18,"label"),c.Qc(19,"Parent Unit:"),c.Vb(),c.Vb(),c.Wb(20,"div",9),c.Wb(21,"p-dropdown",11),c.gc("ngModelChange",function(t){return e.selectParentUnit=t}),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",12),c.Wb(23,"div",8),c.Wb(24,"label",13),c.Qc(25,"Unit Name:"),c.Vb(),c.Vb(),c.Wb(26,"div",9),c.Wb(27,"input",14),c.gc("ngModelChange",function(t){return e.unit_Name=t}),c.Vb(),c.Vb(),c.Wb(28,"div",8),c.Wb(29,"label"),c.Qc(30,"Code:"),c.Wb(31,"span",15),c.Qc(32,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(33,"div",9),c.Wb(34,"input",14),c.gc("ngModelChange",function(t){return e.unit_Code=t}),c.Vb(),c.Vb(),c.Vb(),c.Wb(35,"div",16),c.Wb(36,"div",17),c.Wb(37,"div",18),c.Qc(38,"Agency"),c.Vb(),c.Wb(39,"div",5),c.Oc(40,D,4,5,"div",19),c.Vb(),c.Vb(),c.Wb(41,"div",17),c.Wb(42,"div",18),c.Qc(43,"Manufactures"),c.Vb(),c.Wb(44,"div",5),c.Oc(45,I,4,5,"div",19),c.Vb(),c.Vb(),c.Wb(46,"div",17),c.Wb(47,"div",18),c.Qc(48,"OPC"),c.Vb(),c.Wb(49,"div",5),c.Oc(50,L,4,5,"div",19),c.Vb(),c.Vb(),c.Vb(),c.Wb(51,"div",20),c.Wb(52,"div",17),c.Wb(53,"div",18),c.Qc(54,"Care Area"),c.Vb(),c.Wb(55,"div",5),c.Oc(56,S,4,5,"div",19),c.Vb(),c.Vb(),c.Wb(57,"div",17),c.Wb(58,"div",18),c.Qc(59,"Principles"),c.Vb(),c.Wb(60,"div",5),c.Oc(61,N,4,5,"div",19),c.Vb(),c.Vb(),c.Vb(),c.Wb(62,"div",21),c.Wb(63,"button",22),c.gc("click",function(){return e.resetForm()}),c.Qc(64," CANCEL "),c.Vb(),c.Oc(65,E,2,1,"button",23),c.Vb(),c.Wb(66,"div",24),c.Wb(67,"div",25),c.Wb(68,"div",26),c.Rb(69,"span",27),c.Wb(70,"input",28),c.gc("input",function(e){return c.Fc(t),c.Dc(73).filterGlobal(e.target.value,"contains")}),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(71,"div",29),c.Wb(72,"p-table",30,31),c.Oc(74,B,24,0,"ng-template",32),c.Oc(75,K,12,4,"ng-template",33),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(76,"div",34,35),c.Wb(78,"div",36),c.Wb(79,"div",37),c.Wb(80,"div",38),c.Wb(81,"h4",39),c.Qc(82,"Success"),c.Vb(),c.Vb(),c.Wb(83,"div",40),c.Wb(84,"p"),c.Qc(85),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(86,"div",41,42),c.Wb(88,"div",43),c.Wb(89,"div",37),c.Wb(90,"div",38),c.Wb(91,"h4",39),c.Qc(92,"Error"),c.Vb(),c.Vb(),c.Wb(93,"div",40),c.Wb(94,"p"),c.Qc(95),c.Vb(),c.Vb(),c.Rb(96,"div",44),c.Vb(),c.Vb(),c.Vb()}2&t&&(c.Db(16),c.Kc(c.uc(28,z)),c.rc("options",e.companies)("ngModel",e.company_Id)("disabled",e.isViewUnit),c.Db(5),c.Kc(c.uc(29,z)),c.rc("options",e.parenUnit)("ngModel",e.selectParentUnit)("disabled",e.isViewUnit),c.Db(6),c.rc("ngModel",e.unit_Name),c.Eb("disabled",e.isViewUnit?"":null),c.Db(7),c.rc("ngModel",e.unit_Code),c.Eb("disabled",e.isViewUnit?"":null),c.Db(6),c.rc("ngForOf",e.agency),c.Db(5),c.rc("ngForOf",e.manufactures),c.Db(5),c.rc("ngForOf",e.opc),c.Db(6),c.rc("ngForOf",e.careArea),c.Db(5),c.rc("ngForOf",e.principles),c.Db(4),c.rc("ngIf",!e.isViewUnit),c.Db(7),c.rc("value",e.selectedAllUnits)("globalFilterFields",c.uc(30,X))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.vc(32,$,c.uc(31,q))),c.Db(13),c.Rc(e.alertBody),c.Db(10),c.Rc(e.alertBody))},directives:[k.a,b.h,s.a,o.p,o.s,o.c,l.a,i.o,i.p,d.f,u.a,U.a,d.e,d.d,d.a,a.f,a.e],pipes:[i.f],styles:[".card[_ngcontent-%COMP%]{border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.unit-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-family:Lato;overflow:hidden}.main-div[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;margin-left:10px}.main-div[_ngcontent-%COMP%]   .card-list-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:2px;grid-auto-rows:auto;margin-left:87px}.main-div[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]{border:1px solid #d3d3d3;width:274px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{max-height:300px;overflow-x:auto}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .check-field[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;margin:10px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .check-field[_ngcontent-%COMP%]   p-checkbox[_ngcontent-%COMP%]{padding-right:10px;padding-left:30px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]{width:96%;margin:0 0 10px 23px}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:3px 20px 20px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .country-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .date-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .main_unit-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .name-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .rate-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .sub_unit-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.main-view-model[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.view-action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin:20px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem}[_nghost-%COMP%]     .table-header-column{display:contents}[_nghost-%COMP%]     .p-datatable table{border:2px solid #d3d3d3;border-collapse:collapse;table-layout:fixed;width:100%;overflow:hidden;border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column{-ms-user-select:none;-webkit-user-select:none;cursor:pointer;user-select:none;padding:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column:focus{box-shadow:none;outline:0 none}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{color:#f8f9fa;margin-left:.5rem}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon:hover{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open{background:#76b8ee}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open, [_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open:hover{background:#e9ecef52;color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button:hover{color:#495057;border-color:transparent;background:rgba(0,0,0,.14)}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-progressbar{height:.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .table-header-column{display:contents;padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable-authority .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-datatable.p-datatable-authority atatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:16px;font-weight:600;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion{width:345px}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{background:#f8f9fa}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#f8f9fa}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0;max-height:260px;overflow-x:auto;display:block}"]}),t})();function J(t,e){1&t&&(c.Wb(0,"tr"),c.Wb(1,"th",22),c.Qc(2,"User Name"),c.Vb(),c.Wb(3,"th",23),c.Qc(4,"Status"),c.Vb(),c.Wb(5,"th",23),c.Qc(6,"Creaed Date"),c.Vb(),c.Wb(7,"th",24),c.Qc(8,"Action"),c.Vb(),c.Vb())}function Y(t,e){if(1&t&&(c.Wb(0,"div"),c.Qc(1),c.lc(2,"date"),c.Vb()),2&t){const t=c.kc().$implicit;c.Db(1),c.Sc(" ",c.nc(2,1,t.created_at,"dd-MMM-yyyy")," ")}}function Z(t,e){1&t&&(c.Wb(0,"div"),c.Qc(1,"_"),c.Vb())}function H(t,e){if(1&t){const t=c.Xb();c.Wb(0,"tr"),c.Wb(1,"td"),c.Qc(2),c.Vb(),c.Wb(3,"td",25),c.Qc(4),c.Vb(),c.Wb(5,"td",25),c.Oc(6,Y,3,4,"div",26),c.Oc(7,Z,2,0,"div",26),c.Vb(),c.Wb(8,"td",25),c.Wb(9,"a",27),c.gc("click",function(){c.Fc(t);const n=e.$implicit;return c.kc().getUserRoleDetail(n.id)}),c.Rb(10,"i",28),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit;c.Db(2),c.Rc(t.full_name),c.Db(2),c.Rc(t.status),c.Db(2),c.rc("ngIf",t.created_at),c.Db(1),c.rc("ngIf",!t.created_at)}}const tt=function(){return["full_name","status","created_at"]},et=function(){return{showAll:"All"}},nt=function(t){return[t,10,25,50]},it=["successModal"],ot=["dangerModal"];function at(t,e){1&t&&(c.Wb(0,"h2"),c.Qc(1,"Add User"),c.Vb())}function rt(t,e){1&t&&(c.Wb(0,"h2"),c.Qc(1,"Edit User"),c.Vb())}function ct(t,e){1&t&&c.Rb(0,"img",48)}function st(t,e){1&t&&(c.Wb(0,"p",49),c.Rb(1,"i",50),c.Qc(2," Edit User "),c.Vb())}function lt(t,e){1&t&&(c.Wb(0,"p",49),c.Rb(1,"i",50),c.Qc(2," Add User "),c.Vb())}const dt=function(){return{width:"351px"}};function bt(t,e){if(1&t&&c.Rb(0,"p-dropdown",51),2&t){const t=c.kc();c.Kc(c.uc(3,dt)),c.rc("options",t.userRoleList)}}function ut(t,e){if(1&t&&c.Rb(0,"p-dropdown",52),2&t){const t=c.kc();c.Kc(c.uc(3,dt)),c.rc("options",t.userRoleList)}}const pt=function(){return{width:"285px"}};function gt(t,e){if(1&t&&(c.Wb(0,"div"),c.Wb(1,"div",53),c.Wb(2,"div",22),c.Wb(3,"div",10),c.Wb(4,"label",11),c.Qc(5,"Profit Percentage %"),c.Wb(6,"span",12),c.Qc(7,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"div",54),c.Rb(9,"input",55),c.Vb(),c.Wb(10,"div",10),c.Wb(11,"label",11),c.Qc(12,"Discount Margin %"),c.Wb(13,"span",12),c.Qc(14,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(15,"div",54),c.Rb(16,"input",56),c.Vb(),c.Wb(17,"div",57),c.Wb(18,"label",11),c.Qc(19,"Unit"),c.Wb(20,"span",12),c.Qc(21,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",58),c.Rb(23,"p-dropdown",59),c.Vb(),c.Wb(24,"div",60),c.Wb(25,"a",61),c.Rb(26,"i",62),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t){const t=e.index,n=c.kc();c.Db(1),c.rc("formGroupName",t),c.Db(22),c.Kc(c.uc(4,pt)),c.rc("options",n.units)}}function ht(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",63),c.gc("click",function(){return c.Fc(t),c.kc().addUser()}),c.Qc(1," SAVE "),c.Vb()}}function mt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",63),c.gc("click",function(){return c.Fc(t),c.kc().updateUser()}),c.Qc(1," Update "),c.Vb()}}const ft=function(){return{width:"100%"}},vt=function(){return{width:"340px"}},_t=[{path:"adduser",component:(()=>{class t{constructor(t,e){this.systemAdminSerive=t,this.router=e,this.userList=[],this.first=0,this.rows=10,this.searchInput=""}ngOnInit(){this.getUserRole()}getUserRole(){this.systemAdminSerive.getQuery("/user-role").subscribe(t=>{console.log("user-role-data:",t),this.userList=t.data})}createUser(){this.router.navigate(["user/create-user"])}getUserRoleDetail(t){this.router.navigate(["user/create-user"],{queryParams:{userRoleId:t}})}fetchUserList(){this.userList=[{userName:"jack.lee@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"kim.tan@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"alex.tan@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"vicky.lee@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"albert.wong@idsmed.com",status:"Suspended",createdDate:"17-Jul-2021"},{userName:"shimi.ong@idsmed.com",status:"Suspended",createdDate:"17-Jul-2021"}]}onSubmit(){}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){this.first=0}isLastPage(){return!this.userList||this.first===this.userList.length-this.rows}isFirstPage(){return!this.userList||0===this.first}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a),c.Qb(a.c))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-user"]],decls:27,vars:10,consts:[[1,"animated","fadeIn"],[1,"col-md-12"],[1,"row","header","pt-3","pb-3"],[1,"col-lg-11","col-md-8","col-sm-8"],[1,"header-icon"],[1,"pi","pi-user"],[1,"title","text-dark"],[1,"col-lg-1","col-md-2","col-sm-2"],["href","#"],["type","submit",1,"btn","btn-primary","btn-fill","pull-right","form-control",3,"click"],[1,"pi","pi-plus"],[1,"card-header","row",2,"background-color","#f6f6f6"],[1,"pi","pi-list"],[1,"ml-2"],[1,"pt-3","pb-3"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","id","search-input","placeholder","Search...",1,"form-control","ds-input",2,"position","relative","vertical-align","top",3,"input"],["styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["width","40%"],["width","20%",1,"text-center"],["width","15%",1,"text-center"],[1,"text-center"],[4,"ngIf"],["href","","routerLinkActive","router-link-active","title","Edit Record",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",0),c.Wb(1,"form"),c.Wb(2,"div",1),c.Wb(3,"div",2),c.Wb(4,"div",3),c.Wb(5,"span",4),c.Rb(6,"i",5),c.Wb(7,"h3",6),c.Wb(8,"b"),c.Qc(9,"User"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(10,"div",7),c.Wb(11,"a",8),c.Wb(12,"button",9),c.gc("click",function(){return e.createUser()}),c.Rb(13,"i",10),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"div",11),c.Rb(15,"i",12),c.Wb(16,"span",13),c.Wb(17,"b"),c.Qc(18,"User List"),c.Vb(),c.Vb(),c.Vb(),c.Wb(19,"div",14),c.Wb(20,"div",15),c.Rb(21,"span",16),c.Wb(22,"input",17),c.gc("input",function(e){return c.Fc(t),c.Dc(24).filterGlobal(e.target.value,"contains")}),c.Vb(),c.Vb(),c.Wb(23,"p-table",18,19),c.Oc(25,J,9,0,"ng-template",20),c.Oc(26,H,11,4,"ng-template",21),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()}2&t&&(c.Db(23),c.rc("value",e.userList)("globalFilterFields",c.uc(6,tt))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",c.vc(8,nt,c.uc(7,et))))},directives:[o.z,o.q,o.r,d.f,b.h,i.p,a.f,a.e],pipes:[i.f],styles:[".card-header[_ngcontent-%COMP%]{border:none}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:left;color:#000;margin-right:15px;font-size:1.5rem}.header-icon[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.user-access-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background:none;border:none}"]}),t})()},{path:"create-user",component:(()=>{class t{constructor(t,e,n,i){this.systemAdminSerive=t,this.router=e,this.route=n,this.formBuilder=i,this.userList=[],this.userRoleList=[],this.status=[{status:"Active",code:1},{status:"Suspend",code:0}],this.companies=[],this.userFormValue=!0,this.userform=this.formBuilder.group({companyName:"",dataAreaId:"",name:"",userAccess:"",email:"",phoneNumber:"",approvedBy:"",status:""}),this.unitUserForm=this.formBuilder.group({unitUserArray:this.formBuilder.array([])})}ngOnInit(){this.route.queryParams.subscribe(t=>{this.userRoleId=t.userRoleId,this.userRoleId?(this.isEdit=!0,this.getListOfRolePermission(),this.getUserRole(),this.getUserRoleDetail(this.userRoleId)):(this.getUserRole(),this.getListOfRolePermission())}),this.systemAdminSerive.getAllCompamanies().subscribe(t=>{t.data.forEach(t=>{this.companies.push(t)})}),this.systemAdminSerive.getUnits().subscribe(t=>{this.units=t.data,console.log("units",t.data)}),null==this.userRoleId&&this.addUserUnit()}getListOfRolePermission(){this.systemAdminSerive.getQuery("/role").subscribe(t=>{console.log("permission-role-data:",t),this.userRoleList=t.data})}getUserRole(){this.systemAdminSerive.getQuery("/user-role").subscribe(t=>{console.log("user-role-data:",t),this.userList=t.data})}getUserRoleDetail(t){this.systemAdminSerive.getQuery("/auth/user/"+t+"/edit").subscribe(t=>{console.log("detail-user:",t),t.data.user_units.forEach(t=>{this.unitUser().push(this.formBuilder.group({discount_percentage:t.allowed_discount_percentage,profit_margin:t.min_profit_margin_percentage,unit_id:t.unit_id}))}),setTimeout(()=>{var e,n,i,o,a,r,c;this.userform.patchValue({name:null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.full_name,email:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.email,phoneNumber:null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.phone_number,status:null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.is_active,userAccess:null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.user_access_id,approvedBy:Number(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.approved_by),companyName:null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.data_area_id})},300)},t=>{this.dangerModal.show(),this.alertBody="Try to get undefined data",setTimeout(()=>{this.dangerModal.hide()},2e3)})}getAllCompany(){this.systemAdminSerive.getQuery("/data-area-id/all").subscribe(t=>{console.log("Company-res:",t),this.companies=t.data})}getAllUnit(){this.systemAdminSerive.getQuery("/units").subscribe(t=>{this.units=t.data})}addUser(){let t=this.unitUserForm.value.unitUserArray;for(let e=0;e<t.length;e++)this.userFormValue=""!=t[e].discount_percentage&&""!=t[e].profit_margin;this.userFormValue&&this.systemAdminSerive.postQuery("/auth/create-user",{full_name:this.userform.value.name,phone_number:this.userform.value.phoneNumber,data_area_id:this.userform.value.companyName,user_access_id:this.userform.value.userAccess,email:this.userform.value.email,is_active:this.userform.value.status,unit_users:this.unitUserForm.value.unitUserArray}).subscribe(t=>{console.log("add-user-res:",t),t.success&&(this.alertBody="User Created successfully.",this.successModal.show(),setTimeout(()=>{this.successModal.hide(),this.router.navigate(["/user/adduser"]),this.resetForm()},2e3))},t=>{console.log("error:",t),this.dangerModal.show(),this.alertBody=t.error.message,setTimeout(()=>{this.dangerModal.hide()},2e3)})}updateUser(){console.log(this.userform.value,"user form"),this.systemAdminSerive.putQuery("/auth/update-user/"+this.userRoleId,{full_name:this.userform.value.name,phone_number:this.userform.value.phoneNumber,data_area_id:this.userform.value.companyName,user_access_id:this.userform.value.userAccess,email:this.userform.value.email,is_active:this.userform.value.status,unit_users:this.unitUserForm.value.unitUserArray}).subscribe(t=>{t.success&&(console.log("update-user-res:",t),this.alertBody="User Updated successfully.",this.successModal.show(),this.resetForm(),setTimeout(()=>{this.successModal.hide(),this.router.navigate(["/user/adduser"])},2e3))},t=>{console.log("error:",t),this.dangerModal.show(),this.alertBody=t.error.message,setTimeout(()=>{this.dangerModal.hide()},2e3)})}resetForm(){this.userform.reset(),this.userform.markAsPristine(),this.userform.markAsUntouched()}back(){this.router.navigateByUrl("user/adduser")}unitUser(){return this.unitUserForm.get("unitUserArray")}newUnitUser(){return this.formBuilder.group({discount_percentage:"",profit_margin:"",unit_id:""})}addUserUnit(){console.log("Adding a employee"),this.unitUser().push(this.newUnitUser()),console.log("form:",this.unitUserForm.value)}removeEmployee(t){this.unitUser().removeAt(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a),c.Qb(a.c),c.Qb(a.a),c.Qb(o.e))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-create-user"]],viewQuery:function(t,e){if(1&t&&(c.Vc(it,1),c.Vc(ot,1)),2&t){let t;c.Cc(t=c.hc())&&(e.successModal=t.first),c.Cc(t=c.hc())&&(e.dangerModal=t.first)}},decls:93,vars:22,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"header-text"],[4,"ngIf"],["styleClass","p-button-outlined",1,"back-p-btn",3,"click"],["pTemplate","content"],[3,"formGroup"],[1,"card-body"],["class","title-text",4,"ngIf"],[1,"row","mt-3","mb-3"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2","mr-3"],[2,"width","100px"],[1,"red-star"],[1,"col-lg-10","col-md-10","col-sm-10"],["formControlName","companyName","placeholder","Select company","optionLabel","title","optionValue","data_area_id",3,"options"],[1,"row"],[1,"col-md-1","col-md-1","col-sm-1","mt-2","mr-3"],[1,"col-lg-5","col-md-5","col-sm-5"],["type","text","formControlName","name","pInputText","",2,"width","340px"],[1,"col-lg-4","col-md-4","col-sm-4"],["formControlName","userAccess","placeholder","User Access","optionLabel","name","optionValue","id",3,"options","style",4,"ngIf"],["formControlName","userAccess","optionLabel","name","optionValue","id","display","chip",3,"options","style",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-1","mt-2","mr-3"],[1,"col-md-5"],["type","email","formControlName","email","pInputText","","placeholder","example@gmail.com",2,"width","340px"],[1,"col-md-4"],["type","text","pInputText","","formControlName","phoneNumber","placeholder","0",2,"width","351px"],["formControlName","status","optionLabel","status","optionValue","code","placeholder","Select Status","optionValue","code",3,"options","required"],[1,"user-unit"],["icon","pi pi-check",1,"btn","btn-icon","btn-outline-primary",3,"click"],[1,"cil-plus","c-icon"],["formArrayName","unitUserArray"],[4,"ngFor","ngForOf"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["src","../../../../assets/img/icons/back-arrow.svg","alt","",2,"width","17px"],[1,"title-text"],[1,"pi","pi-user-plus"],["formControlName","userAccess","placeholder","User Access","optionLabel","name","optionValue","id",3,"options"],["formControlName","userAccess","optionLabel","name","optionValue","id","display","chip",3,"options"],[3,"formGroupName"],[1,"col-lg-2","col-md-2","col-sm-2"],["type","text","pInputText","","formControlName","profit_margin","placeholder","0",2,"width","150px"],["type","text","pInputText","","formControlName","discount_percentage","placeholder","0",2,"width","150px"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2","mr-1"],[1,"col-lg-3","col-md-3","col-sm-3"],["formControlName","unit_id","placeholder","Select unit","placeholder","Units","optionLabel","code","optionValue","id",3,"options"],[1,"col-lg-1","mt-2"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-trash",2,"font-size","18px","padding-left","2rem"],["type","button",1,"btn","btn-primary","save-btn",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Oc(3,at,2,0,"h2",3),c.Oc(4,rt,2,0,"h2",3),c.Wb(5,"div"),c.Wb(6,"p-button",4),c.gc("click",function(){return e.back()}),c.Oc(7,ct,1,0,"ng-template",5),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"form",6),c.Wb(9,"div",7),c.Oc(10,st,3,0,"p",8),c.Oc(11,lt,3,0,"p",8),c.Wb(12,"div",9),c.Wb(13,"div",10),c.Wb(14,"label",11),c.Qc(15,"Company "),c.Wb(16,"span",12),c.Qc(17,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"div",13),c.Rb(19,"p-dropdown",14),c.Vb(),c.Vb(),c.Wb(20,"div",15),c.Wb(21,"div",16),c.Wb(22,"label",11),c.Qc(23,"Name "),c.Wb(24,"span",12),c.Qc(25,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(26,"div",17),c.Rb(27,"input",18),c.Vb(),c.Wb(28,"div",10),c.Wb(29,"label",11),c.Qc(30,"User Access "),c.Wb(31,"span",12),c.Qc(32,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(33,"div",19),c.Oc(34,bt,1,4,"p-dropdown",20),c.Oc(35,ut,1,4,"p-dropdown",21),c.Vb(),c.Vb(),c.Wb(36,"div",22),c.Wb(37,"div",23),c.Wb(38,"label",11),c.Qc(39,"Email "),c.Wb(40,"span",12),c.Qc(41,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(42,"div",24),c.Rb(43,"input",25),c.Vb(),c.Wb(44,"div",23),c.Wb(45,"label",11),c.Qc(46,"Phone Number"),c.Wb(47,"span",12),c.Qc(48,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(49,"div",26),c.Rb(50,"input",27),c.Vb(),c.Vb(),c.Wb(51,"div",22),c.Wb(52,"div",23),c.Wb(53,"label",11),c.Qc(54,"Status "),c.Wb(55,"span",12),c.Qc(56,"*"),c.Vb(),c.Vb(),c.Vb(),c.Wb(57,"div",24),c.Rb(58,"p-dropdown",28),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(59,"form",6),c.Wb(60,"div",29),c.Wb(61,"h4"),c.Qc(62,"Unit User"),c.Vb(),c.Wb(63,"button",30),c.gc("click",function(){return e.addUserUnit()}),c.Rb(64,"i",31),c.Vb(),c.Vb(),c.Wb(65,"div",32),c.Oc(66,gt,27,5,"div",33),c.Vb(),c.Vb(),c.Wb(67,"div",34),c.Wb(68,"button",35),c.gc("click",function(){return e.back()}),c.Qc(69," CANCEL "),c.Vb(),c.Oc(70,ht,2,0,"button",36),c.Oc(71,mt,2,0,"button",36),c.Vb(),c.Vb(),c.Wb(72,"div",37,38),c.Wb(74,"div",39),c.Wb(75,"div",40),c.Wb(76,"div",41),c.Wb(77,"h4",42),c.Qc(78,"Success"),c.Vb(),c.Vb(),c.Wb(79,"div",43),c.Wb(80,"p"),c.Qc(81),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(82,"div",44,45),c.Wb(84,"div",46),c.Wb(85,"div",40),c.Wb(86,"div",41),c.Wb(87,"h4",42),c.Qc(88,"Error"),c.Vb(),c.Vb(),c.Wb(89,"div",43),c.Wb(90,"p"),c.Qc(91),c.Vb(),c.Vb(),c.Rb(92,"div",47),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Db(3),c.rc("ngIf",!e.isEdit),c.Db(1),c.rc("ngIf",e.isEdit),c.Db(4),c.rc("formGroup",e.userform),c.Db(2),c.rc("ngIf",e.isEdit),c.Db(1),c.rc("ngIf",!e.isEdit),c.Db(8),c.Kc(c.uc(20,ft)),c.rc("options",e.companies),c.Db(15),c.rc("ngIf",!e.isEdit),c.Db(1),c.rc("ngIf",e.isEdit),c.Db(23),c.Kc(c.uc(21,vt)),c.rc("options",e.status)("required",!0),c.Db(1),c.rc("formGroup",e.unitUserForm),c.Db(7),c.rc("ngForOf",e.unitUser().controls),c.Db(4),c.rc("ngIf",!e.isEdit),c.Db(1),c.rc("ngIf",e.isEdit),c.Db(10),c.Rc(e.alertBody),c.Db(10),c.Rc(e.alertBody))},directives:[i.p,k.a,b.h,o.z,o.q,o.j,s.a,o.p,o.h,o.c,l.a,o.w,o.d,i.o,u.a,o.k,a.f,a.e],styles:[".card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:none;border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.card[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;font-size:1.5rem}.card[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.card[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:11px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;margin-top:12px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px;font-weight:600;font-size:16px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:-6px;font-size:16px}"]}),t})()},{path:"userloa",component:A},{path:"unitsetup",component:G}];let yt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({imports:[[a.g.forChild(_t)],a.g]}),t})();var Ct=n("QGev"),Mt=n("KnEf"),Vt=n("MEzG"),Pt=n("MY3+"),Ot=n("rVqu");let Wt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({imports:[[i.c,yt,o.l,o.v,s.b,u.b,Ct.b,Vt.b,Pt.b,l.b,Mt.b,k.c,U.b,Ot.b,p.b,d.g]]}),t})()}}]);