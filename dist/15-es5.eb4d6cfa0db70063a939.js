!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{mXvY:function(e,i,o){"use strict";o.r(i),o.d(i,"UserModule",function(){return Rt});var a=o("SVse"),r=o("s7LF"),c=o("iInd"),l=o("alOh"),s=o("8Y7J"),d=o("y1st"),u=o("gtx6"),b=o("ZRSf"),p=o("hhfa"),g=o("LqlI"),h=o("FjU+"),m=["successModal"],f=["dangerModal"];function v(t,e){if(1&t){var n=s.Xb();s.Wb(0,"button",45),s.gc("click",function(){return s.Fc(n),s.kc().addPriceLevelApproval()}),s.Rb(1,"i",46),s.Vb()}}function y(t,e){if(1&t){var n=s.Xb();s.Wb(0,"a",51),s.gc("click",function(){s.Fc(n);var t=s.kc().index;return s.kc().deletePriceLevelRow(t)}),s.Rb(1,"i",52),s.Vb()}}var _=function(){return{width:"380px"}},C=function(){return{width:"300px"}};function M(t,e){if(1&t&&(s.Wb(0,"div",47),s.Wb(1,"div",8),s.Wb(2,"div",9),s.Wb(3,"div",10),s.Wb(4,"label"),s.Qc(5,"Amount: "),s.Wb(6,"span",11),s.Qc(7,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"div",12),s.Rb(9,"p-inputNumber",48),s.Vb(),s.Vb(),s.Vb(),s.Wb(10,"div",8),s.Wb(11,"div",9),s.Wb(12,"div",10),s.Wb(13,"label"),s.Qc(14,"Approve By: "),s.Wb(15,"span",11),s.Qc(16,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(17,"div",12),s.Rb(18,"p-dropdown",49),s.Oc(19,y,2,0,"a",50),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&t){var n=e.index,i=s.kc();s.rc("formGroupName",n),s.Db(9),s.Kc(s.uc(10,_)),s.rc("disabled",i.isUserViewLoa),s.Db(9),s.Kc(s.uc(11,C)),s.rc("options",i.userList)("required",!0)("disabled",i.isUserViewLoa),s.Db(1),s.rc("ngIf",!i.isUserViewLoa)}}function V(t,e){if(1&t){var n=s.Xb();s.Wb(0,"button",53),s.gc("click",function(){return s.Fc(n),s.kc().createUserLoad()}),s.Qc(1," SAVE "),s.Vb()}}function P(t,e){1&t&&(s.Wb(0,"div",54),s.Wb(1,"tr",55),s.Wb(2,"th",56),s.Wb(3,"div",57),s.Qc(4," Created Date "),s.Wb(5,"div",58),s.Rb(6,"p-sortIcon",59),s.Rb(7,"p-columnFilter",60),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"th",61),s.Wb(9,"div",57),s.Qc(10," UnitName "),s.Wb(11,"div",62),s.Rb(12,"p-sortIcon",63),s.Rb(13,"p-columnFilter",64),s.Vb(),s.Vb(),s.Vb(),s.Wb(14,"th",65),s.Wb(15,"div",57),s.Qc(16," Unit Code "),s.Wb(17,"div",66),s.Rb(18,"p-sortIcon",67),s.Rb(19,"p-columnFilter",68),s.Vb(),s.Vb(),s.Vb(),s.Wb(20,"th",69),s.Wb(21,"div",57),s.Qc(22," Action "),s.Rb(23,"div",70),s.Vb(),s.Vb(),s.Vb(),s.Vb())}function O(t,e){if(1&t&&(s.Wb(0,"div"),s.Qc(1),s.lc(2,"date"),s.Vb()),2&t){var n=s.kc().$implicit;s.Db(1),s.Sc(" ",s.nc(2,1,n.created_at,"MM-dd-yyyy")," ")}}function W(t,e){1&t&&(s.Wb(0,"div"),s.Qc(1,"_"),s.Vb())}function x(t,e){if(1&t){var n=s.Xb();s.Wb(0,"tr",71),s.Wb(1,"td",72),s.Oc(2,O,3,4,"div",73),s.Oc(3,W,2,0,"div",73),s.Vb(),s.Wb(4,"td",72),s.Qc(5),s.Vb(),s.Wb(6,"td",72),s.Qc(7),s.Vb(),s.Wb(8,"td",72),s.Wb(9,"a",74),s.gc("click",function(){s.Fc(n);var t=e.$implicit;return s.kc().viewUserLoaDetail(t.id)}),s.Vb(),s.Wb(10,"a",51),s.gc("click",function(){s.Fc(n);var t=e.$implicit;return s.kc().goForEdit(t.id)}),s.Rb(11,"i",75),s.Vb(),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit;s.Db(2),s.rc("ngIf",i.created_at),s.Db(1),s.rc("ngIf",!i.created_at),s.Db(2),s.Sc(" ",i.title," "),s.Db(2),s.Sc(" ",i.code," ")}}var w,k=function(){return["created_at","code","title"]},A=function(){return{showAll:"All"}},U=function(t){return[t,10,25,50]},Q=((w=function(){function e(n,i,o,a){t(this,e),this.formBuilder=n,this.router=i,this.systemAdminSerive=o,this.location=a,this.userList=[],this.allUnits=[],this.alertBody="",this.priceApprovalChk=!0,this.authorityForm=this.formBuilder.group({unit:"",paymentTermApproval:"",personInCharges:"",amount:"",approve_by:"",profitMargin:"",discount:"",cellingPriceAmount:"",cellingPriceApproval:"",priceApprovel:this.formBuilder.array([])})}return n(e,[{key:"ngOnInit",value:function(){this.getUserRole(),this.getAllUnits(),this.addPriceLevelApproval(),console.log("this.authorityForm.value =>",this.authorityForm.value)}},{key:"createUserLoad",value:function(){var t=this,e={parent_unit_id:this.authorityForm.value.unit,pic_user_id:this.authorityForm.value.personInCharges,profit_margin:this.authorityForm.value.profitMargin,approval_discount:this.authorityForm.value.discount,celling_price_amount:this.authorityForm.value.cellingPriceAmount,celling_price_approval_id:this.authorityForm.value.cellingPriceApproval,price_level_approval:this.authorityForm.value.priceApprovel};if(this.unitId){for(var n=e.price_level_approval,i=0;i<n.length;i++)console.log("alsdk",n[i]),this.priceApprovalChk=""!=n[i].amount&&""!=n[i].approve_by;this.priceApprovalChk&&this.systemAdminSerive.putQuery("/units/level-approval/"+this.unitId,e).subscribe(function(e){console.log("user-loa-res:",e),t.alertBody=e.message,t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.authorityForm.reset()},2e3)},function(e){console.log("Error:",e),t.alertBody=e.error.message,t.dangerModal.show()}),this.systemAdminSerive.putQuery("/units/level-approval/"+this.unitId,e).subscribe(function(e){console.log("user-loa-res:",e),t.alertBody=e.message,t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.authorityForm.reset(),t.getPriceApprovelForm().clear(),t.addPriceLevelApproval()},2e3)},function(e){console.log("Error:",e),t.alertBody=e.error.message,t.dangerModal.show()})}else this.alertBody="Please select unit first",this.dangerModal.show()}},{key:"getUserRole",value:function(){var t=this;this.systemAdminSerive.getQuery("/user-role").subscribe(function(e){console.log("user-role-data:",e),t.userList=e.data})}},{key:"getAllUnits",value:function(){var t=this;this.systemAdminSerive.getQuery("/units").subscribe(function(e){console.log("Unit-res:",e),t.allUnits=e.data})}},{key:"goForEdit",value:function(t){var e=this;this.unitId=t,this.systemAdminSerive.getQuery("/units/level-approval/"+this.unitId).subscribe(function(t){var n,i,o,a,r,c,l,s,d,u;e.authorityForm.value.priceApprovel.length&&e.getPriceApprovelForm().removeAt(0),null===(n=null==t?void 0:t.data)||void 0===n||n.price_levels.forEach(function(t){e.getPriceApprovelForm().push(e.formBuilder.group({amount:t.level_amount,approve_by:t.approval_personel_id}))}),e.authorityForm.patchValue({unit:null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.parent_unit_id,personInCharges:null===(a=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.pic)||void 0===a?void 0:a.id,profitMargin:null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.min_profit_margin_percentage,discount:null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.allowed_discount_percentage,cellingPriceAmount:null===(s=null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.ceiling)||void 0===s?void 0:s.ceiling_amount,cellingPriceApproval:null===(u=null===(d=null==t?void 0:t.data)||void 0===d?void 0:d.ceiling)||void 0===u?void 0:u.approval_personel_id})})}},{key:"resetForm",value:function(){this.isUserViewLoa=!1,this.authorityForm.reset(),this.getPriceApprovelForm().clear(),this.addPriceLevelApproval()}},{key:"viewUserLoaDetail",value:function(t){this.isUserViewLoa=!0,this.goForEdit(t)}},{key:"addPriceLevelApproval",value:function(){this.getPriceApprovelForm().push(this.newPriceApprovelFields())}},{key:"deletePriceLevelRow",value:function(t){this.getPriceApprovelForm().removeAt(t)}},{key:"getPriceApprovelForm",value:function(){return this.authorityForm.get("priceApprovel")}},{key:"newPriceApprovelFields",value:function(){return this.formBuilder.group({amount:"",approve_by:""})}},{key:"dynamicForm",value:function(){console.log("array form ",this.authorityForm.value)}},{key:"back",value:function(){this.router.navigateByUrl("user/adduser")}}]),e}()).\u0275fac=function(t){return new(t||w)(s.Qb(r.e),s.Qb(c.c),s.Qb(l.a),s.Qb(a.l))},w.\u0275cmp=s.Kb({type:w,selectors:[["app-user-loa"]],viewQuery:function(t,e){var n;1&t&&(s.Vc(m,1),s.Vc(f,1)),2&t&&(s.Cc(n=s.hc())&&(e.successModal=n.first),s.Cc(n=s.hc())&&(e.dangerModal=n.first))},decls:106,vars:46,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"header-text"],[1,"pi","pi-user-plus"],[3,"formGroup"],[1,"card-body"],[1,"title-text"],[1,"authority-text","row","mb-3"],[1,"col-md-6"],[1,"row"],[1,"col-3","mt-2"],[1,"red-star"],[1,"col-9"],["id","opc","name","picList","formControlName","unit","optionLabel","title","optionValue","id","placeholder","Select parent unit",3,"options","required","disabled"],["id","opc","name","picList","formControlName","personInCharges","optionLabel","full_name","optionValue","id","placeholder","Select In-charges",3,"options","required","disabled"],[1,"authority-text-1","row","mb-4"],["type","text","pInputText","","placeholder","0","formControlName","profitMargin","inputId","integeronly","inputId","withoutgrouping"],["type","text","pInputText","","placeholder","0","formControlName","discount","inputId","integeronly","inputId","withoutgrouping"],[1,"celling-approval"],[1,"authority-text-1","row","mb-2"],["type","text","pInputText","","placeholder","0","formControlName","cellingPriceAmount","inputId","integeronly","inputId","withoutgrouping"],["id","opc","name","picList","formControlName","cellingPriceApproval","optionLabel","full_name","optionValue","id","placeholder","Select celling price approval",3,"options","required","disabled"],[1,"price-action"],["class","btn btn-icon btn-outline-primary","icon","pi pi-check",3,"click",4,"ngIf"],["formArrayName","priceApprovel"],["class","price-level row mt-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],[1,"authority-table"],["styleClass","p-datatable-authority","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["icon","pi pi-check",1,"btn","btn-icon","btn-outline-primary",3,"click"],[1,"cil-plus","c-icon"],[1,"price-level","row","mt-4",3,"formGroupName"],["name","","formControlName","amount","inputId","integeronly","inputId","withoutgrouping",3,"disabled"],["id","opc","name","picList","formControlName","approve_by","optionLabel","full_name","optionValue","id","placeholder","Select Approve By",3,"options","required","disabled"],["routerLinkActive","router-link-active",3,"routerLink","click",4,"ngIf"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash",2,"font-size","18px","padding-left","2rem"],["type","button",1,"btn","btn-primary","save-btn",3,"click"],[1,"table-header-column"],["align","center",2,"background-color","#009aff !important","color","white"],["pSortableColumn","created_at",1,"text-center"],[1,"column-design"],[1,"date-icons"],["field","created_at"],["type","date","field","created_at","display","menu",1,"p-ml-auto"],["pSortableColumn","name",1,"text-center"],[1,"name-icons"],["field","name"],["type","text","field","name","display","menu",1,"p-ml-auto"],["pSortableColumn","rate",1,"text-center"],[1,"rate-icons"],["field","rate"],["type","text","field","rate","display","menu",1,"p-ml-auto"],["pSortableColumn","action",1,"text-center"],[1,"action-icons"],["align","center"],[1,"text-center"],[4,"ngIf"],["href","#",1,"fa","fa-eye",2,"margin","10px",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){1&t&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"h2"),s.Rb(4,"i",3),s.Qc(5," Level Of Approval "),s.Vb(),s.Vb(),s.Vb(),s.Wb(6,"form",4),s.Wb(7,"div",5),s.Wb(8,"p",6),s.Qc(9," Add Level Of Approval "),s.Vb(),s.Wb(10,"div",7),s.Wb(11,"div",8),s.Wb(12,"div",9),s.Wb(13,"div",10),s.Wb(14,"label"),s.Qc(15,"Unit: "),s.Wb(16,"span",11),s.Qc(17,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(18,"div",12),s.Rb(19,"p-dropdown",13),s.Vb(),s.Vb(),s.Vb(),s.Wb(20,"div",8),s.Wb(21,"div",9),s.Wb(22,"div",10),s.Wb(23,"label"),s.Qc(24," Person Incharge:"),s.Wb(25,"span",11),s.Qc(26,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(27,"div",12),s.Rb(28,"p-dropdown",14),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(29,"div",15),s.Wb(30,"div",8),s.Wb(31,"div",9),s.Wb(32,"div",10),s.Wb(33,"label"),s.Qc(34,"Profit Margin: "),s.Wb(35,"span",11),s.Qc(36,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(37,"div",12),s.Rb(38,"input",16),s.Vb(),s.Vb(),s.Vb(),s.Wb(39,"div",8),s.Wb(40,"div",9),s.Wb(41,"div",10),s.Wb(42,"label"),s.Qc(43,"Approval Discount:"),s.Wb(44,"span",11),s.Qc(45,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(46,"div",12),s.Rb(47,"input",17),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(48,"div",18),s.Wb(49,"h4"),s.Qc(50,"Celling Level Approval"),s.Vb(),s.Vb(),s.Wb(51,"div",19),s.Wb(52,"div",8),s.Wb(53,"div",9),s.Wb(54,"div",10),s.Wb(55,"label"),s.Qc(56,"Celling Price Amount: "),s.Wb(57,"span",11),s.Qc(58,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(59,"div",12),s.Rb(60,"input",20),s.Vb(),s.Vb(),s.Vb(),s.Wb(61,"div",8),s.Wb(62,"div",9),s.Wb(63,"div",10),s.Wb(64,"label"),s.Qc(65,"Celling Price Approval:"),s.Wb(66,"span",11),s.Qc(67,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(68,"div",12),s.Rb(69,"p-dropdown",21),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(70,"div",22),s.Wb(71,"h4"),s.Qc(72,"Price Level Approval"),s.Vb(),s.Oc(73,v,2,0,"button",23),s.Vb(),s.Wb(74,"div",24),s.Oc(75,M,20,12,"div",25),s.Vb(),s.Wb(76,"div",26),s.Wb(77,"button",27),s.gc("click",function(){return e.resetForm()}),s.Qc(78," CANCEL "),s.Vb(),s.Oc(79,V,2,0,"button",28),s.Vb(),s.Wb(80,"div",29),s.Wb(81,"p-table",30,31),s.Oc(83,P,24,0,"ng-template",32),s.Oc(84,x,12,4,"ng-template",33),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(85,"div",34,35),s.Wb(87,"div",36),s.Wb(88,"div",37),s.Wb(89,"div",38),s.Wb(90,"h4",39),s.Qc(91,"Success"),s.Vb(),s.Vb(),s.Wb(92,"div",40),s.Wb(93,"p"),s.Qc(94),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(95,"div",41,42),s.Wb(97,"div",43),s.Wb(98,"div",37),s.Wb(99,"div",38),s.Wb(100,"h4",39),s.Qc(101,"Error"),s.Vb(),s.Vb(),s.Wb(102,"div",40),s.Wb(103,"p"),s.Qc(104),s.Vb(),s.Vb(),s.Rb(105,"div",44),s.Vb(),s.Vb(),s.Vb()),2&t&&(s.Db(6),s.rc("formGroup",e.authorityForm),s.Db(13),s.Kc(s.uc(36,_)),s.rc("options",e.allUnits)("required",!0)("disabled",e.isUserViewLoa),s.Db(9),s.Kc(s.uc(37,_)),s.rc("options",e.userList)("required",!0)("disabled",e.isUserViewLoa),s.Db(10),s.Kc(s.uc(38,_)),s.Eb("disabled",e.isUserViewLoa?"":null),s.Db(9),s.Kc(s.uc(39,_)),s.Eb("disabled",e.isUserViewLoa?"":null),s.Db(13),s.Kc(s.uc(40,_)),s.Eb("disabled",e.isUserViewLoa?"":null),s.Db(9),s.Kc(s.uc(41,_)),s.rc("options",e.userList)("required",!0)("disabled",e.isUserViewLoa),s.Db(4),s.rc("ngIf",!e.isUserViewLoa),s.Db(2),s.rc("ngForOf",e.getPriceApprovelForm().controls),s.Db(4),s.rc("ngIf",!e.isUserViewLoa),s.Db(2),s.rc("value",e.allUnits)("globalFilterFields",s.uc(42,k))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.vc(44,U,s.uc(43,A))),s.Db(13),s.Rc(e.alertBody),s.Db(10),s.Rc(e.alertBody))},directives:[r.z,r.q,r.j,d.a,r.p,r.h,r.w,r.c,u.a,a.p,r.d,a.o,b.f,p.h,g.a,r.k,h.a,c.f,c.e,b.e,b.d,b.a],pipes:[a.f],styles:[".card[_ngcontent-%COMP%]{border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.main-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-family:Lato}.main-div[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;font-size:1.5rem}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;margin-left:10px}.main-div[_ngcontent-%COMP%]   .celling-approval[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-top:40px;margin-bottom:20px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;margin-top:12px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px;font-weight:600;font-size:16px}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.main-div[_ngcontent-%COMP%]   .price-action[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:-6px;font-size:16px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:35px 20px 20px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .country-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .date-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .main_unit-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .name-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .rate-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .sub_unit-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem}[_nghost-%COMP%]     .table-header-column{display:contents}[_nghost-%COMP%]     .p-datatable table{border:2px solid #d3d3d3;border-collapse:collapse;table-layout:fixed;width:100%;overflow:hidden;border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column{-ms-user-select:none;-webkit-user-select:none;cursor:pointer;user-select:none;padding:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column:focus{box-shadow:none;outline:0 none}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{color:#f8f9fa;margin-left:.5rem}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon:hover{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open{background:#76b8ee}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open, [_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open:hover{background:#e9ecef52;color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button:hover{color:#495057;border-color:transparent;background:rgba(0,0,0,.14)}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-progressbar{height:.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .table-header-column{display:contents;padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable-authority .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-datatable.p-datatable-authority atatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}"]}),w),F=o("c/fn"),R=o("+yXi"),D=["successModal"],I=["dangerModal"];function L(t,e){1&t&&s.Rb(0,"img",45)}function S(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",46),s.Wb(1,"p-checkbox",47),s.gc("ngModelChange",function(t){return s.Fc(n),s.kc().selectAgency=t}),s.Vb(),s.Wb(2,"label"),s.Qc(3),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit,o=s.kc();s.Db(1),s.rc("value",i)("ngModel",o.selectAgency)("inputId",i.agency_code)("disabled",o.isViewUnit),s.Db(2),s.Rc(i.agency)}}function N(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",46),s.Wb(1,"p-checkbox",48),s.gc("ngModelChange",function(t){return s.Fc(n),s.kc().selectManufectures=t}),s.Vb(),s.Wb(2,"label"),s.Qc(3),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit,o=s.kc();s.Db(1),s.rc("value",i)("inputId",i.manufacturer_code)("ngModel",o.selectManufectures)("disabled",o.isViewUnit),s.Db(2),s.Rc(i.manufacturer)}}function E(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",46),s.Wb(1,"p-checkbox",48),s.gc("ngModelChange",function(t){return s.Fc(n),s.kc().selectOpc=t}),s.Vb(),s.Wb(2,"label"),s.Qc(3),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit,o=s.kc();s.Db(1),s.rc("value",i)("inputId",i.opc_code)("ngModel",o.selectOpc)("disabled",o.isViewUnit),s.Db(2),s.Rc(i.opc)}}function B(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",46),s.Wb(1,"p-checkbox",47),s.gc("ngModelChange",function(t){return s.Fc(n),s.kc().selectedCareArea=t}),s.Vb(),s.Wb(2,"label"),s.Qc(3),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit,o=s.kc();s.Db(1),s.rc("value",i)("ngModel",o.selectedCareArea)("inputId",i.code)("disabled",o.isViewUnit),s.Db(2),s.Rc(i.care_area)}}function T(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",46),s.Wb(1,"p-checkbox",47),s.gc("ngModelChange",function(t){return s.Fc(n),s.kc().selectPrinciples=t}),s.Vb(),s.Wb(2,"label"),s.Qc(3),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit,o=s.kc();s.Db(1),s.rc("value",i)("ngModel",o.selectPrinciples)("inputId",i.principal_code)("disabled",o.isViewUnit),s.Db(2),s.Rc(i.description)}}function j(t,e){if(1&t){var n=s.Xb();s.Wb(0,"button",49),s.gc("click",function(){return s.Fc(n),s.kc().createUnit()}),s.Qc(1),s.Vb()}if(2&t){var i=s.kc();s.Db(1),s.Sc(" ",i.isEditEnabled?"Update":"Create"," ")}}function K(t,e){1&t&&(s.Wb(0,"div",50),s.Wb(1,"tr",51),s.Wb(2,"th",52),s.Wb(3,"div",53),s.Qc(4," Created Date "),s.Wb(5,"div",54),s.Rb(6,"p-sortIcon",55),s.Rb(7,"p-columnFilter",56),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"th",57),s.Wb(9,"div",53),s.Qc(10," Unit Name "),s.Wb(11,"div",58),s.Rb(12,"p-sortIcon",59),s.Rb(13,"p-columnFilter",60),s.Vb(),s.Vb(),s.Vb(),s.Wb(14,"th",61),s.Wb(15,"div",53),s.Qc(16," Unit Code "),s.Wb(17,"div",62),s.Rb(18,"p-sortIcon",63),s.Rb(19,"p-columnFilter",64),s.Vb(),s.Vb(),s.Vb(),s.Wb(20,"th",65),s.Wb(21,"div",53),s.Qc(22," Action "),s.Rb(23,"div",66),s.Vb(),s.Vb(),s.Vb(),s.Vb())}function z(t,e){if(1&t&&(s.Wb(0,"div"),s.Qc(1),s.lc(2,"date"),s.Vb()),2&t){var n=s.kc().$implicit;s.Db(1),s.Sc(" ",s.nc(2,1,n.created_at,"MM-dd-yyyy")," ")}}function X(t,e){1&t&&(s.Wb(0,"div"),s.Qc(1,"_"),s.Vb())}function q(t,e){if(1&t){var n=s.Xb();s.Wb(0,"tr",67),s.Wb(1,"td",68),s.Oc(2,z,3,4,"div",69),s.Oc(3,X,2,0,"div",69),s.Vb(),s.Wb(4,"td",68),s.Qc(5),s.Vb(),s.Wb(6,"td",68),s.Qc(7),s.Vb(),s.Wb(8,"td",68),s.Wb(9,"a",70),s.gc("click",function(){s.Fc(n);var t=e.$implicit;return s.kc().viewUnitSetDetail(t.id)}),s.Vb(),s.Wb(10,"a",71),s.gc("click",function(){s.Fc(n);var t=e.$implicit;return s.kc().getUnit(t.id)}),s.Rb(11,"i",72),s.Vb(),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit;s.Db(2),s.rc("ngIf",i.created_at),s.Db(1),s.rc("ngIf",!i.created_at),s.Db(2),s.Sc(" ",i.title||""," "),s.Db(2),s.Sc(" ",i.code||""," ")}}var $,G=function(){return{width:"100%"}},J=function(){return["created_at","code","title"]},Y=function(){return{showAll:"All"}},Z=function(t){return[t,10,25,50]},H=(($=function(){function e(n,i,o){t(this,e),this.systemAdminService=n,this.formBuilder=i,this.router=o,this.inputfield="#ffffff",this.dummyUserSetupData=[],this.parenUnit=[],this.agency=[],this.manufactures=[],this.opc=[],this.careArea=[],this.principles=[],this.selectParentUnit="",this.selectAgency=[],this.selectManufectures=[],this.selectManufecturesData=[],this.selectOpc=[],this.selectedCareArea=[],this.selectPrinciples=[],this.userList=[],this.companies=[],this.company_Id="",this.unit_Name="",this.unit_Code="",this.isEditEnabled=!1,this.editedUnit=[],this.alertBody="",this.selectedAllUnits=[],this.userSetupForm=this.formBuilder.group({name:"",code:"",dataAreaId:"",parentUnit:"",agency:"",manufacture:"",opc:"",careArea:"",principles:""})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.getParentUnit(),this.getAgency(),this.getManufactures(),this.getOpc(),this.getCareArea(),this.getPrinciples(),this.systemAdminService.getAllCompamanies().subscribe(function(e){e.data.forEach(function(e){t.companies.push(e)})}),this.systemAdminService.getQuery("/units").subscribe(function(e){var n;t.allUnits=e,t.selectedAllUnits=null===(n=t.allUnits)||void 0===n?void 0:n.data,t.selectedAllUnits.forEach(function(t){t.created_at&&(t.created_at=new Date(t.created_at))})})}},{key:"createUnit",value:function(){var t,e=this;t={name:this.unit_Name,code:this.unit_Code,dataAreaId:this.company_Id,min_profit_margin_percentage:"0.00",allowed_discount_percentage:"0.20",parent_unit:this.selectParentUnit.toString(),unit_agencies:this.selectAgency,unit_manufactures:this.selectManufectures,unit_opcs:this.selectOpc,unit_care_areas:this.selectedCareArea,unit_principals:this.selectPrinciples},this.isEditEnabled?this.systemAdminService.putQuery("/units/"+this.unitId,t).subscribe(function(t){if(t.success){var n=e.selectedAllUnits.find(function(e){return e.id==t.data.id});n&&(e.selectedAllUnits[e.selectedAllUnits.indexOf(n)]=t.data),e.alertBody="Unit Updated successfully.",e.successModal.show(),setTimeout(function(){e.successModal.hide(),e.resetForm()},2e3)}},function(t){console.log("Error:",t),e.alertBody=t.error.message,e.dangerModal.show(),setTimeout(function(){e.dangerModal.hide()},2e3)}):this.systemAdminService.postQuery("/units",t).subscribe(function(t){t.success&&(e.selectedAllUnits.push(t.data),e.alertBody="Unit saved successfully.",e.successModal.show(),setTimeout(function(){e.successModal.hide(),e.resetForm()},2e3))},function(t){console.log("Error:",t),e.alertBody=t.error.message,e.dangerModal.show(),setTimeout(function(){e.dangerModal.hide()},2e3)})}},{key:"selectUser",value:function(){}},{key:"getParentUnit",value:function(){var t=this;this.systemAdminService.getQuery("/units").subscribe(function(e){console.log("parent-unit:",e),t.parenUnit=e.data})}},{key:"getAgency",value:function(){var t=this;this.systemAdminService.getQuery("/agency/active-list").subscribe(function(e){console.log("agency-res:",e),t.agency=e.data})}},{key:"changeAgency",value:function(t){console.log("code:",t),this.selectAgency.push(t),console.log("selectAgency:",this.selectAgency)}},{key:"getManufactures",value:function(){var t=this;this.systemAdminService.getQuery("/manufacturer/active-list").subscribe(function(e){console.log("manufactures-res:",e),t.manufactures=e.data})}},{key:"changeManufectures",value:function(t,e){console.log("value:",this.userSetupForm.value.manufacture),console.log("Manufecture:",e),this.selectManufectures.push(e),console.log("selectManufectures:",this.selectManufectures)}},{key:"getOpc",value:function(){var t=this;this.systemAdminService.getQuery("/opc/active-list").subscribe(function(e){console.log("opc-res:",e),t.opc=e.data})}},{key:"changeOPC",value:function(t){console.log("opc:",t),this.selectOpc.push(t),console.log("opc-arr:",this.selectOpc)}},{key:"getCareArea",value:function(){var t=this;this.systemAdminService.getQuery("/care-area/active-list").subscribe(function(e){console.log("care-area:",e),t.careArea=e.data})}},{key:"selectCareArea",value:function(t){console.log("care_area:",t),this.selectedCareArea.push(t)}},{key:"getPrinciples",value:function(){var t=this;this.systemAdminService.getQuery("/principal/active-list").subscribe(function(e){console.log("principles-res:",e),t.principles=e.data})}},{key:"changePrinciples",value:function(t){console.log("value:",this.userSetupForm.value.principles),console.log("principles:",t),this.selectPrinciples.push(t)}},{key:"getUnit",value:function(t){var e=this;this.unitId=t,this.systemAdminService.getQuery("/units/"+t+"/edit").subscribe(function(t){if(t.success){e.editedUnit=t.data,e.isEditEnabled=!0;var n=t.data;n.parent.id&&(e.selectParentUnit=n.parent.id),n.title&&(e.unit_Name=n.title),n.code&&(e.unit_Code=n.code),n.data_area_id&&(e.company_Id=n.data_area_id),setTimeout(function(){var t=[];n.unit_agencies.forEach(function(n){e.agency.filter(function(t){var e;return t.id==(null===(e=n.agency)||void 0===e?void 0:e.id)}).forEach(function(e){t.push(e)})}),e.selectAgency=t},300),setTimeout(function(){var t=[];n.unit_manufactures.forEach(function(n){e.manufactures.filter(function(t){var e;return t.id==(null===(e=n.manufacturer)||void 0===e?void 0:e.id)}).forEach(function(e){t.push(e)})}),e.selectManufectures=t},300),setTimeout(function(){var t=[];n.unit_opcs.forEach(function(n){e.opc.filter(function(t){var e;return t.id==(null===(e=n.opc)||void 0===e?void 0:e.id)}).forEach(function(e){t.push(e)})}),e.selectOpc=t},300),e.selectOpc=n.unit_opcs,setTimeout(function(){var t=[];n.unit_care_areas.forEach(function(n){e.careArea.filter(function(t){var e;return t.id==(null===(e=n.care_area)||void 0===e?void 0:e.id)}).forEach(function(e){t.push(e)})}),e.selectedCareArea=t},2e3),setTimeout(function(){var t=[];n.unit_principals.forEach(function(n){e.principles.filter(function(t){var e;return t.id==(null===(e=n.principal)||void 0===e?void 0:e.id)}).forEach(function(e){t.push(e)})}),e.selectPrinciples=t},300),console.log("this is the response if ",t)}})}},{key:"isValidate",value:function(){return null!=this.selectParentUnit&&null!=this.selectOpc&&null!=this.selectPrinciples&&null!=this.selectAgency&&""!=this.unit_Code&&""!=this.unit_Name&&""!=this.company_Id&&null!=this.selectedCareArea&&null!=this.selectManufectures}},{key:"viewUnitSetDetail",value:function(t){this.isViewUnit=!0,this.getUnit(t)}},{key:"resetForm",value:function(){this.isViewUnit=!1,this.selectParentUnit=null,this.selectOpc=null,this.selectPrinciples=null,this.selectAgency=null,this.unit_Code="",this.unit_Name="",this.isEditEnabled=!1,this.company_Id="",this.selectedCareArea=null,this.selectManufectures=null,this.selectPrinciples=null}},{key:"back",value:function(){this.router.navigateByUrl("user/adduser")}}]),e}()).\u0275fac=function(t){return new(t||$)(s.Qb(l.a),s.Qb(r.e),s.Qb(c.c))},$.\u0275cmp=s.Kb({type:$,selectors:[["app-user-setup"]],viewQuery:function(t,e){var n;1&t&&(s.Vc(D,1),s.Vc(I,1)),2&t&&(s.Cc(n=s.hc())&&(e.successModal=n.first),s.Cc(n=s.hc())&&(e.dangerModal=n.first))},decls:97,vars:34,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"unit-head"],["styleClass","p-button-outlined",1,"back-p-btn",3,"click"],["pTemplate","content"],[1,"card-body"],[1,"title-text"],[1,"row","mt-3","mb-3"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2"],[1,"col-lg-5","col-md-5","col-sm-5"],["placeholder","Select Company","optionLabel","title","optionValue","data_area_id",3,"options","ngModel","disabled","ngModelChange"],["placeholder","Select parent unit","optionLabel","title","optionValue","id",3,"options","ngModel","disabled","ngModelChange"],[1,"row","mb-5"],[2,"width","100px"],["type","text","pInputText","",2,"width","100%",3,"ngModel","ngModelChange"],[1,"red-star"],[1,"card-list"],[1,"card","unit-card"],[1,"card-header"],["class","p-field-checkbox check-field",4,"ngFor","ngForOf"],[1,"card-list-2"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],[1,"row","mt-5"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","id","search-input","placeholder","Search...",1,"form-control","ds-input",2,"position","relative","vertical-align","top",3,"input"],[1,"authority-table"],["styleClass","p-datatable-authority","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["src","../../../../assets/img/icons/back-arrow.svg","alt","",2,"width","17px"],[1,"p-field-checkbox","check-field"],["name","group2",3,"value","ngModel","inputId","disabled","ngModelChange"],["name","group2",3,"value","inputId","ngModel","disabled","ngModelChange"],["type","button",1,"btn","btn-primary","save-btn",3,"click"],[1,"table-header-column"],["align","center",2,"background-color","#009aff !important","color","white"],["pSortableColumn","created_at",1,"text-center"],[1,"column-design"],[1,"date-icons"],["field","created_at"],["type","date","field","created_at","display","menu",1,"p-ml-auto"],["pSortableColumn","unit_name",1,"text-center"],[1,"name-icons"],["field","title"],["type","text","field","title","display","menu",1,"p-ml-auto"],["pSortableColumn","code",1,"text-center"],[1,"country-icons"],["field","code"],["type","text","field","code","display","menu",1,"p-ml-auto"],["pSortableColumn","action",1,"text-center"],[1,"action-icons"],["align","center"],[1,"text-center"],[4,"ngIf"],["href","#",1,"fa","fa-eye",2,"margin","10px",3,"routerLink","click"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"h2"),s.Qc(4,"Unit Setup"),s.Vb(),s.Wb(5,"div"),s.Wb(6,"p-button",3),s.gc("click",function(){return e.back()}),s.Oc(7,L,1,0,"ng-template",4),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"div",5),s.Wb(9,"p",6),s.Qc(10," Details "),s.Vb(),s.Wb(11,"div",7),s.Wb(12,"div",8),s.Wb(13,"label"),s.Qc(14,"Company:"),s.Vb(),s.Vb(),s.Wb(15,"div",9),s.Wb(16,"p-dropdown",10),s.gc("ngModelChange",function(t){return e.company_Id=t}),s.Vb(),s.Vb(),s.Wb(17,"div",8),s.Wb(18,"label"),s.Qc(19,"Parent Unit:"),s.Vb(),s.Vb(),s.Wb(20,"div",9),s.Wb(21,"p-dropdown",11),s.gc("ngModelChange",function(t){return e.selectParentUnit=t}),s.Vb(),s.Vb(),s.Vb(),s.Wb(22,"div",12),s.Wb(23,"div",8),s.Wb(24,"label",13),s.Qc(25,"Unit Name:"),s.Vb(),s.Vb(),s.Wb(26,"div",9),s.Wb(27,"input",14),s.gc("ngModelChange",function(t){return e.unit_Name=t}),s.Vb(),s.Vb(),s.Wb(28,"div",8),s.Wb(29,"label"),s.Qc(30,"Code:"),s.Wb(31,"span",15),s.Qc(32,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(33,"div",9),s.Wb(34,"input",14),s.gc("ngModelChange",function(t){return e.unit_Code=t}),s.Vb(),s.Vb(),s.Vb(),s.Wb(35,"div",16),s.Wb(36,"div",17),s.Wb(37,"div",18),s.Qc(38,"Agency"),s.Vb(),s.Wb(39,"div",5),s.Oc(40,S,4,5,"div",19),s.Vb(),s.Vb(),s.Wb(41,"div",17),s.Wb(42,"div",18),s.Qc(43,"Manufactures"),s.Vb(),s.Wb(44,"div",5),s.Oc(45,N,4,5,"div",19),s.Vb(),s.Vb(),s.Wb(46,"div",17),s.Wb(47,"div",18),s.Qc(48,"OPC"),s.Vb(),s.Wb(49,"div",5),s.Oc(50,E,4,5,"div",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(51,"div",20),s.Wb(52,"div",17),s.Wb(53,"div",18),s.Qc(54,"Care Area"),s.Vb(),s.Wb(55,"div",5),s.Oc(56,B,4,5,"div",19),s.Vb(),s.Vb(),s.Wb(57,"div",17),s.Wb(58,"div",18),s.Qc(59,"Principles"),s.Vb(),s.Wb(60,"div",5),s.Oc(61,T,4,5,"div",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(62,"div",21),s.Wb(63,"button",22),s.gc("click",function(){return e.resetForm()}),s.Qc(64," CANCEL "),s.Vb(),s.Oc(65,j,2,1,"button",23),s.Vb(),s.Wb(66,"div",24),s.Wb(67,"div",25),s.Wb(68,"div",26),s.Rb(69,"span",27),s.Wb(70,"input",28),s.gc("input",function(t){return s.Fc(n),s.Dc(73).filterGlobal(t.target.value,"contains")}),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(71,"div",29),s.Wb(72,"p-table",30,31),s.Oc(74,K,24,0,"ng-template",32),s.Oc(75,q,12,4,"ng-template",33),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(76,"div",34,35),s.Wb(78,"div",36),s.Wb(79,"div",37),s.Wb(80,"div",38),s.Wb(81,"h4",39),s.Qc(82,"Success"),s.Vb(),s.Vb(),s.Wb(83,"div",40),s.Wb(84,"p"),s.Qc(85),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(86,"div",41,42),s.Wb(88,"div",43),s.Wb(89,"div",37),s.Wb(90,"div",38),s.Wb(91,"h4",39),s.Qc(92,"Error"),s.Vb(),s.Vb(),s.Wb(93,"div",40),s.Wb(94,"p"),s.Qc(95),s.Vb(),s.Vb(),s.Rb(96,"div",44),s.Vb(),s.Vb(),s.Vb()}2&t&&(s.Db(16),s.Kc(s.uc(28,G)),s.rc("options",e.companies)("ngModel",e.company_Id)("disabled",e.isViewUnit),s.Db(5),s.Kc(s.uc(29,G)),s.rc("options",e.parenUnit)("ngModel",e.selectParentUnit)("disabled",e.isViewUnit),s.Db(6),s.rc("ngModel",e.unit_Name),s.Eb("disabled",e.isViewUnit?"":null),s.Db(7),s.rc("ngModel",e.unit_Code),s.Eb("disabled",e.isViewUnit?"":null),s.Db(6),s.rc("ngForOf",e.agency),s.Db(5),s.rc("ngForOf",e.manufactures),s.Db(5),s.rc("ngForOf",e.opc),s.Db(6),s.rc("ngForOf",e.careArea),s.Db(5),s.rc("ngForOf",e.principles),s.Db(4),s.rc("ngIf",!e.isViewUnit),s.Db(7),s.rc("value",e.selectedAllUnits)("globalFilterFields",s.uc(30,J))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.vc(32,Z,s.uc(31,Y))),s.Db(13),s.Rc(e.alertBody),s.Db(10),s.Rc(e.alertBody))},directives:[F.a,p.h,d.a,r.p,r.s,r.c,u.a,a.o,a.p,b.f,g.a,R.a,b.e,b.d,b.a,c.f,c.e],pipes:[a.f],styles:[".card[_ngcontent-%COMP%]{border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.unit-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-family:Lato;overflow:hidden}.main-div[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.main-div[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.main-div[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px;margin-left:10px}.main-div[_ngcontent-%COMP%]   .card-list-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:2px;grid-auto-rows:auto;margin-left:87px}.main-div[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]{border:1px solid #d3d3d3;width:274px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{max-height:300px;overflow-x:auto}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .check-field[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;margin:10px}.main-div[_ngcontent-%COMP%]   .unit-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .check-field[_ngcontent-%COMP%]   p-checkbox[_ngcontent-%COMP%]{padding-right:10px;padding-left:30px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.main-div[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]{width:96%;margin:0 0 10px 23px}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.main-div[_ngcontent-%COMP%]   .has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:3px 20px 20px}.main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .country-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .date-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .main_unit-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .name-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .rate-icons[_ngcontent-%COMP%], .main-div[_ngcontent-%COMP%]   .authority-table[_ngcontent-%COMP%]   .sub_unit-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.main-view-model[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.view-action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin:20px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem}[_nghost-%COMP%]     .table-header-column{display:contents}[_nghost-%COMP%]     .p-datatable table{border:2px solid #d3d3d3;border-collapse:collapse;table-layout:fixed;width:100%;overflow:hidden;border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column{-ms-user-select:none;-webkit-user-select:none;cursor:pointer;user-select:none;padding:10px}[_nghost-%COMP%]     .p-datatable .p-sortable-column:focus{box-shadow:none;outline:0 none}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover{background:#2196f3;color:#fff}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon{color:#f8f9fa;margin-left:.5rem}[_nghost-%COMP%]     .p-datatable .p-sortable-column .p-sortable-column-icon:hover{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight:hover .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-datatable .p-sortable-column.p-highlight .p-sortable-column-icon{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button{color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open{background:#76b8ee}[_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open, [_nghost-%COMP%]     .p-column-filter-menu-button.p-column-filter-menu-button-open:hover{background:#e9ecef52;color:#f8f9fa}[_nghost-%COMP%]     .p-column-filter-menu-button:hover{color:#495057;border-color:transparent;background:rgba(0,0,0,.14)}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-progressbar{height:.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .table-header-column{display:contents;padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-d-shadowcsshost   .p-datatable-authority .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-datatable.p-datatable-authority atatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-authority .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:16px;font-weight:600;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion{width:345px}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{background:#f8f9fa}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#f8f9fa}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0;max-height:260px;overflow-x:auto;display:block}"]}),$);function tt(t,e){1&t&&(s.Wb(0,"tr"),s.Wb(1,"th",22),s.Qc(2,"User Name"),s.Vb(),s.Wb(3,"th",23),s.Qc(4,"Status"),s.Vb(),s.Wb(5,"th",23),s.Qc(6,"Creaed Date"),s.Vb(),s.Wb(7,"th",24),s.Qc(8,"Action"),s.Vb(),s.Vb())}function et(t,e){if(1&t&&(s.Wb(0,"div"),s.Qc(1),s.lc(2,"date"),s.Vb()),2&t){var n=s.kc().$implicit;s.Db(1),s.Sc(" ",s.nc(2,1,n.created_at,"dd-MMM-yyyy")," ")}}function nt(t,e){1&t&&(s.Wb(0,"div"),s.Qc(1,"_"),s.Vb())}function it(t,e){if(1&t){var n=s.Xb();s.Wb(0,"tr"),s.Wb(1,"td"),s.Qc(2),s.Vb(),s.Wb(3,"td",25),s.Qc(4),s.Vb(),s.Wb(5,"td",25),s.Oc(6,et,3,4,"div",26),s.Oc(7,nt,2,0,"div",26),s.Vb(),s.Wb(8,"td",25),s.Wb(9,"a",27),s.gc("click",function(){s.Fc(n);var t=e.$implicit;return s.kc().getUserRoleDetail(t.id)}),s.Rb(10,"i",28),s.Vb(),s.Vb(),s.Vb()}if(2&t){var i=e.$implicit;s.Db(2),s.Rc(i.full_name),s.Db(2),s.Rc(i.status),s.Db(2),s.rc("ngIf",i.created_at),s.Db(1),s.rc("ngIf",!i.created_at)}}var ot=function(){return["full_name","status","created_at"]},at=function(){return{showAll:"All"}},rt=function(t){return[t,10,25,50]},ct=["successModal"],lt=["dangerModal"];function st(t,e){1&t&&(s.Wb(0,"h2"),s.Qc(1,"Add User"),s.Vb())}function dt(t,e){1&t&&(s.Wb(0,"h2"),s.Qc(1,"Edit User"),s.Vb())}function ut(t,e){1&t&&s.Rb(0,"img",48)}function bt(t,e){1&t&&(s.Wb(0,"p",49),s.Rb(1,"i",50),s.Qc(2," Edit User "),s.Vb())}function pt(t,e){1&t&&(s.Wb(0,"p",49),s.Rb(1,"i",50),s.Qc(2," Add User "),s.Vb())}var gt=function(){return{width:"351px"}};function ht(t,e){if(1&t&&s.Rb(0,"p-dropdown",51),2&t){var n=s.kc();s.Kc(s.uc(3,gt)),s.rc("options",n.userRoleList)}}function mt(t,e){if(1&t&&s.Rb(0,"p-dropdown",52),2&t){var n=s.kc();s.Kc(s.uc(3,gt)),s.rc("options",n.userRoleList)}}var ft=function(){return{width:"285px"}};function vt(t,e){if(1&t&&(s.Wb(0,"div"),s.Wb(1,"div",53),s.Wb(2,"div",22),s.Wb(3,"div",10),s.Wb(4,"label",11),s.Qc(5,"Profit Percentage %"),s.Wb(6,"span",12),s.Qc(7,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"div",54),s.Rb(9,"input",55),s.Vb(),s.Wb(10,"div",10),s.Wb(11,"label",11),s.Qc(12,"Discount Margin %"),s.Wb(13,"span",12),s.Qc(14,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(15,"div",54),s.Rb(16,"input",56),s.Vb(),s.Wb(17,"div",57),s.Wb(18,"label",11),s.Qc(19,"Unit"),s.Wb(20,"span",12),s.Qc(21,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(22,"div",58),s.Rb(23,"p-dropdown",59),s.Vb(),s.Wb(24,"div",60),s.Wb(25,"a",61),s.Rb(26,"i",62),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&t){var n=e.index,i=s.kc();s.Db(1),s.rc("formGroupName",n),s.Db(22),s.Kc(s.uc(4,ft)),s.rc("options",i.units)}}function yt(t,e){if(1&t){var n=s.Xb();s.Wb(0,"button",63),s.gc("click",function(){return s.Fc(n),s.kc().addUser()}),s.Qc(1," SAVE "),s.Vb()}}function _t(t,e){if(1&t){var n=s.Xb();s.Wb(0,"button",63),s.gc("click",function(){return s.Fc(n),s.kc().updateUser()}),s.Qc(1," Update "),s.Vb()}}var Ct,Mt,Vt,Pt,Ot=function(){return{width:"100%"}},Wt=function(){return{width:"340px"}},xt=[{path:"adduser",component:(Mt=function(){function e(n,i){t(this,e),this.systemAdminSerive=n,this.router=i,this.userList=[],this.first=0,this.rows=10,this.searchInput=""}return n(e,[{key:"ngOnInit",value:function(){this.getUserRole()}},{key:"getUserRole",value:function(){var t=this;this.systemAdminSerive.getQuery("/user-role").subscribe(function(e){console.log("user-role-data:",e),t.userList=e.data})}},{key:"createUser",value:function(){this.router.navigate(["user/create-user"])}},{key:"getUserRoleDetail",value:function(t){this.router.navigate(["user/create-user"],{queryParams:{userRoleId:t}})}},{key:"fetchUserList",value:function(){this.userList=[{userName:"jack.lee@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"kim.tan@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"alex.tan@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"vicky.lee@idsmed.com",status:"Active",createdDate:"17-Jul-2021"},{userName:"albert.wong@idsmed.com",status:"Suspended",createdDate:"17-Jul-2021"},{userName:"shimi.ong@idsmed.com",status:"Suspended",createdDate:"17-Jul-2021"}]}},{key:"onSubmit",value:function(){}},{key:"next",value:function(){this.first=this.first+this.rows}},{key:"prev",value:function(){this.first=this.first-this.rows}},{key:"reset",value:function(){this.first=0}},{key:"isLastPage",value:function(){return!this.userList||this.first===this.userList.length-this.rows}},{key:"isFirstPage",value:function(){return!this.userList||0===this.first}}]),e}(),Mt.\u0275fac=function(t){return new(t||Mt)(s.Qb(l.a),s.Qb(c.c))},Mt.\u0275cmp=s.Kb({type:Mt,selectors:[["app-user"]],decls:27,vars:10,consts:[[1,"animated","fadeIn"],[1,"col-md-12"],[1,"row","header","pt-3","pb-3"],[1,"col-lg-11","col-md-8","col-sm-8"],[1,"header-icon"],[1,"pi","pi-user"],[1,"title","text-dark"],[1,"col-lg-1","col-md-2","col-sm-2"],["href","#"],["type","submit",1,"btn","btn-primary","btn-fill","pull-right","form-control",3,"click"],[1,"pi","pi-plus"],[1,"card-header","row",2,"background-color","#f6f6f6"],[1,"pi","pi-list"],[1,"ml-2"],[1,"pt-3","pb-3"],[1,"form-group","has-search"],[1,"fa","fa-search","form-control-feedback"],["type","text","id","search-input","placeholder","Search...",1,"form-control","ds-input",2,"position","relative","vertical-align","top",3,"input"],["styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","globalFilterFields","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["width","40%"],["width","20%",1,"text-center"],["width","15%",1,"text-center"],[1,"text-center"],[4,"ngIf"],["href","","routerLinkActive","router-link-active","title","Edit Record",3,"routerLink","click"],[1,"fa","fa-edit"]],template:function(t,e){if(1&t){var n=s.Xb();s.Wb(0,"div",0),s.Wb(1,"form"),s.Wb(2,"div",1),s.Wb(3,"div",2),s.Wb(4,"div",3),s.Wb(5,"span",4),s.Rb(6,"i",5),s.Wb(7,"h3",6),s.Wb(8,"b"),s.Qc(9,"User"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(10,"div",7),s.Wb(11,"a",8),s.Wb(12,"button",9),s.gc("click",function(){return e.createUser()}),s.Rb(13,"i",10),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(14,"div",11),s.Rb(15,"i",12),s.Wb(16,"span",13),s.Wb(17,"b"),s.Qc(18,"User List"),s.Vb(),s.Vb(),s.Vb(),s.Wb(19,"div",14),s.Wb(20,"div",15),s.Rb(21,"span",16),s.Wb(22,"input",17),s.gc("input",function(t){return s.Fc(n),s.Dc(24).filterGlobal(t.target.value,"contains")}),s.Vb(),s.Vb(),s.Wb(23,"p-table",18,19),s.Oc(25,tt,9,0,"ng-template",20),s.Oc(26,it,11,4,"ng-template",21),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()}2&t&&(s.Db(23),s.rc("value",e.userList)("globalFilterFields",s.uc(6,ot))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.vc(8,rt,s.uc(7,at))))},directives:[r.z,r.q,r.r,b.f,p.h,a.p,c.f,c.e],pipes:[a.f],styles:[".card-header[_ngcontent-%COMP%]{border:none}.header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:left;color:#000;margin-right:15px;font-size:1.5rem}.header-icon[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left}.has-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}.user-access-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background:none;border:none}"]}),Mt)},{path:"create-user",component:(Ct=function(){function e(n,i,o,a){t(this,e),this.systemAdminSerive=n,this.router=i,this.route=o,this.formBuilder=a,this.userList=[],this.userRoleList=[],this.status=[{status:"Active",code:1},{status:"Suspend",code:0}],this.companies=[],this.userFormValue=!0,this.userform=this.formBuilder.group({companyName:"",dataAreaId:"",name:"",userAccess:"",email:"",phoneNumber:"",approvedBy:"",status:""}),this.unitUserForm=this.formBuilder.group({unitUserArray:this.formBuilder.array([])})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.route.queryParams.subscribe(function(e){t.userRoleId=e.userRoleId,t.userRoleId?(t.isEdit=!0,t.getListOfRolePermission(),t.getUserRole(),t.getUserRoleDetail(t.userRoleId)):(t.getUserRole(),t.getListOfRolePermission())}),this.systemAdminSerive.getAllCompamanies().subscribe(function(e){e.data.forEach(function(e){t.companies.push(e)})}),this.systemAdminSerive.getUnits().subscribe(function(e){t.units=e.data,console.log("units",e.data)}),null==this.userRoleId&&this.addUserUnit()}},{key:"getListOfRolePermission",value:function(){var t=this;this.systemAdminSerive.getQuery("/role").subscribe(function(e){console.log("permission-role-data:",e),t.userRoleList=e.data})}},{key:"getUserRole",value:function(){var t=this;this.systemAdminSerive.getQuery("/user-role").subscribe(function(e){console.log("user-role-data:",e),t.userList=e.data})}},{key:"getUserRoleDetail",value:function(t){var e=this;this.systemAdminSerive.getQuery("/auth/user/"+t+"/edit").subscribe(function(t){console.log("detail-user:",t),t.data.user_units.forEach(function(t){e.unitUser().push(e.formBuilder.group({discount_percentage:t.allowed_discount_percentage,profit_margin:t.min_profit_margin_percentage,unit_id:t.unit_id}))}),setTimeout(function(){var n,i,o,a,r,c,l;e.userform.patchValue({name:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.full_name,email:null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.email,phoneNumber:null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.phone_number,status:null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.is_active,userAccess:null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.user_access_id,approvedBy:Number(null===(c=null==t?void 0:t.data)||void 0===c?void 0:c.approved_by),companyName:null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.data_area_id})},300)},function(t){e.dangerModal.show(),e.alertBody="Try to get undefined data",setTimeout(function(){e.dangerModal.hide()},2e3)})}},{key:"getAllCompany",value:function(){var t=this;this.systemAdminSerive.getQuery("/data-area-id/all").subscribe(function(e){console.log("Company-res:",e),t.companies=e.data})}},{key:"getAllUnit",value:function(){var t=this;this.systemAdminSerive.getQuery("/units").subscribe(function(e){t.units=e.data})}},{key:"addUser",value:function(){for(var t=this,e=this.unitUserForm.value.unitUserArray,n=0;n<e.length;n++)this.userFormValue=""!=e[n].discount_percentage&&""!=e[n].profit_margin;this.userFormValue&&this.systemAdminSerive.postQuery("/auth/create-user",{full_name:this.userform.value.name,phone_number:this.userform.value.phoneNumber,data_area_id:this.userform.value.companyName,user_access_id:this.userform.value.userAccess,email:this.userform.value.email,is_active:this.userform.value.status,unit_users:this.unitUserForm.value.unitUserArray}).subscribe(function(e){console.log("add-user-res:",e),e.success&&(t.alertBody="User Created successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.router.navigate(["/user/adduser"]),t.resetForm()},2e3))},function(e){console.log("error:",e),t.dangerModal.show(),t.alertBody=e.error.message,setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"updateUser",value:function(){var t=this;console.log(this.userform.value,"user form"),this.systemAdminSerive.putQuery("/auth/update-user/"+this.userRoleId,{full_name:this.userform.value.name,phone_number:this.userform.value.phoneNumber,data_area_id:this.userform.value.companyName,user_access_id:this.userform.value.userAccess,email:this.userform.value.email,is_active:this.userform.value.status,unit_users:this.unitUserForm.value.unitUserArray}).subscribe(function(e){e.success&&(console.log("update-user-res:",e),t.alertBody="User Updated successfully.",t.successModal.show(),t.resetForm(),setTimeout(function(){t.successModal.hide(),t.router.navigate(["/user/adduser"])},2e3))},function(e){console.log("error:",e),t.dangerModal.show(),t.alertBody=e.error.message,setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"resetForm",value:function(){this.userform.reset(),this.userform.markAsPristine(),this.userform.markAsUntouched()}},{key:"back",value:function(){this.router.navigateByUrl("user/adduser")}},{key:"unitUser",value:function(){return this.unitUserForm.get("unitUserArray")}},{key:"newUnitUser",value:function(){return this.formBuilder.group({discount_percentage:"",profit_margin:"",unit_id:""})}},{key:"addUserUnit",value:function(){console.log("Adding a employee"),this.unitUser().push(this.newUnitUser()),console.log("form:",this.unitUserForm.value)}},{key:"removeEmployee",value:function(t){this.unitUser().removeAt(t)}}]),e}(),Ct.\u0275fac=function(t){return new(t||Ct)(s.Qb(l.a),s.Qb(c.c),s.Qb(c.a),s.Qb(r.e))},Ct.\u0275cmp=s.Kb({type:Ct,selectors:[["app-create-user"]],viewQuery:function(t,e){var n;1&t&&(s.Vc(ct,1),s.Vc(lt,1)),2&t&&(s.Cc(n=s.hc())&&(e.successModal=n.first),s.Cc(n=s.hc())&&(e.dangerModal=n.first))},decls:93,vars:22,consts:[[1,"card","main-div"],[1,"card-header","page-heading-icon"],[1,"header-text"],[4,"ngIf"],["styleClass","p-button-outlined",1,"back-p-btn",3,"click"],["pTemplate","content"],[3,"formGroup"],[1,"card-body"],["class","title-text",4,"ngIf"],[1,"row","mt-3","mb-3"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2","mr-3"],[2,"width","100px"],[1,"red-star"],[1,"col-lg-10","col-md-10","col-sm-10"],["formControlName","companyName","placeholder","Select company","optionLabel","title","optionValue","data_area_id",3,"options"],[1,"row"],[1,"col-md-1","col-md-1","col-sm-1","mt-2","mr-3"],[1,"col-lg-5","col-md-5","col-sm-5"],["type","text","formControlName","name","pInputText","",2,"width","340px"],[1,"col-lg-4","col-md-4","col-sm-4"],["formControlName","userAccess","placeholder","User Access","optionLabel","name","optionValue","id",3,"options","style",4,"ngIf"],["formControlName","userAccess","optionLabel","name","optionValue","id","display","chip",3,"options","style",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-1","mt-2","mr-3"],[1,"col-md-5"],["type","email","formControlName","email","pInputText","","placeholder","example@gmail.com",2,"width","340px"],[1,"col-md-4"],["type","text","pInputText","","formControlName","phoneNumber","placeholder","0",2,"width","351px"],["formControlName","status","optionLabel","status","optionValue","code","placeholder","Select Status","optionValue","code",3,"options","required"],[1,"user-unit"],["icon","pi pi-check",1,"btn","btn-icon","btn-outline-primary",3,"click"],[1,"cil-plus","c-icon"],["formArrayName","unitUserArray"],[4,"ngFor","ngForOf"],[1,"action-btn"],["type","button",1,"btn","btn-outline-primary","cancel-btn",3,"click"],["type","button","class","btn btn-primary save-btn",3,"click",4,"ngIf"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["src","../../../../assets/img/icons/back-arrow.svg","alt","",2,"width","17px"],[1,"title-text"],[1,"pi","pi-user-plus"],["formControlName","userAccess","placeholder","User Access","optionLabel","name","optionValue","id",3,"options"],["formControlName","userAccess","optionLabel","name","optionValue","id","display","chip",3,"options"],[3,"formGroupName"],[1,"col-lg-2","col-md-2","col-sm-2"],["type","text","pInputText","","formControlName","profit_margin","placeholder","0",2,"width","150px"],["type","text","pInputText","","formControlName","discount_percentage","placeholder","0",2,"width","150px"],[1,"col-lg-1","col-md-1","col-sm-1","mt-2","mr-1"],[1,"col-lg-3","col-md-3","col-sm-3"],["formControlName","unit_id","placeholder","Select unit","placeholder","Units","optionLabel","code","optionValue","id",3,"options"],[1,"col-lg-1","mt-2"],["routerLinkActive","router-link-active",3,"routerLink"],[1,"fa","fa-trash",2,"font-size","18px","padding-left","2rem"],["type","button",1,"btn","btn-primary","save-btn",3,"click"]],template:function(t,e){1&t&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Oc(3,st,2,0,"h2",3),s.Oc(4,dt,2,0,"h2",3),s.Wb(5,"div"),s.Wb(6,"p-button",4),s.gc("click",function(){return e.back()}),s.Oc(7,ut,1,0,"ng-template",5),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"form",6),s.Wb(9,"div",7),s.Oc(10,bt,3,0,"p",8),s.Oc(11,pt,3,0,"p",8),s.Wb(12,"div",9),s.Wb(13,"div",10),s.Wb(14,"label",11),s.Qc(15,"Company "),s.Wb(16,"span",12),s.Qc(17,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(18,"div",13),s.Rb(19,"p-dropdown",14),s.Vb(),s.Vb(),s.Wb(20,"div",15),s.Wb(21,"div",16),s.Wb(22,"label",11),s.Qc(23,"Name "),s.Wb(24,"span",12),s.Qc(25,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(26,"div",17),s.Rb(27,"input",18),s.Vb(),s.Wb(28,"div",10),s.Wb(29,"label",11),s.Qc(30,"User Access "),s.Wb(31,"span",12),s.Qc(32,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(33,"div",19),s.Oc(34,ht,1,4,"p-dropdown",20),s.Oc(35,mt,1,4,"p-dropdown",21),s.Vb(),s.Vb(),s.Wb(36,"div",22),s.Wb(37,"div",23),s.Wb(38,"label",11),s.Qc(39,"Email "),s.Wb(40,"span",12),s.Qc(41,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(42,"div",24),s.Rb(43,"input",25),s.Vb(),s.Wb(44,"div",23),s.Wb(45,"label",11),s.Qc(46,"Phone Number"),s.Wb(47,"span",12),s.Qc(48,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(49,"div",26),s.Rb(50,"input",27),s.Vb(),s.Vb(),s.Wb(51,"div",22),s.Wb(52,"div",23),s.Wb(53,"label",11),s.Qc(54,"Status "),s.Wb(55,"span",12),s.Qc(56,"*"),s.Vb(),s.Vb(),s.Vb(),s.Wb(57,"div",24),s.Rb(58,"p-dropdown",28),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(59,"form",6),s.Wb(60,"div",29),s.Wb(61,"h4"),s.Qc(62,"Unit User"),s.Vb(),s.Wb(63,"button",30),s.gc("click",function(){return e.addUserUnit()}),s.Rb(64,"i",31),s.Vb(),s.Vb(),s.Wb(65,"div",32),s.Oc(66,vt,27,5,"div",33),s.Vb(),s.Vb(),s.Wb(67,"div",34),s.Wb(68,"button",35),s.gc("click",function(){return e.back()}),s.Qc(69," CANCEL "),s.Vb(),s.Oc(70,yt,2,0,"button",36),s.Oc(71,_t,2,0,"button",36),s.Vb(),s.Vb(),s.Wb(72,"div",37,38),s.Wb(74,"div",39),s.Wb(75,"div",40),s.Wb(76,"div",41),s.Wb(77,"h4",42),s.Qc(78,"Success"),s.Vb(),s.Vb(),s.Wb(79,"div",43),s.Wb(80,"p"),s.Qc(81),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(82,"div",44,45),s.Wb(84,"div",46),s.Wb(85,"div",40),s.Wb(86,"div",41),s.Wb(87,"h4",42),s.Qc(88,"Error"),s.Vb(),s.Vb(),s.Wb(89,"div",43),s.Wb(90,"p"),s.Qc(91),s.Vb(),s.Vb(),s.Rb(92,"div",47),s.Vb(),s.Vb(),s.Vb()),2&t&&(s.Db(3),s.rc("ngIf",!e.isEdit),s.Db(1),s.rc("ngIf",e.isEdit),s.Db(4),s.rc("formGroup",e.userform),s.Db(2),s.rc("ngIf",e.isEdit),s.Db(1),s.rc("ngIf",!e.isEdit),s.Db(8),s.Kc(s.uc(20,Ot)),s.rc("options",e.companies),s.Db(15),s.rc("ngIf",!e.isEdit),s.Db(1),s.rc("ngIf",e.isEdit),s.Db(23),s.Kc(s.uc(21,Wt)),s.rc("options",e.status)("required",!0),s.Db(1),s.rc("formGroup",e.unitUserForm),s.Db(7),s.rc("ngForOf",e.unitUser().controls),s.Db(4),s.rc("ngIf",!e.isEdit),s.Db(1),s.rc("ngIf",e.isEdit),s.Db(10),s.Rc(e.alertBody),s.Db(10),s.Rc(e.alertBody))},directives:[a.p,F.a,p.h,r.z,r.q,r.j,d.a,r.p,r.h,r.c,u.a,r.w,r.d,a.o,g.a,r.k,c.f,c.e],styles:[".card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:none;border:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.card[_ngcontent-%COMP%]   .red-star[_ngcontent-%COMP%]{color:red}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]{background:none;color:#000;border:none}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.card[_ngcontent-%COMP%]   .page-heading-icon[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;font-size:1.5rem}.card[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;line-height:35px;font-weight:700;border-radius:1px;margin-bottom:30px;padding:6px 6px 6px 15px;background-color:#f6f6f6}.card[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:11px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:50px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-right:10px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:flex-start;margin-top:12px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px;font-weight:600;font-size:16px}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%}.card[_ngcontent-%COMP%]   .user-unit[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:-6px;font-size:16px}"]}),Ct)},{path:"userloa",component:Q},{path:"unitsetup",component:H}],wt=((Vt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Vt)},Vt.\u0275mod=s.Ob({type:Vt}),Vt.\u0275inj=s.Nb({imports:[[c.g.forChild(xt)],c.g]}),Vt),kt=o("QGev"),At=o("KnEf"),Ut=o("MEzG"),Qt=o("MY3+"),Ft=o("rVqu"),Rt=((Pt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Pt)},Pt.\u0275mod=s.Ob({type:Pt}),Pt.\u0275inj=s.Nb({imports:[[a.c,wt,r.l,r.v,d.b,g.b,kt.b,Ut.b,Qt.b,u.b,At.b,F.c,R.b,Ft.b,h.b,b.g]]}),Pt)}}])}();