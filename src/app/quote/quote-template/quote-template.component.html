<div class="main-content">
  <div class="topButtons">
    <div class="download-btn">
      <input
        type="file"
        class="file-input"
        multiple
        (change)="onFileSelected($event)"
        #fileUpload
      />
      <button
        type="button"
        class="btn btn-primary btn-sm m-2 file-upload"
        role="button"
        rel="nofollow"
        target="_blank"
        (click)="fileUpload.click()"
      >
        Upload Image
        <input #fileInput type="file" style="display: none" />
      </button>
      <button class="btn btn-primary btn-sm" (click)="downloadUploadedPDF()">
        Download Quotation
      </button>
    </div>
    <div class="loaderText" *ngIf="loader">
      <div><b>Uploading......</b></div>
    </div>
  </div>
  <!-- style="width: 100%" -->
  <div class="card" id="bodyContent" #bodyContent>
    <div #pdfTable class="" id="pdfTable">
      <div class="template-header">
        <div class="img-text">
          <div class="headerImg" style="width: 780px">
            <img
              style="
                width: 150px;
                height: 60px;
                margin-top: 50px;
                margin-left: 55px;
              "
              src="../../../assets/img/logo.png"
              class="card-img-top"
              alt="..."
            />
          </div>
          <!-- <div class="vl"></div>
          <div class="v2"></div> -->
          <div class="headText" style="text-align: end; width: 475px;">
            <h4 class="textBlur">
              IDS {{quotationsTemplateData?.quotations?.companies?.title}}
            </h4>
            <h4 style="color: black;">GST Registration No:000220168192</h4>
            <h5 style="color: black;">8, {{quotationsTemplateData?.quotations?.companies?.address}}</h5>
            <!-- <h5>4015{{quotationsTemplateData?.quotations?.companies?.address}}</h5> -->
            <div class="phoneFax" style="display: flex ;margin-left: 105px; color: black;">
              <h5>
                <span><b>Telephone:{{quotationsTemplateData?.quotations?.companies?.telephone_number}} </b></span>
              </h5>
              <h5 class="fax" style="margin-left: 50px; color: black;">
                <span><b> Fax: {{quotationsTemplateData?.quotations?.companies?.fax}} </b></span>
              </h5>
            </div>
            <h6 style="color: black;">www.idsMED.com</h6>

            <!-- <p> {{ quotationsTemplateData?.quotations?.companies?.address }}</p>
            <p><b>Telephone:</b> {{quotationsTemplateData?.quotations?.companies?.telephone_number}}</p>
            <p><b>Fax:</b> {{ quotationsTemplateData?.quotations?.companies?.fax }}</p>
            <p><b>Email:</b> {{ quotationsTemplateData?.quotations?.companies?.email }}</p>
            <a href="#">www.idsMED.com</a> -->
          </div>
        </div>
        <!-- <div
          class="secondAddress"
          style="
            float: right;
            text-align: end;
            margin-right: 27px;
            margin-top: 20px;
          "
        >
          <h4><U>JOHR OFFICE</U></h4>
          <h5>42 Jalan Pertama, Pusat Perdagangan Danga Utama {{ quotationsTemplateData?.quotations?.customer?.address }}</h5>
          <h5>81300, Sakudai, Johr</h5>
          <div class="phoneFax" style="display: flex">
            <h5>
              <p><b>Telephone: +923847678632486 </b></p>
            </h5>
            <h5 class="fax" style="margin-left: 50px">
              <p><b> Fax: +923847678632486 </b></p>
            </h5>
          </div>
          <span> www.idsMED.com </span>
        </div> -->
      </div>
    </div>
    <div class="addressDetailMain" style="display: flex">
      <div class="address-title col-lg-6 col-md-6" 
      style=
      "display: flex;
      margin-left: 40px;
      margin-top: 13px;
      font-size: 17px;
      color: black;
      flex-direction: column;">
        <div
          *ngIf="
            quotationsTemplateData?.quotations?.contacts?.primary_contact
              ?.full_name
          "
        >
          {{
            quotationsTemplateData?.quotations?.contacts?.primary_contact
              ?.full_name
          }},
        </div>

        <div *ngIf="quotationsTemplateData?.quotations?.customer?.company_name">
          {{ quotationsTemplateData?.quotations?.customer?.company_name }},
        </div>

        <div *ngIf="quotationsTemplateData?.quotations?.customer?.address">
          {{ quotationsTemplateData?.quotations?.customer?.address }}
        </div>
      </div>
      <div class="addressDetails col-lg-6 col-md-6" style="margin-top: 15px" id="headerContent" #headerContent>
        <table style="color: black;">
          <tr>
            <th >
              <h5 style="margin-bottom: 15px">Quotation No</h5>
            </th>
            <th  class="addressDetatilKey">
              <h5 style="width: 140%;height: 25px;padding: 3px;border: 1px solid lightgray;" [attr.contenteditable]="editable" #headerQuoteNo>{{quotationContentHeader?.quoteNo}}</h5>
            </th>
          </tr>
          <tr>
            <th>
              <h5 style="margin-bottom: 15px">Your Ref</h5>
            </th>
            <th  class="addressDetatilKey">
              <h5 style="width: 140%;height: 25px;padding: 3px;border: 1px solid lightgray;" [attr.contenteditable]="editable" #headerRefNo>{{quotationContentHeader?.refNo}}</h5>
            </th>
          </tr>
          <tr>
            <th style="width: 170px">
              <h5 style="margin-bottom: 15px">Date</h5>
            </th>
            <th style="width: 170px" class="addressDetatilKey">
              <h5 style="width: 140%;height: 25px;padding: 3px;border: 1px solid lightgray;" [attr.contenteditable]="editable" #headerDate>{{quotationContentHeader?.date}}</h5>
            </th>
          </tr>
        </table>
      </div>
    </div>
    <div class="card-body" style="margin: 0px 30px;">
      <!-- <div class="initial-info">
        <table class="table table-borderless">
          <tbody>
            <tr class="all-th-td-padding-bottom-none">
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr class="all-th-td-padding-top-bottom-none">
              <th scope="row"><b>No. Ref: </b></th>
              <td>
                <span>:&nbsp;&nbsp;&nbsp;</span
                >{{ quotationsTemplateData?.quotations?.quote_id }}
              </td>
              <th class="date-field-label"><b>Date :</b></th>
              <td class="date-field-data">
                {{
                  quotationsTemplateData?.quotations?.created_at
                    | date: "dd/MM/yyyy"
                }}
              </td>
            </tr>
          </tbody>
        </table>
      </div> -->

      <div class="attentionRelated" style="color: black;">
        <div class="nameEmail">
          <div class="name" style="display: flex">
            <h5 style="width: 115px"><b>Attention &nbsp;&nbsp;:</b></h5>
            <h5 style="margin-left: 40px">
              <b>Sister Mimi Aizura - Ward 2B</b>
            </h5>
          </div>
          <div class="email" style="display: flex">
            <h5 style="width: 115px"><b>Email &nbsp;&nbsp;:</b></h5>
            <span style="margin-left: 40px">
              <b> {{ quotationsTemplateData?.quotations?.companies?.email }}</b>
            </span>
          </div>
        </div>
        <div class="phoneFax" style="display: flex">
          <div class="email" style="display: flex">
            <span style="width: 115px"> <b>Telephone &nbsp;&nbsp;:</b> </span>
            <span style="margin-left: 40px; width: 200px">
              <b>{{quotationsTemplateData?.quotations?.companies?.telephone_number}} </b>
            </span>
          </div>
          <div class="email" style="display: flex">
            <span style="width: 115px"> <b>Fax &nbsp;&nbsp;:</b> </span>
            <span style="margin-left: 40px; width: 200px">
              <b>{{quotationsTemplateData?.quotations?.companies?.fax}}</b>
            </span>
          </div>
        </div>
      </div>

      <div class="main-text">
        <!-- <div  style="border: 1px solid lightgray;"   contentEditable = true data-placeholder="Enter text here"  [attr.contenteditable]="editable" id="headerContent" #headerContent 
          [innerText]="quotationContent?.header_content">

          {{ quotationContent?.header_content }}
          </div> -->

        <div class="productTable">
          <table
            class="table table-bordered table-sm"
            style="
              border: 1px solid black;
              margin-top: 20px;
              text-align: center;
            "
          >
            <thead>
              <tr>
                <th
                  class="numberCol"
                  style="width: 50px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  NO
                </th>
                <th
                  class="descCol"
                  style="width: 50px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  DESCRIPTION
                </th>
                <th
                  class="numberCol"
                  style="width: 50px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  UOM
                </th>
                <th
                  class="numberCol"
                  style="width: 50px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  QTY
                </th>
                <th
                  class="unitPriceCol"
                  style="width: 110px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  UNIT PRICE (RM)
                </th>
                <th
                  class="totalPriceCol"
                  style="width: 110px; border: 1px solid black; font-weight: bold;"
                  scope="col"
                >
                  TOTAL PRICE (RM)
                </th>
              </tr>
            </thead>
            <tbody>
              <tr
                class="main-table-data"
                *ngFor="
                  let item of quotationsTemplateData?.quotations?.products
                "
              >
                <!-- there should be loop for all the products -->
                <td
                  class="numberCol"
                  style="width: 50px; border: 1px solid black"
                >
                  1
                </td>
                <td
                  class="descCol"
                  style="width: 50px; border: 1px solid black"
                >
                  {{ item.name }}
                </td>
                <!-- <td class="numberCol" style="width: 50px; border: 1px solid black;">{{ item.name }}</td> -->
                <td
                  class="numberCol"
                  style="width: 50px; border: 1px solid black"
                >
                  Unit
                </td>
                <td
                  class="numberCol"
                  style="width: 50px; border: 1px solid black"
                >
                  {{ item.quantity }}
                </td>
                <td
                  class="unitPriceCol"
                  style="width: 110px; border: 1px solid black"
                >
                  {{ item.unit_price }}
                </td>
                <td
                  class="totalPriceCol"
                  style="width: 110px; border: 1px solid black"
                >
                  {{ item.total_price }}
                </td>
              </tr>
              <tr style="border-bottom: 2px solid black">
                <td style="border-left: 2px solid;
                border-right: 2px solid;
                border-bottom: 2px solid;">
                 <ul style="list-style-type: none;font-weight: 600;padding: 0px;margin: 0px;"><li>Gross Total</li>
                  <li>Discount</li>
                  <li>Net Total</li>
                  <li>GST (SR 0%)</li>
                  <li>Total Amount</li>
                </ul>
                </td>
                <td style="border-right: unset;"></td>
                <td></td>
                <td></td>
                <td></td>
                <td
                  style="border-left: 2px solid;
                  border-right: 2px solid;
                  border-top: 2px solid;"
                ><ul style="list-style-type: none;font-weight: 600; margin: 0px;
                padding: 0px;" [attr.contenteditable]="editable">

                  <li>16000</li>
                  <li style="border-bottom: 2px solid;width: 104%; margin-left: -5px;" >2000</li>
                  <li>14000</li>
                  <li>0.00</li>
                  <li style="border-top: 2px solid;
                            width: 104%;
                            margin-left: -5px;
                            margin-bottom: -4px;">14000</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="display: flex; margin-top: 20px;" id="footerContent" #footerContent 
        >
        <!-- {{quotationContent?.footer_content}} -->
          <ul style="list-style-type: none; padding: unset;">
            <li> <b> PRICE </b> </li>
            <li> <b> DELIVERY PERIOD </b> </li>
            <li> <b> QUOTE VALIDITY </b> </li>
            <li> <b> PAYMENT TERM </b> </li>
            <li> <b> MANUFACTURER </b> </li>
            <li> <b> WARRANTY </b> </li>
            <li> <b> SERVICING </b> </li>
          </ul>
          <ul style="list-style-type: none;margin-bottom: 20px;" >
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #price>{{quotationContentFooter?.price}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #deliveryP>{{quotationContentFooter?.deliveryP}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #validity>{{quotationContentFooter?.validity}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #paymentTer>{{quotationContentFooter?.paymentTer}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #manufacturer>{{quotationContentFooter?.manufacturer}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #warranty>{{quotationContentFooter?.warranty}}</li>
            <li style="border: 1px solid lightgray;margin-bottom: 3px;" [attr.contenteditable]="editable" #servicing>{{quotationContentFooter?.servicing}}</li>  
          </ul>
        </div>
        <div>
          <p>
            Please contact _______ <b>{{quotationsTemplateData?.quotations?.sales_person?.full_name}}</b>, <span *ngIf="quotationsTemplateData?.quotations?.sales_person?.phone_number"> (<b>{{quotationsTemplateData?.quotations?.sales_person?.phone_number}}</b>) </span> for further
            information/clarification.<br />Kindly indicate our quotation no..<b>{{quotationContentHeader?.quoteNo}}</b>
            on your Purchase Order and email to:__________ <b>{{quotationsTemplateData?.quotations?.sales_person?.email}}</b>.<br />Our
            Standard Term and condition enlose shall apply to this documents.
          </p>
        </div>
        <div class="signatureDiv">
          <div class="signatureImg">
            <img style="width: 100px; height: 100px;" src="https://api.idsmed-dev.websight-app.com/api/signatures/8/eRP5ltJe3YwcTgbqXdGzHYx002hintydYr4grx5U.png" alt="">
          </div>
        </div>

        <!-- <div style="border: 1px solid lightgray;" class="list-detail" contentEditable = true data-placeholder="Enter text here"  [attr.contenteditable]="editable" id="footerContent" #footerContent
          [innerText]="quotationContent?.footer_content" >
          {{ quotationContent?.footer_content }}
          </div>
          <br />
            <p class="name-number">
              <span class="contact-name">ZulfaAlla</span><br />(0812-4920-1673)

              <span class="contact-name">
                {{quotationsTemplateData?.quotations?.sales_person?.full_name}}
              </span
              ><br />
            </p> -->
      </div>
    </div>
  </div>
  <div class="previewSave">
    <button class="btn btn-primary saveButton" (click)="savePreviewContent()">
      Save
    </button>
    <button
      class="btn btn-primary quotationDownload"
      (click)="downloadQuotationTemplate()"
    >
      Download Quotation
    </button>
  </div>
</div>

<div #pdfTable class="" id="pdfTable">
  <div class="card" style="width: 100%" *ngIf="check">
    <div class="show-image">
      <img [src]="url" alt="" />
    </div>
  </div>
</div>

<!-- display succes message -->
<div
  id="success"
  bsModal
  #successModal="bs-modal"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-success" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Success</h4>
      </div>
      <div class="modal-body">
        <p>{{ successMessage }}</p>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>

<div
  (onHide)="reset()"
  id="success"
  bsModal
  #successModal="bs-modal"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-success" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{ alertHeader }}</h4>
      </div>
      <div class="modal-body">
        <p>{{ alertBody }}</p>
      </div>
      <div class="modal-footer">
        <div class="form-check">
          <label class="form-check-label">
            <input
              type="radio"
              class="form-check-input"
              value=""
              name="optradio"
              (click)="onePDF()"
            />One pdf
          </label>
        </div>
        <div class="form-check">
          <label class="form-check-label">
            <input
              type="radio"
              class="form-check-input"
              value=""
              name="optradio"
              (click)="twoPDF()"
            />Two pdf
          </label>
        </div>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- alert -->

<!-- /.modal -->

<div
  (onHide)="reset()"
  bsModal
  #dangerModal="bs-modal"
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-danger" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{ alertHeader }}</h4>
      </div>
      <div class="modal-body">
        <p>{{ alertBody }}</p>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-primary"
          (click)="dangerModal.hide()"
        >
          Close
        </button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
